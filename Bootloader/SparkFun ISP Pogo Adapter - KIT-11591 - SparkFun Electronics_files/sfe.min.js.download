if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function($){"use strict";var version=$.fn.jquery.split(" ")[0].split(".");if(version[0]<2&&version[1]<9||version[0]==1&&version[1]==9&&version[2]<1||version[0]>3){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}}(jQuery);+function($){"use strict";var dismiss='[data-dismiss="alert"]';var Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.7";Alert.TRANSITION_DURATION=150;Alert.prototype.close=function(e){var $this=$(this);var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=$(selector==="#"?[]:selector);if(e)e.preventDefault();if(!$parent.length){$parent=$this.closest(".alert")}$parent.trigger(e=$.Event("close.bs.alert"));if(e.isDefaultPrevented())return;$parent.removeClass("in");function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement()};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.alert");if(!data)$this.data("bs.alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.alert;$.fn.alert=Plugin;$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this};$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery);+function($){"use strict";var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",$.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",$.proxy(this.pause,this)).on("mouseleave.bs.carousel",$.proxy(this.cycle,this))};Carousel.VERSION="3.3.7";Carousel.TRANSITION_DURATION=600;Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:true,keyboard:true};Carousel.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()};Carousel.prototype.cycle=function(e){e||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this};Carousel.prototype.getItemIndex=function(item){this.$items=item.parent().children(".item");return this.$items.index(item||this.$active)};Carousel.prototype.getItemForDirection=function(direction,active){var activeIndex=this.getItemIndex(active);var willWrap=direction=="prev"&&activeIndex===0||direction=="next"&&activeIndex==this.$items.length-1;if(willWrap&&!this.options.wrap)return active;var delta=direction=="prev"?-1:1;var itemIndex=(activeIndex+delta)%this.$items.length;return this.$items.eq(itemIndex)};Carousel.prototype.to=function(pos){var that=this;var activeIndex=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(pos>this.$items.length-1||pos<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){that.to(pos)});if(activeIndex==pos)return this.pause().cycle();return this.slide(pos>activeIndex?"next":"prev",this.$items.eq(pos))};Carousel.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find(".next, .prev").length&&$.support.transition){this.$element.trigger($.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};Carousel.prototype.next=function(){if(this.sliding)return;return this.slide("next")};Carousel.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active");var $next=next||this.getItemForDirection(type,$active);var isCycling=this.interval;var direction=type=="next"?"left":"right";var that=this;if($next.hasClass("active"))return this.sliding=false;var relatedTarget=$next[0];var slideEvent=$.Event("slide.bs.carousel",{relatedTarget:relatedTarget,direction:direction});this.$element.trigger(slideEvent);if(slideEvent.isDefaultPrevented())return;this.sliding=true;isCycling&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var $nextIndicator=$(this.$indicators.children()[this.getItemIndex($next)]);$nextIndicator&&$nextIndicator.addClass("active")}var slidEvent=$.Event("slid.bs.carousel",{relatedTarget:relatedTarget,direction:direction});if($.support.transition&&this.$element.hasClass("slide")){$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);$active.one("bsTransitionEnd",function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger(slidEvent)},0)}).emulateTransitionEnd(Carousel.TRANSITION_DURATION)}else{$active.removeClass("active");$next.addClass("active");this.sliding=false;this.$element.trigger(slidEvent)}isCycling&&this.cycle();return this};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.carousel");var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=="object"&&option);var action=typeof option=="string"?option:options.slide;if(!data)$this.data("bs.carousel",data=new Carousel(this,options));if(typeof option=="number")data.to(option);else if(action)data[action]();else if(options.interval)data.pause().cycle()})}var old=$.fn.carousel;$.fn.carousel=Plugin;$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this};var clickHandler=function(e){var href;var $this=$(this);var $target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));if(!$target.hasClass("carousel"))return;var options=$.extend({},$target.data(),$this.data());var slideIndex=$this.attr("data-slide-to");if(slideIndex)options.interval=false;Plugin.call($target,options);if(slideIndex){$target.data("bs.carousel").to(slideIndex)}e.preventDefault()};$(document).on("click.bs.carousel.data-api","[data-slide]",clickHandler).on("click.bs.carousel.data-api","[data-slide-to]",clickHandler);$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);Plugin.call($carousel,$carousel.data())})})}(jQuery);+function($){"use strict";var backdrop=".dropdown-backdrop";var toggle='[data-toggle="dropdown"]';var Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.7";function getParent($this){var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){if(e&&e.which===3)return;$(backdrop).remove();$(toggle).each(function(){var $this=$(this);var $parent=getParent($this);var relatedTarget={relatedTarget:this};if(!$parent.hasClass("open"))return;if(e&&e.type=="click"&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target))return;$parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.attr("aria-expanded","false");$parent.removeClass("open").trigger($.Event("hidden.bs.dropdown",relatedTarget))})}Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length){$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus)}var relatedTarget={relatedTarget:this};$parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true");$parent.toggleClass("open").trigger($.Event("shown.bs.dropdown",relatedTarget))}return false};Dropdown.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return;var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");if(!isActive&&e.which!=27||isActive&&e.which==27){if(e.which==27)$parent.find(toggle).trigger("focus");return $this.trigger("click")}var desc=" li:not(.disabled):visible a";var $items=$parent.find(".dropdown-menu"+desc);if(!$items.length)return;var index=$items.index(e.target);if(e.which==38&&index>0)index--;if(e.which==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).trigger("focus")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.dropdown");if(!data)$this.data("bs.dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.dropdown;$.fn.dropdown=Plugin;$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown)}(jQuery);+function($){"use strict";var Modal=function(element,options){this.options=options;this.$body=$(document.body);this.$element=$(element);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};Modal.VERSION="3.3.7";Modal.TRANSITION_DURATION=300;Modal.BACKDROP_TRANSITION_DURATION=150;Modal.DEFAULTS={backdrop:true,keyboard:true,show:true};Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)};Modal.prototype.show=function(_relatedTarget){var that=this;var e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){that.$element.one("mouseup.dismiss.bs.modal",function(e){if($(e.target).is(that.$element))that.ignoreBackdropClick=true})});this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length){that.$element.appendTo(that.$body)}that.$element.show().scrollTop(0);that.adjustDialog();if(transition){that.$element[0].offsetWidth}that.$element.addClass("in");that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$dialog.one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)})};Modal.prototype.hide=function(e){if(e)e.preventDefault();e=$.Event("hide.bs.modal");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();$(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal()};Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){if(document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};Modal.prototype.resize=function(){if(this.isShown){$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this))}else{$(window).off("resize.bs.modal")}};Modal.prototype.hideModal=function(){var that=this;this.$element.hide();this.backdrop(function(){that.$body.removeClass("modal-open");that.resetAdjustments();that.resetScrollbar();that.$element.trigger("hidden.bs.modal")})};Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};Modal.prototype.backdrop=function(callback){var that=this;var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$(document.createElement("div")).addClass("modal-backdrop "+animate).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop();callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else if(callback){callback()}};Modal.prototype.handleUpdate=function(){this.adjustDialog()};Modal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:""})};Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth;this.scrollbarWidth=this.measureScrollbar()};Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",bodyPad+this.scrollbarWidth)};Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure";this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;this.$body[0].removeChild(scrollDiv);return scrollbarWidth};function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this);var data=$this.data("bs.modal");var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data)$this.data("bs.modal",data=new Modal(this,options));if(typeof option=="string")data[option](_relatedTarget);else if(options.show)data.show(_relatedTarget)})}var old=$.fn.modal;$.fn.modal=Plugin;$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this);var href=$this.attr("href");var $target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,""));var option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());if($this.is("a"))e.preventDefault();$target.one("show.bs.modal",function(showEvent){if(showEvent.isDefaultPrevented())return;$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})});Plugin.call($target,option,this)})}(jQuery);+function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.VERSION="3.3.7";Tab.TRANSITION_DURATION=150;Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest("ul:not(.dropdown-menu)");var selector=$this.data("target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;var $previous=$ul.find(".active:last a");var hideEvent=$.Event("hide.bs.tab",{relatedTarget:$this[0]});var showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});$previous.trigger(hideEvent);$this.trigger(showEvent);if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return;var $target=$(selector);this.activate($this.closest("li"),$ul);this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]});$this.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})};Tab.prototype.activate=function(element,container,callback){var $active=container.find("> .active");var transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(transition){element[0].offsetWidth;element.addClass("in")}else{element.removeClass("fade")}if(element.parent(".dropdown-menu").length){element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}callback&&callback()}$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next();$active.removeClass("in")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tab");if(!data)$this.data("bs.tab",data=new Tab(this));if(typeof option=="string")data[option]()})}var old=$.fn.tab;$.fn.tab=Plugin;$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this};var clickHandler=function(e){e.preventDefault();Plugin.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',clickHandler).on("click.bs.tab.data-api",'[data-toggle="pill"]',clickHandler)}(jQuery);+function($){"use strict";var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},Collapse.DEFAULTS,options);this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],'+'[data-toggle="collapse"][data-target="#'+element.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};Collapse.VERSION="3.3.7";Collapse.TRANSITION_DURATION=350;Collapse.DEFAULTS={toggle:true};Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"};Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var activesData;var actives=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(actives&&actives.length){activesData=actives.data("bs.collapse");if(activesData&&activesData.transitioning)return}var startEvent=$.Event("show.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;if(actives&&actives.length){Plugin.call(actives,"hide");activesData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])};Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var startEvent=$.Event("hide.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var complete=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!$.support.transition)return complete.call(this);this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)};Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()};Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen);$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};function getTargetFromTrigger($trigger){var href;var target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.collapse");var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data&&options.toggle&&/show|hide/.test(option))options.toggle=false;if(!data)$this.data("bs.collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.collapse;$.fn.collapse=Plugin;$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var $this=$(this);if(!$this.attr("data-target"))e.preventDefault();var $target=getTargetFromTrigger($this);var data=$target.data("bs.collapse");var option=data?"toggle":$this.data();Plugin.call($target,option)})}(jQuery);+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap");var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}return false}$.fn.emulateTransitionEnd=function(duration){var called=false;var $el=this;$(this).one("bsTransitionEnd",function(){called=true});var callback=function(){if(!called)$($el).trigger($.support.transition.end)};setTimeout(callback,duration);return this};$(function(){$.support.transition=transitionEnd();if(!$.support.transition)return;$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);var Handlebars=function(){var __module4__=function(){"use strict";var __exports__;function SafeString(string){this.string=string}SafeString.prototype.toString=function(){return""+this.string};__exports__=SafeString;return __exports__}();var __module3__=function(__dependency1__){"use strict";var __exports__={};var SafeString=__dependency1__;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr]||"&amp;"}function extend(obj,value){for(var key in value){if(Object.prototype.hasOwnProperty.call(value,key)){obj[key]=value[key]}}}__exports__.extend=extend;var toString=Object.prototype.toString;__exports__.toString=toString;var isFunction=function(value){return typeof value==="function"};if(isFunction(/x/)){isFunction=function(value){return typeof value==="function"&&toString.call(value)==="[object Function]"}}var isFunction;__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value==="object"?toString.call(value)==="[object Array]":false};__exports__.isArray=isArray;function escapeExpression(string){if(string instanceof SafeString){return string.toString()}else if(!string&&string!==0){return""}string=""+string;if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)}__exports__.escapeExpression=escapeExpression;function isEmpty(value){if(!value&&value!==0){return true}else if(isArray(value)&&value.length===0){return true}else{return false}}__exports__.isEmpty=isEmpty;return __exports__}(__module4__);var __module5__=function(){"use strict";var __exports__;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var line;if(node&&node.firstLine){line=node.firstLine;message+=" - "+line+":"+node.firstColumn}var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}if(line){this.lineNumber=line;this.column=node.firstColumn}}Exception.prototype=new Error;__exports__=Exception;return __exports__}();var __module2__=function(__dependency1__,__dependency2__){"use strict";var __exports__={};var Utils=__dependency1__;var Exception=__dependency2__;var VERSION="1.3.0";__exports__.VERSION=VERSION;var COMPILER_REVISION=4;__exports__.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};__exports__.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{};this.partials=partials||{};registerDefaultHelpers(this)}__exports__.HandlebarsEnvironment=HandlebarsEnvironment;HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn){throw new Exception("Arg not supported with multiple helpers")}Utils.extend(this.helpers,name)}else{if(inverse){fn.not=inverse}this.helpers[name]=fn}},registerPartial:function(name,str){if(toString.call(name)===objectType){Utils.extend(this.partials,name)}else{this.partials[name]=str}}};function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(arg){if(arguments.length===2){return undefined}else{throw new Exception("Missing helper: '"+arg+"'")}});instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;if(isFunction(context)){context=context.call(this)}if(context===true){return fn(this)}else if(context===false||context==null){return inverse(this)}else if(isArray(context)){if(context.length>0){return instance.helpers.each(context,options)}else{return inverse(this)}}else{return fn(context)}});instance.registerHelper("each",function(context,options){var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;if(isFunction(context)){context=context.call(this)}if(options.data){data=createFrame(options.data)}if(context&&typeof context==="object"){if(isArray(context)){for(var j=context.length;i<j;i++){if(data){data.index=i;data.first=i===0;data.last=i===context.length-1}ret=ret+fn(context[i],{data:data})}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key;data.index=i;data.first=i===0}ret=ret+fn(context[key],{data:data});i++}}}}if(i===0){ret=inverse(this)}return ret});instance.registerHelper("if",function(conditional,options){if(isFunction(conditional)){conditional=conditional.call(this)}if(!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})});instance.registerHelper("with",function(context,options){if(isFunction(context)){context=context.call(this)}if(!Utils.isEmpty(context))return options.fn(context)});instance.registerHelper("log",function(context,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;instance.log(level,context)})}var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,obj){if(logger.level<=level){var method=logger.methodMap[level];if(typeof console!=="undefined"&&console[method]){console[method].call(console,obj)}}}};__exports__.logger=logger;function log(level,obj){logger.log(level,obj)}__exports__.log=log;var createFrame=function(object){var obj={};Utils.extend(obj,object);return obj};__exports__.createFrame=createFrame;return __exports__}(__module3__,__module5__);var __module6__=function(__dependency1__,__dependency2__,__dependency3__){"use strict";var __exports__={};var Utils=__dependency1__;var Exception=__dependency2__;var COMPILER_REVISION=__dependency3__.COMPILER_REVISION;var REVISION_CHANGES=__dependency3__.REVISION_CHANGES;function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}else{throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+").")}}}__exports__.checkRevision=checkRevision;function template(templateSpec,env){if(!env){throw new Exception("No environment passed to template")}var invokePartialWrapper=function(partial,name,context,helpers,partials,data){var result=env.VM.invokePartial.apply(this,arguments);if(result!=null){return result}if(env.compile){var options={helpers:helpers,partials:partials,data:data};partials[name]=env.compile(partial,{data:data!==undefined},env);return partials[name](context,options)}else{throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")}};var container={escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];if(data){programWrapper=program(i,fn,data)}else if(!programWrapper){programWrapper=this.programs[i]=program(i,fn)}return programWrapper},merge:function(param,common){var ret=param||common;if(param&&common&&param!==common){ret={};Utils.extend(ret,common);Utils.extend(ret,param)}return ret},programWithDepth:env.VM.programWithDepth,noop:env.VM.noop,compilerInfo:null};return function(context,options){options=options||{};var namespace=options.partial?options:env,helpers,partials;if(!options.partial){helpers=options.helpers;partials=options.partials}var result=templateSpec.call(container,namespace,context,helpers,partials,options.data);if(!options.partial){env.VM.checkRevision(container.compilerInfo)}return result}}__exports__.template=template;function programWithDepth(i,fn,data){var args=Array.prototype.slice.call(arguments,3);var prog=function(context,options){options=options||{};return fn.apply(this,[context,options.data||data].concat(args))};prog.program=i;prog.depth=args.length;return prog}__exports__.programWithDepth=programWithDepth;function program(i,fn,data){var prog=function(context,options){options=options||{};return fn(context,options.data||data)};prog.program=i;prog.depth=0;return prog}__exports__.program=program;function invokePartial(partial,name,context,helpers,partials,data){var options={partial:true,helpers:helpers,partials:partials,data:data};if(partial===undefined){throw new Exception("The partial "+name+" could not be found")}else if(partial instanceof Function){return partial(context,options)}}__exports__.invokePartial=invokePartial;function noop(){return""}__exports__.noop=noop;return __exports__}(__module3__,__module5__,__module2__);var __module1__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var __exports__;var base=__dependency1__;var SafeString=__dependency2__;var Exception=__dependency3__;var Utils=__dependency4__;var runtime=__dependency5__;var create=function(){var hb=new base.HandlebarsEnvironment;Utils.extend(hb,base);hb.SafeString=SafeString;hb.Exception=Exception;hb.Utils=Utils;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb)};return hb};var Handlebars=create();Handlebars.create=create;__exports__=Handlebars;return __exports__}(__module2__,__module4__,__module5__,__module3__,__module6__);var __module7__=function(__dependency1__){"use strict";var __exports__;var Exception=__dependency1__;function LocationInfo(locInfo){locInfo=locInfo||{};this.firstLine=locInfo.first_line;this.firstColumn=locInfo.first_column;this.lastColumn=locInfo.last_column;this.lastLine=locInfo.last_line}var AST={ProgramNode:function(statements,inverseStrip,inverse,locInfo){var inverseLocationInfo,firstInverseNode;if(arguments.length===3){locInfo=inverse;inverse=null}else if(arguments.length===2){locInfo=inverseStrip;inverseStrip=null}LocationInfo.call(this,locInfo);this.type="program";this.statements=statements;this.strip={};if(inverse){firstInverseNode=inverse[0];if(firstInverseNode){inverseLocationInfo={first_line:firstInverseNode.firstLine,last_line:firstInverseNode.lastLine,last_column:firstInverseNode.lastColumn,first_column:firstInverseNode.firstColumn};this.inverse=new AST.ProgramNode(inverse,inverseStrip,inverseLocationInfo)}else{this.inverse=new AST.ProgramNode(inverse,inverseStrip)}this.strip.right=inverseStrip.left}else if(inverseStrip){this.strip.left=inverseStrip.right}},MustacheNode:function(rawParams,hash,open,strip,locInfo){LocationInfo.call(this,locInfo);this.type="mustache";this.strip=strip;if(open!=null&&open.charAt){var escapeFlag=open.charAt(3)||open.charAt(2);this.escaped=escapeFlag!=="{"&&escapeFlag!=="&"}else{this.escaped=!!open}if(rawParams instanceof AST.SexprNode){this.sexpr=rawParams}else{this.sexpr=new AST.SexprNode(rawParams,hash)}this.sexpr.isRoot=true;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(rawParams,hash,locInfo){LocationInfo.call(this,locInfo);this.type="sexpr";this.hash=hash;var id=this.id=rawParams[0];var params=this.params=rawParams.slice(1);var eligibleHelper=this.eligibleHelper=id.isSimple;this.isHelper=eligibleHelper&&(params.length||hash)},PartialNode:function(partialName,context,strip,locInfo){LocationInfo.call(this,locInfo);this.type="partial";this.partialName=partialName;this.context=context;this.strip=strip},BlockNode:function(mustache,program,inverse,close,locInfo){LocationInfo.call(this,locInfo);if(mustache.sexpr.id.original!==close.path.original){throw new Exception(mustache.sexpr.id.original+" doesn't match "+close.path.original,this)}this.type="block";this.mustache=mustache;this.program=program;this.inverse=inverse;this.strip={left:mustache.strip.left,right:close.strip.right};(program||inverse).strip.left=mustache.strip.right;(inverse||program).strip.right=close.strip.left;if(inverse&&!program){this.isInverse=true}},ContentNode:function(string,locInfo){LocationInfo.call(this,locInfo);this.type="content";this.string=string},HashNode:function(pairs,locInfo){LocationInfo.call(this,locInfo);this.type="hash";this.pairs=pairs},IdNode:function(parts,locInfo){LocationInfo.call(this,locInfo);this.type="ID";var original="",dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part;original+=(parts[i].separator||"")+part;if(part===".."||part==="."||part==="this"){if(dig.length>0){throw new Exception("Invalid path: "+original,this)}else if(part===".."){depth++}else{this.isScoped=true}}else{dig.push(part)}}this.original=original;this.parts=dig;this.string=dig.join(".");this.depth=depth;this.isSimple=parts.length===1&&!this.isScoped&&depth===0;this.stringModeValue=this.string},PartialNameNode:function(name,locInfo){LocationInfo.call(this,locInfo);this.type="PARTIAL_NAME";this.name=name.original},DataNode:function(id,locInfo){LocationInfo.call(this,locInfo);this.type="DATA";this.id=id},StringNode:function(string,locInfo){LocationInfo.call(this,locInfo);this.type="STRING";this.original=this.string=this.stringModeValue=string},IntegerNode:function(integer,locInfo){LocationInfo.call(this,locInfo);this.type="INTEGER";this.original=this.integer=integer;this.stringModeValue=Number(integer)},BooleanNode:function(bool,locInfo){LocationInfo.call(this,locInfo);this.type="BOOLEAN";this.bool=bool;this.stringModeValue=bool==="true"},CommentNode:function(comment,locInfo){LocationInfo.call(this,locInfo);this.type="comment";this.comment=comment}};__exports__=AST;return __exports__}(__module5__);var __module9__=function(){"use strict";var __exports__;var handlebars=function(){var parser={trace:function trace(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return new yy.ProgramNode($$[$0-1],this._$);break;case 2:return new yy.ProgramNode([],this._$);break;case 3:this.$=new yy.ProgramNode([],$$[$0-1],$$[$0],this._$);break;case 4:this.$=new yy.ProgramNode($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 5:this.$=new yy.ProgramNode($$[$0-1],$$[$0],[],this._$);break;case 6:this.$=new yy.ProgramNode($$[$0],this._$);break;case 7:this.$=new yy.ProgramNode([],this._$);break;case 8:this.$=new yy.ProgramNode([],this._$);break;case 9:this.$=[$$[$0]];break;case 10:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 11:this.$=new yy.BlockNode($$[$0-2],$$[$0-1].inverse,$$[$0-1],$$[$0],this._$);break;case 12:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0-1].inverse,$$[$0],this._$);break;case 13:this.$=$$[$0];break;case 14:this.$=$$[$0];break;case 15:this.$=new yy.ContentNode($$[$0],this._$);break;case 16:this.$=new yy.CommentNode($$[$0],this._$);break;case 17:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 18:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 19:this.$={path:$$[$0-1],strip:stripFlags($$[$0-2],$$[$0])};break;case 20:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 21:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 22:this.$=new yy.PartialNode($$[$0-2],$$[$0-1],stripFlags($$[$0-3],$$[$0]),this._$);break;case 23:this.$=stripFlags($$[$0-1],$$[$0]);break;case 24:this.$=new yy.SexprNode([$$[$0-2]].concat($$[$0-1]),$$[$0],this._$);break;case 25:this.$=new yy.SexprNode([$$[$0]],null,this._$);break;case 26:this.$=$$[$0];break;case 27:this.$=new yy.StringNode($$[$0],this._$);break;case 28:this.$=new yy.IntegerNode($$[$0],this._$);break;case 29:this.$=new yy.BooleanNode($$[$0],this._$);break;case 30:this.$=$$[$0];break;case 31:$$[$0-1].isHelper=true;this.$=$$[$0-1];break;case 32:this.$=new yy.HashNode($$[$0],this._$);break;case 33:this.$=[$$[$0-2],$$[$0]];break;case 34:this.$=new yy.PartialNameNode($$[$0],this._$);break;case 35:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0],this._$),this._$);break;case 36:this.$=new yy.PartialNameNode(new yy.IntegerNode($$[$0],this._$));break;case 37:this.$=new yy.DataNode($$[$0],this._$);break;case 38:this.$=new yy.IdNode($$[$0],this._$);break;case 39:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]});this.$=$$[$0-2];break;case 40:this.$=[{part:$$[$0]}];break;case 43:this.$=[];break;case 44:$$[$0-1].push($$[$0]);break;case 47:this.$=[$$[$0]];break;case 48:$$[$0-1].push($$[$0]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function parseError(str,hash){throw new Error(str)},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number"){token=self.symbols_[token]||token}return token}var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex()}action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])if(this.terminals_[p]&&p>2){expected.push("'"+this.terminals_[p]+"'")}if(this.lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'"}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'")}this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0)recovering--}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]}r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined"){return r}if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};function stripFlags(open,close){return{left:open.charAt(2)==="~",right:close.charAt(0)==="~"||close.charAt(1)==="~"}}var lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash)}else{throw new Error(str)}},setInput:function(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return ch},unput:function(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len-1);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1)this.yylineno-=lines.length-1;var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len]}return this},more:function(){this._more=true;return this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done){return this.EOF}if(!this._input)this.done=true;var token,match,tempMatch,index,col,lines;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(!this.options.flex)break}}if(match){lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines)this.yylineno+=lines.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(token)return token;else return}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(typeof r!=="undefined"){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)}};lexer.options={};lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:if(yy_.yytext.slice(-2)==="\\\\"){strip(0,1);this.begin("mu")}else if(yy_.yytext.slice(-1)==="\\"){strip(0,1);this.begin("emu")}else{this.begin("mu")}if(yy_.yytext)return 14;break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:strip(0,4);this.popState();return 15;break;case 4:return 35;break;case 5:return 36;break;case 6:return 25;break;case 7:return 16;break;case 8:return 20;break;case 9:return 19;break;case 10:return 19;break;case 11:return 23;break;case 12:return 22;break;case 13:this.popState();this.begin("com");break;case 14:strip(3,5);this.popState();return 15;break;case 15:return 22;break;case 16:return 41;break;case 17:return 40;break;case 18:return 40;break;case 19:return 44;break;case 20:break;case 21:this.popState();return 24;break;case 22:this.popState();return 18;break;case 23:yy_.yytext=strip(1,2).replace(/\\"/g,'"');return 32;break;case 24:yy_.yytext=strip(1,2).replace(/\\'/g,"'");return 32;break;case 25:return 42;break;case 26:return 34;break;case 27:return 34;break;case 28:return 33;break;case 29:return 40;break;case 30:yy_.yytext=strip(1,2);return 40;break;case 31:return"INVALID";break;case 32:return 5;break}};lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];lexer.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return lexer}();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser}();__exports__=handlebars;return __exports__}();var __module8__=function(__dependency1__,__dependency2__){"use strict";var __exports__={};var parser=__dependency1__;var AST=__dependency2__;__exports__.parser=parser;function parse(input){if(input.constructor===AST.ProgramNode){return input}parser.yy=AST;return parser.parse(input)}__exports__.parse=parse;return __exports__}(__module9__,__module7__);var __module10__=function(__dependency1__){"use strict";var __exports__={};var Exception=__dependency1__;function Compiler(){}__exports__.Compiler=Compiler;Compiler.prototype={compiler:Compiler,disassemble:function(){var opcodes=this.opcodes,opcode,out=[],params,param;for(var i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];if(opcode.opcode==="DECLARE"){out.push("DECLARE "+opcode.name+"="+opcode.value)}else{params=[];for(var j=0;j<opcode.args.length;j++){param=opcode.args[j];if(typeof param==="string"){param='"'+param.replace("\n","\\n")+'"'}params.push(param)}out.push(opcode.opcode+" "+params.join(" "))}}return out.join("\n")},equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len){return false}for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||opcode.args.length!==otherOpcode.args.length){return false}for(var j=0;j<opcode.args.length;j++){if(opcode.args[j]!==otherOpcode.args[j]){return false}}}len=this.children.length;if(other.children.length!==len){return false}for(i=0;i<len;i++){if(!this.children[i].equals(other.children[i])){return false}}return true},guid:0,compile:function(program,options){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=options;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,if:true,unless:true,with:true,log:true};if(knownHelpers){for(var name in knownHelpers){this.options.knownHelpers[name]=knownHelpers[name]}}return this.accept(program)},accept:function(node){var strip=node.strip||{},ret;if(strip.left){this.opcode("strip")}ret=this[node.type](node);if(strip.right){this.opcode("strip")}return ret},program:function(program){var statements=program.statements;for(var i=0,l=statements.length;i<l;i++){this.accept(statements[i])}this.isSimple=l===1;this.depths.list=this.depths.list.sort(function(a,b){return a-b});return this},compileProgram:function(program){var result=(new this.compiler).compile(program,this.options);var guid=this.guid++,depth;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2){continue}else{this.addDepth(depth-1)}}return guid},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;if(program){program=this.compileProgram(program)}if(inverse){inverse=this.compileProgram(inverse)}var sexpr=mustache.sexpr;var type=this.classifySexpr(sexpr);if(type==="helper"){this.helperSexpr(sexpr,program,inverse)}else if(type==="simple"){this.simpleSexpr(sexpr);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousSexpr(sexpr,program,inverse);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},hash:function(hash){var pairs=hash.pairs,pair,val;this.opcode("pushHash");for(var i=0,l=pairs.length;i<l;i++){pair=pairs[i];val=pair[1];if(this.options.stringParams){if(val.depth){this.addDepth(val.depth)}this.opcode("getContext",val.depth||0);this.opcode("pushStringParam",val.stringModeValue,val.type);if(val.type==="sexpr"){this.sexpr(val)}}else{this.accept(val)}this.opcode("assignToHash",pair[0])}this.opcode("popHash")},partial:function(partial){var partialName=partial.partialName;this.usePartial=true;if(partial.context){this.ID(partial.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",partialName.name);this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)},mustache:function(mustache){this.sexpr(mustache.sexpr);if(mustache.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousSexpr:function(sexpr,program,inverse){var id=sexpr.id,name=id.parts[0],isBlock=program!=null||inverse!=null;this.opcode("getContext",id.depth);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var id=sexpr.id;if(id.type==="DATA"){this.DATA(id)}else if(id.parts.length){this.ID(id)}else{this.addDepth(id.depth);this.opcode("getContext",id.depth);this.opcode("pushContext")}this.opcode("resolvePossibleLambda")},helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),name=sexpr.id.parts[0];if(this.options.knownHelpers[name]){this.opcode("invokeKnownHelper",params.length,name)}else if(this.options.knownHelpersOnly){throw new Exception("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr)}else{this.opcode("invokeHelper",params.length,name,sexpr.isRoot)}},sexpr:function(sexpr){var type=this.classifySexpr(sexpr);if(type==="simple"){this.simpleSexpr(sexpr)}else if(type==="helper"){this.helperSexpr(sexpr)}else{this.ambiguousSexpr(sexpr)}},ID:function(id){this.addDepth(id.depth);this.opcode("getContext",id.depth);var name=id.parts[0];if(!name){this.opcode("pushContext")}else{this.opcode("lookupOnContext",id.parts[0])}for(var i=1,l=id.parts.length;i<l;i++){this.opcode("lookup",id.parts[i])}},DATA:function(data){this.options.data=true;if(data.id.isScoped||data.id.depth){throw new Exception("Scoped data references are not supported: "+data.original,data)}this.opcode("lookupData");var parts=data.id.parts;for(var i=0,l=parts.length;i<l;i++){this.opcode("lookup",parts[i])}},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("pushLiteral",integer.integer)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:[].slice.call(arguments,1)})},declare:function(name,value){this.opcodes.push({opcode:"DECLARE",name:name,value:value})},addDepth:function(depth){if(depth===0){return}if(!this.depths[depth]){this.depths[depth]=true;this.depths.list.push(depth)}},classifySexpr:function(sexpr){var isHelper=sexpr.isHelper;var isEligible=sexpr.eligibleHelper;var options=this.options;if(isEligible&&!isHelper){var name=sexpr.id.parts[0];if(options.knownHelpers[name]){isHelper=true}else if(options.knownHelpersOnly){isEligible=false}}if(isHelper){return"helper"}else if(isEligible){return"ambiguous"}else{return"simple"}},pushParams:function(params){var i=params.length,param;while(i--){param=params[i];if(this.options.stringParams){if(param.depth){this.addDepth(param.depth)}this.opcode("getContext",param.depth||0);this.opcode("pushStringParam",param.stringModeValue,param.type);if(param.type==="sexpr"){this.sexpr(param)}}else{this[param.type](param)}}},setupFullMustacheParams:function(sexpr,program,inverse){var params=sexpr.params;this.pushParams(params);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);if(sexpr.hash){this.hash(sexpr.hash)}else{this.opcode("emptyHash")}return params}};function precompile(input,options,env){if(input==null||typeof input!=="string"&&input.constructor!==env.AST.ProgramNode){throw new Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input)}options=options||{};if(!("data"in options)){options.data=true}var ast=env.parse(input);var environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}__exports__.precompile=precompile;function compile(input,options,env){if(input==null||typeof input!=="string"&&input.constructor!==env.AST.ProgramNode){throw new Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input)}options=options||{};if(!("data"in options)){options.data=true}var compiled;function compileInput(){var ast=env.parse(input);var environment=(new env.Compiler).compile(ast,options);var templateSpec=(new env.JavaScriptCompiler).compile(environment,options,undefined,true);return env.template(templateSpec)}return function(context,options){if(!compiled){compiled=compileInput()}return compiled.call(this,context,options)}}__exports__.compile=compile;return __exports__}(__module5__);var __module11__=function(__dependency1__,__dependency2__){"use strict";var __exports__;var COMPILER_REVISION=__dependency1__.COMPILER_REVISION;var REVISION_CHANGES=__dependency1__.REVISION_CHANGES;var log=__dependency1__.log;var Exception=__dependency2__;function Literal(value){this.value=value}function JavaScriptCompiler(){}JavaScriptCompiler.prototype={nameLookup:function(parent,name){var wrap,ret;if(parent.indexOf("depth")===0){wrap=true}if(/^[0-9]+$/.test(name)){ret=parent+"["+name+"]"}else if(JavaScriptCompiler.isValidJavaScriptVariableName(name)){ret=parent+"."+name}else{ret=parent+"['"+name+"']"}if(wrap){return"("+parent+" && "+ret+")"}else{return ret}},compilerInfo:function(){var revision=COMPILER_REVISION,versions=REVISION_CHANGES[revision];return"this.compilerInfo = ["+revision+",'"+versions+"'];\n"},appendToBuffer:function(string){if(this.environment.isSimple){return"return "+string+";"}else{return{appendToBuffer:true,content:string,toString:function(){return"buffer += "+string+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment;this.options=options||{};log("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!context;this.context=context||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(environment,options);var opcodes=environment.opcodes,opcode;this.i=0;for(var l=opcodes.length;this.i<l;this.i++){opcode=opcodes[this.i];if(opcode.opcode==="DECLARE"){this[opcode.name]=opcode.value}else{this[opcode.opcode].apply(this,opcode.args)}if(opcode.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new Exception("Compile completed with content left on stack")}return this.createFunctionContext(asObject)},preamble:function(){var out=[];if(!this.isChild){var namespace=this.namespace;var copies="helpers = this.merge(helpers, "+namespace+".helpers);";if(this.environment.usePartial){copies=copies+" partials = this.merge(partials, "+namespace+".partials);"}if(this.options.data){copies=copies+" data = data || {};"}out.push(copies)}else{out.push("")}if(!this.environment.isSimple){out.push(", buffer = "+this.initializeBuffer())}else{out.push("")}this.lastContext=0;this.source=out},createFunctionContext:function(asObject){var locals=this.stackVars.concat(this.registers.list);if(locals.length>0){this.source[1]=this.source[1]+", "+locals.join(", ")}if(!this.isChild){for(var alias in this.context.aliases){if(this.context.aliases.hasOwnProperty(alias)){this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,l=this.environment.depths.list.length;i<l;i++){params.push("depth"+this.environment.depths.list[i])}var source=this.mergeSource();if(!this.isChild){source=this.compilerInfo()+source}if(asObject){params.push(source);return Function.apply(this,params)}else{var functionSource="function "+(this.name||"")+"("+params.join(",")+") {\n  "+source+"}";log("debug",functionSource+"\n\n");return functionSource}},mergeSource:function(){var source="",buffer;for(var i=0,len=this.source.length;i<len;i++){var line=this.source[i];if(line.appendToBuffer){if(buffer){buffer=buffer+"\n    + "+line.content}else{buffer=line.content}}else{if(buffer){source+="buffer += "+buffer+";\n  ";buffer=undefined}source+=line+"\n  "}}return source},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);this.replaceStack(function(current){params.splice(1,0,current);return"blockHelperMissing.call("+params.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);var current=this.topStack();params.splice(1,0,current);this.pushSource("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){if(this.pendingContent){content=this.pendingContent+content}if(this.stripNext){content=content.replace(/^\s+/,"")}this.pendingContent=content},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var local=this.popStack();this.pushSource("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){if(this.lastContext!==depth){this.lastContext=depth}},lookupOnContext:function(name){this.push(this.nameLookup("depth"+this.lastContext,name,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(current){return"typeof "+current+" === functionType ? "+current+".apply(depth0) : "+current})},lookup:function(name){this.replaceStack(function(current){return current+" == null || "+current+" === false ? "+current+" : "+this.nameLookup(current,name,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(string,type){this.pushStackLiteral("depth"+this.lastContext);this.pushString(type);if(type!=="sexpr"){if(typeof string==="string"){this.pushString(string)}else{this.pushStackLiteral(string)}}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[]}},popHash:function(){var hash=this.hash;this.hash=this.hashes.pop();if(this.options.stringParams){this.push("{"+hash.contexts.join(",")+"}");this.push("{"+hash.types.join(",")+"}")}this.push("{\n    "+hash.values.join(",\n    ")+"\n  }")},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},push:function(expr){this.inlineStack.push(expr);return expr},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){if(guid!=null){this.pushStackLiteral(this.programExpression(guid))}else{this.pushStackLiteral(null)}},invokeHelper:function(paramSize,name,isRoot){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var helper=this.lastHelper=this.setupHelper(paramSize,name,true);var nonHelper=this.nameLookup("depth"+this.lastContext,name,"context");var lookup="helper = "+helper.name+" || "+nonHelper;if(helper.paramsInit){lookup+=","+helper.paramsInit}this.push("("+lookup+",helper "+"? helper.call("+helper.callParams+") "+": helperMissing.call("+helper.helperMissingParams+"))");if(!isRoot){this.flushInline()}},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(helper.name+".call("+helper.callParams+")")},invokeAmbiguous:function(name,helperCall){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var helper=this.setupHelper(0,name,helperCall);var helperName=this.lastHelper=this.nameLookup("helpers",name,"helper");var nonHelper=this.nameLookup("depth"+this.lastContext,name,"context");var nextStack=this.nextStack();if(helper.paramsInit){this.pushSource(helper.paramsInit)}this.pushSource("if (helper = "+helperName+") { "+nextStack+" = helper.call("+helper.callParams+"); }");this.pushSource("else { helper = "+nonHelper+"; "+nextStack+" = typeof helper === functionType ? helper.call("+helper.callParams+") : helper; }")},invokePartial:function(name){var params=[this.nameLookup("partials",name,"partial"),"'"+name+"'",this.popStack(),"helpers","partials"];if(this.options.data){params.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+params.join(", ")+")")},assignToHash:function(key){var value=this.popStack(),context,type;if(this.options.stringParams){type=this.popStack();context=this.popStack()}var hash=this.hash;if(context){hash.contexts.push("'"+key+"': "+context)}if(type){hash.types.push("'"+key+"': "+type)}hash.values.push("'"+key+"': ("+value+")")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){var children=environment.children,child,compiler;for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler;var index=this.matchExistingProgram(child);if(index==null){this.context.programs.push("");index=this.context.programs.length;child.index=index;child.name="program"+index;this.context.programs[index]=compiler.compile(child,options,this.context);this.context.environments[index]=child}else{child.index=index;child.name="program"+index}}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child)){return i}}},programExpression:function(guid){this.context.aliases.self="this";if(guid==null){return"self.noop"}var child=this.environment.children[guid],depths=child.depths.list,depth;var programParams=[child.index,child.name,"data"];for(var i=0,l=depths.length;i<l;i++){depth=depths[i];if(depth===1){programParams.push("depth0")}else{programParams.push("depth"+(depth-1))}}return(depths.length===0?"self.program(":"self.programWithDepth(")+programParams.join(", ")+")"},register:function(name,val){this.useRegister(name);this.pushSource(name+" = "+val+";")},useRegister:function(name){if(!this.registers[name]){this.registers[name]=true;this.registers.list.push(name)}},pushStackLiteral:function(item){return this.push(new Literal(item))},pushSource:function(source){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(source){this.source.push(source)}},pushStack:function(item){this.flushInline();var stack=this.incrStack();if(item){this.pushSource(stack+" = "+item+";")}this.compileStack.push(stack);return stack},replaceStack:function(callback){var prefix="",inline=this.isInline(),stack,createdStack,usedLiteral;if(inline){var top=this.popStack(true);if(top instanceof Literal){stack=top.value;usedLiteral=true}else{createdStack=!this.stackSlot;var name=!createdStack?this.topStackName():this.incrStack();prefix="("+this.push(name)+" = "+top+"),";stack=this.topStack()}}else{stack=this.topStack()}var item=callback.call(this,stack);if(inline){if(!usedLiteral){this.popStack()}if(createdStack){this.stackSlot--}this.push("("+prefix+item+")")}else{if(!/^stack/.test(stack)){stack=this.nextStack()}this.pushSource(stack+" = ("+prefix+item+");")}return stack},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal){this.compileStack.push(entry)}else{this.pushStack(entry)}}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal){return item.value}else{if(!inline){if(!this.stackSlot){throw new Exception("Invalid stack pop")}this.stackSlot--}return item}},topStack:function(wrapped){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];if(!wrapped&&item instanceof Literal){return item.value}else{return item}},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(paramSize,name,missingParams){var params=[],paramsInit=this.setupParams(paramSize,params,missingParams);var foundHelper=this.nameLookup("helpers",name,"helper");return{params:params,paramsInit:paramsInit,name:foundHelper,callParams:["depth0"].concat(params).join(", "),helperMissingParams:missingParams&&["depth0",this.quotedString(name)].concat(params).join(", ")}},setupOptions:function(paramSize,params){var options=[],contexts=[],types=[],param,inverse,program;options.push("hash:"+this.popStack());if(this.options.stringParams){options.push("hashTypes:"+this.popStack());options.push("hashContexts:"+this.popStack())}inverse=this.popStack();program=this.popStack();if(program||inverse){if(!program){this.context.aliases.self="this";program="self.noop"}if(!inverse){this.context.aliases.self="this";inverse="self.noop"}options.push("inverse:"+inverse);options.push("fn:"+program)}for(var i=0;i<paramSize;i++){param=this.popStack();params.push(param);if(this.options.stringParams){types.push(this.popStack());contexts.push(this.popStack())}}if(this.options.stringParams){options.push("contexts:["+contexts.join(",")+"]");options.push("types:["+types.join(",")+"]")}if(this.options.data){options.push("data:data")}return options},setupParams:function(paramSize,params,useRegister){var options="{"+this.setupOptions(paramSize,params).join(",")+"}";if(useRegister){this.useRegister("options");params.push("options");return"options="+options}else{params.push(options);return""}}};var reservedWords=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield").split(" ");var compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++){compilerWords[reservedWords[i]]=true}JavaScriptCompiler.isValidJavaScriptVariableName=function(name){if(!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)){return true}return false};__exports__=JavaScriptCompiler;return __exports__}(__module2__,__module5__);var __module0__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var __exports__;var Handlebars=__dependency1__;var AST=__dependency2__;var Parser=__dependency3__.parser;var parse=__dependency3__.parse;var Compiler=__dependency4__.Compiler;var compile=__dependency4__.compile;var precompile=__dependency4__.precompile;var JavaScriptCompiler=__dependency5__;var _create=Handlebars.create;var create=function(){var hb=_create();hb.compile=function(input,options){return compile(input,options,hb)};hb.precompile=function(input,options){return precompile(input,options,hb)};hb.AST=AST;hb.Compiler=Compiler;hb.JavaScriptCompiler=JavaScriptCompiler;hb.Parser=Parser;hb.parse=parse;return hb};Handlebars=create();Handlebars.create=create;__exports__=Handlebars;return __exports__}(__module1__,__module7__,__module8__,__module10__,__module11__);return __module0__}();(function(window,document,exportName,undefined){"use strict";var VENDOR_PREFIXES=["","webkit","moz","MS","ms","o"];var TEST_ELEMENT=document.createElement("div");var TYPE_FUNCTION="function";var round=Math.round;var abs=Math.abs;var now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout)}function invokeArrayArg(arg,fn,context){if(Array.isArray(arg)){each(arg,context[fn],context);return true}return false}function each(obj,iterator,context){var i,len;if(!obj){return}if(obj.forEach){obj.forEach(iterator,context)}else if(obj.length!==undefined){for(i=0,len=obj.length;i<len;i++){iterator.call(context,obj[i],i,obj)}}else{for(i in obj){obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)}}}function extend(dest,src,merge){var keys=Object.keys(src);for(var i=0,len=keys.length;i<len;i++){if(!merge||merge&&dest[keys[i]]===undefined){dest[keys[i]]=src[keys[i]]}}return dest}function merge(dest,src){return extend(dest,src,true)}function inherit(child,base,properties){var baseP=base.prototype,childP;childP=child.prototype=Object.create(baseP);childP.constructor=child;childP._super=baseP;if(properties){extend(childP,properties)}}function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments)}}function boolOrFn(val,args){if(typeof val==TYPE_FUNCTION){return val.apply(args?args[0]||undefined:undefined,args)}return val}function ifUndefined(val1,val2){return val1===undefined?val2:val1}function addEventListeners(element,types,handler){each(splitStr(types),function(type){element.addEventListener(type,handler,false)})}function removeEventListeners(element,types,handler){each(splitStr(types),function(type){element.removeEventListener(type,handler,false)})}function hasParent(node,parent){while(node){if(node==parent){return true}node=node.parentNode}return false}function inStr(str,find){return str.indexOf(find)>-1}function splitStr(str){return str.trim().split(/\s+/g)}function inArray(src,find,findByKey){if(src.indexOf&&!findByKey){return src.indexOf(find)}else{for(var i=0,len=src.length;i<len;i++){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find){return i}}return-1}}function toArray(obj){return Array.prototype.slice.call(obj,0)}function uniqueArray(src,key,sort){var results=[];var values=[];for(var i=0,len=src.length;i<len;i++){var val=key?src[i][key]:src[i];if(inArray(values,val)<0){results.push(src[i])}values[i]=val}if(sort){if(!key){results=results.sort()}else{results=results.sort(function sortUniqueArray(a,b){return a[key]>b[key]})}}return results}function prefixed(obj,property){var prefix,prop;var camelProp=property[0].toUpperCase()+property.slice(1);for(var i=0,len=VENDOR_PREFIXES.length;i<len;i++){prefix=VENDOR_PREFIXES[i];prop=prefix?prefix+camelProp:property;if(prop in obj){return prop}}return undefined}var _uniqueId=1;function uniqueId(){return _uniqueId++}var MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;var SUPPORT_TOUCH="ontouchstart"in window;var SUPPORT_POINTER_EVENTS=prefixed(window,"PointerEvent")!==undefined;var SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent);var INPUT_TYPE_TOUCH="touch";var INPUT_TYPE_PEN="pen";var INPUT_TYPE_MOUSE="mouse";var INPUT_TYPE_KINECT="kinect";var COMPUTE_INTERVAL=25;var INPUT_START=1;var INPUT_MOVE=2;var INPUT_END=4;var INPUT_CANCEL=8;var DIRECTION_NONE=1;var DIRECTION_LEFT=2;var DIRECTION_RIGHT=4;var DIRECTION_UP=8;var DIRECTION_DOWN=16;var DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT;var DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN;var DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL;var PROPS_XY=["x","y"];var PROPS_CLIENT_XY=["clientX","clientY"];function Input(manager,callback){var self=this;this.manager=manager;this.callback=callback;this.element=manager.element;this.target=manager.options.inputTarget;this.domHandler=function(ev){if(boolOrFn(manager.options.enable,[manager])){self.handler(ev)}};this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&addEventListeners(window,this.evWin,this.domHandler)}Input.prototype={handler:function(){},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&removeEventListeners(window,this.evWin,this.domHandler)}};function createInputInstance(manager){var Type;if(SUPPORT_POINTER_EVENTS){Type=PointerEventInput}else if(SUPPORT_ONLY_TOUCH){Type=TouchInput}else if(!SUPPORT_TOUCH){Type=MouseInput}else{Type=TouchMouseInput}return new Type(manager,inputHandler)}function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length;var changedPointersLen=input.changedPointers.length;var isFirst=eventType&INPUT_START&&pointersLen-changedPointersLen===0;var isFinal=eventType&(INPUT_END|INPUT_CANCEL)&&pointersLen-changedPointersLen===0;input.isFirst=!!isFirst;input.isFinal=!!isFinal;if(isFirst){manager.session={}}input.eventType=eventType;computeInputData(manager,input);manager.emit("hammer.input",input);manager.recognize(input);manager.session.prevInput=input}function computeInputData(manager,input){var session=manager.session;var pointers=input.pointers;var pointersLength=pointers.length;if(!session.firstInput){session.firstInput=simpleCloneInputData(input)}if(pointersLength>1&&!session.firstMultiple){session.firstMultiple=simpleCloneInputData(input)}else if(pointersLength===1){session.firstMultiple=false}var firstInput=session.firstInput;var firstMultiple=session.firstMultiple;var offsetCenter=firstMultiple?firstMultiple.center:firstInput.center;var center=input.center=getCenter(pointers);input.timeStamp=now();input.deltaTime=input.timeStamp-firstInput.timeStamp;input.angle=getAngle(offsetCenter,center);input.distance=getDistance(offsetCenter,center);computeDeltaXY(session,input);input.offsetDirection=getDirection(input.deltaX,input.deltaY);input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1;input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0;computeIntervalInputData(session,input);var target=manager.element;if(hasParent(input.srcEvent.target,target)){target=input.srcEvent.target}input.target=target}function computeDeltaXY(session,input){var center=input.center;var offset=session.offsetDelta||{};var prevDelta=session.prevDelta||{};var prevInput=session.prevInput||{};if(input.eventType===INPUT_START||prevInput.eventType===INPUT_END){prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0};offset=session.offsetDelta={x:center.x,y:center.y}}input.deltaX=prevDelta.x+(center.x-offset.x);input.deltaY=prevDelta.y+(center.y-offset.y)}function computeIntervalInputData(session,input){var last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp,velocity,velocityX,velocityY,direction;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=last.deltaX-input.deltaX;var deltaY=last.deltaY-input.deltaY;var v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x;velocityY=v.y;velocity=abs(v.x)>abs(v.y)?v.x:v.y;direction=getDirection(deltaX,deltaY);session.lastInterval=input}else{velocity=last.velocity;velocityX=last.velocityX;velocityY=last.velocityY;direction=last.direction}input.velocity=velocity;input.velocityX=velocityX;input.velocityY=velocityY;input.direction=direction}function simpleCloneInputData(input){var pointers=[];for(var i=0;i<input.pointers.length;i++){pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)}}return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY}}function getCenter(pointers){var pointersLength=pointers.length;if(pointersLength===1){return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)}}var x=0,y=0;for(var i=0;i<pointersLength;i++){x+=pointers[i].clientX;y+=pointers[i].clientY}return{x:round(x/pointersLength),y:round(y/pointersLength)}}function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0}}function getDirection(x,y){if(x===y){return DIRECTION_NONE}if(abs(x)>=abs(y)){return x>0?DIRECTION_LEFT:DIRECTION_RIGHT}return y>0?DIRECTION_UP:DIRECTION_DOWN}function getDistance(p1,p2,props){if(!props){props=PROPS_XY}var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y)}function getAngle(p1,p2,props){if(!props){props=PROPS_XY}var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.atan2(y,x)*180/Math.PI}function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)-getAngle(start[1],start[0],PROPS_CLIENT_XY)}function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY)}var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};var MOUSE_ELEMENT_EVENTS="mousedown";var MOUSE_WINDOW_EVENTS="mousemove mouseup";function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS;this.evWin=MOUSE_WINDOW_EVENTS;this.allow=true;this.pressed=false;Input.apply(this,arguments)}inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];if(eventType&INPUT_START&&ev.button===0){this.pressed=true}if(eventType&INPUT_MOVE&&ev.which!==1){eventType=INPUT_END}if(!this.pressed||!this.allow){return}if(eventType&INPUT_END){this.pressed=false}this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev})}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL};var IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT};var POINTER_ELEMENT_EVENTS="pointerdown";var POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";if(window.MSPointerEvent){POINTER_ELEMENT_EVENTS="MSPointerDown";POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel"}function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS;this.evWin=POINTER_WINDOW_EVENTS;Input.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store;var removePointer=false;var eventTypeNormalized=ev.type.toLowerCase().replace("ms","");var eventType=POINTER_INPUT_MAP[eventTypeNormalized];var pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType;var isTouch=pointerType==INPUT_TYPE_TOUCH;if(eventType&INPUT_START&&(ev.button===0||isTouch)){store.push(ev)}else if(eventType&(INPUT_END|INPUT_CANCEL)){removePointer=true}var storeIndex=inArray(store,ev.pointerId,"pointerId");if(storeIndex<0){return}store[storeIndex]=ev;this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev});if(removePointer){store.splice(storeIndex,1)}}});var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var TOUCH_TARGET_EVENTS="touchstart touchmove touchend touchcancel";function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS;this.targetIds={};Input.apply(this,arguments)}inherit(TouchInput,Input,{handler:function TEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type];var touches=getTouches.call(this,ev,type);if(!touches){return}this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev})}});function getTouches(ev,type){var allTouches=toArray(ev.touches);var targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&allTouches.length===1){targetIds[allTouches[0].identifier]=true;return[allTouches,allTouches]}var i,len;var targetTouches=toArray(ev.targetTouches);var changedTouches=toArray(ev.changedTouches);var changedTargetTouches=[];if(type===INPUT_START){for(i=0,len=targetTouches.length;i<len;i++){targetIds[targetTouches[i].identifier]=true}}for(i=0,len=changedTouches.length;i<len;i++){if(targetIds[changedTouches[i].identifier]){changedTargetTouches.push(changedTouches[i])}if(type&(INPUT_END|INPUT_CANCEL)){delete targetIds[changedTouches[i].identifier]}}if(!changedTargetTouches.length){return}return[uniqueArray(targetTouches.concat(changedTargetTouches),"identifier",true),changedTargetTouches]}function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler);this.mouse=new MouseInput(this.manager,handler)}inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch=inputData.pointerType==INPUT_TYPE_TOUCH,isMouse=inputData.pointerType==INPUT_TYPE_MOUSE;if(isTouch){this.mouse.allow=false}else if(isMouse&&!this.mouse.allow){return}if(inputEvent&(INPUT_END|INPUT_CANCEL)){this.mouse.allow=true}this.callback(manager,inputEvent,inputData)},destroy:function destroy(){this.touch.destroy();this.mouse.destroy()}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction");var NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined;var TOUCH_ACTION_COMPUTE="compute";var TOUCH_ACTION_AUTO="auto";var TOUCH_ACTION_MANIPULATION="manipulation";var TOUCH_ACTION_NONE="none";var TOUCH_ACTION_PAN_X="pan-x";var TOUCH_ACTION_PAN_Y="pan-y";function TouchAction(manager,value){this.manager=manager;this.set(value)}TouchAction.prototype={set:function(value){if(value==TOUCH_ACTION_COMPUTE){value=this.compute()}if(NATIVE_TOUCH_ACTION){this.manager.element.style[PREFIXED_TOUCH_ACTION]=value}this.actions=value.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var actions=[];each(this.manager.recognizers,function(recognizer){if(boolOrFn(recognizer.options.enable,[recognizer])){actions=actions.concat(recognizer.getTouchAction())}});return cleanTouchActions(actions.join(" "))},preventDefaults:function(input){if(NATIVE_TOUCH_ACTION){return}var srcEvent=input.srcEvent;var direction=input.offsetDirection;if(this.manager.session.prevented){srcEvent.preventDefault();return}var actions=this.actions;var hasNone=inStr(actions,TOUCH_ACTION_NONE);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);if(hasNone||hasPanY&&hasPanX||hasPanY&&direction&DIRECTION_HORIZONTAL||hasPanX&&direction&DIRECTION_VERTICAL){return this.preventSrc(srcEvent)}},preventSrc:function(srcEvent){this.manager.session.prevented=true;srcEvent.preventDefault()}};function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE)){return TOUCH_ACTION_NONE}var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY){return TOUCH_ACTION_PAN_X+" "+TOUCH_ACTION_PAN_Y}if(hasPanX||hasPanY){return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y}if(inStr(actions,TOUCH_ACTION_MANIPULATION)){return TOUCH_ACTION_MANIPULATION}return TOUCH_ACTION_AUTO}var STATE_POSSIBLE=1;var STATE_BEGAN=2;var STATE_CHANGED=4;var STATE_ENDED=8;var STATE_RECOGNIZED=STATE_ENDED;var STATE_CANCELLED=16;var STATE_FAILED=32;function Recognizer(options){this.id=uniqueId();this.manager=null;this.options=merge(options||{},this.defaults);this.options.enable=ifUndefined(this.options.enable,true);this.state=STATE_POSSIBLE;this.simultaneous={};this.requireFail=[]}Recognizer.prototype={defaults:{},set:function(options){extend(this.options,options);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"recognizeWith",this)){return this}var simultaneous=this.simultaneous;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(!simultaneous[otherRecognizer.id]){simultaneous[otherRecognizer.id]=otherRecognizer;otherRecognizer.recognizeWith(this)}return this},dropRecognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRecognizeWith",this)){return this}otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);delete this.simultaneous[otherRecognizer.id];return this},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"requireFailure",this)){return this}var requireFail=this.requireFail;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(inArray(requireFail,otherRecognizer)===-1){requireFail.push(otherRecognizer);otherRecognizer.requireFailure(this)}return this},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRequireFailure",this)){return this}otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);if(index>-1){this.requireFail.splice(index,1)}return this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id]},emit:function(input){var self=this;var state=this.state;function emit(withState){self.manager.emit(self.options.event+(withState?stateStr(state):""),input)}if(state<STATE_ENDED){emit(true)}emit();if(state>=STATE_ENDED){emit(true)}},tryEmit:function(input){if(this.canEmit()){return this.emit(input)}this.state=STATE_FAILED},canEmit:function(){for(var i=0;i<this.requireFail.length;i++){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE))){return false}}return true},recognize:function(inputData){var inputDataClone=extend({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone])){this.reset();this.state=STATE_FAILED;return}if(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)){this.state=STATE_POSSIBLE}this.state=this.process(inputDataClone);if(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)){this.tryEmit(inputDataClone)}},process:function(inputData){},getTouchAction:function(){},reset:function(){}};function stateStr(state){if(state&STATE_CANCELLED){return"cancel"}else if(state&STATE_ENDED){return"end"}else if(state&STATE_CHANGED){return"move"}else if(state&STATE_BEGAN){return"start"}return""}function directionStr(direction){if(direction==DIRECTION_DOWN){return"down"}else if(direction==DIRECTION_UP){return"up"}else if(direction==DIRECTION_LEFT){return"left"}else if(direction==DIRECTION_RIGHT){return"right"}return""}function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;if(manager){return manager.get(otherRecognizer)}return otherRecognizer}function AttrRecognizer(){Recognizer.apply(this,arguments)}inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return optionPointers===0||input.pointers.length===optionPointers},process:function(input){var state=this.state;var eventType=input.eventType;var isRecognized=state&(STATE_BEGAN|STATE_CHANGED);var isValid=this.attrTest(input);if(isRecognized&&(eventType&INPUT_CANCEL||!isValid)){return state|STATE_CANCELLED}else if(isRecognized||isValid){if(eventType&INPUT_END){return state|STATE_ENDED}else if(!(state&STATE_BEGAN)){return STATE_BEGAN}return state|STATE_CHANGED}return STATE_FAILED}});function PanRecognizer(){AttrRecognizer.apply(this,arguments);this.pX=null;this.pY=null}inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction;if(direction===DIRECTION_ALL){return[TOUCH_ACTION_NONE]}var actions=[];if(direction&DIRECTION_HORIZONTAL){actions.push(TOUCH_ACTION_PAN_Y)}if(direction&DIRECTION_VERTICAL){actions.push(TOUCH_ACTION_PAN_X)}return actions},directionTest:function(input){var options=this.options;var hasMoved=true;var distance=input.distance;var direction=input.direction;var x=input.deltaX;var y=input.deltaY;if(!(direction&options.direction)){if(options.direction&DIRECTION_HORIZONTAL){direction=x===0?DIRECTION_NONE:x<0?DIRECTION_LEFT:DIRECTION_RIGHT;hasMoved=x!=this.pX;distance=Math.abs(input.deltaX)}else{direction=y===0?DIRECTION_NONE:y<0?DIRECTION_UP:DIRECTION_DOWN;hasMoved=y!=this.pY;distance=Math.abs(input.deltaY)}}input.direction=direction;return hasMoved&&distance>options.threshold&&direction&options.direction},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||!(this.state&STATE_BEGAN)&&this.directionTest(input))},emit:function(input){this.pX=input.deltaX;this.pY=input.deltaY;var direction=directionStr(input.direction);if(direction){this.manager.emit(this.options.event+direction,input)}this._super.emit.call(this,input)}});function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN)},emit:function(input){this._super.emit.call(this,input);if(input.scale!==1){var inOut=input.scale<1?"in":"out";this.manager.emit(this.options.event+inOut,input)}}});function PressRecognizer(){Recognizer.apply(this,arguments);this._timer=null;this._input=null}inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[TOUCH_ACTION_AUTO]},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTime=input.deltaTime>options.time;this._input=input;if(!validMovement||!validPointers||input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime){this.reset()}else if(input.eventType&INPUT_START){this.reset();this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit()},options.time,this)}else if(input.eventType&INPUT_END){return STATE_RECOGNIZED}return STATE_FAILED},reset:function(){clearTimeout(this._timer)},emit:function(input){if(this.state!==STATE_RECOGNIZED){return}if(input&&input.eventType&INPUT_END){this.manager.emit(this.options.event+"up",input)}else{this._input.timeStamp=now();this.manager.emit(this.options.event,this._input)}}});function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN)}});function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(input){var direction=this.options.direction;var velocity;if(direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)){velocity=input.velocity}else if(direction&DIRECTION_HORIZONTAL){velocity=input.velocityX}else if(direction&DIRECTION_VERTICAL){velocity=input.velocityY}return this._super.attrTest.call(this,input)&&direction&input.direction&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END},emit:function(input){var direction=directionStr(input.direction);if(direction){this.manager.emit(this.options.event+direction,input)}this.manager.emit(this.options.event,input)}});function TapRecognizer(){Recognizer.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0}inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION]},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTouchTime=input.deltaTime<options.time;this.reset();if(input.eventType&INPUT_START&&this.count===0){return this.failTimeout()}if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END){return this.failTimeout()}var validInterval=this.pTime?input.timeStamp-this.pTime<options.interval:true;var validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp;this.pCenter=input.center;if(!validMultiTap||!validInterval){this.count=1}else{this.count+=1}this._input=input;var tapCount=this.count%options.taps;if(tapCount===0){if(!this.hasRequireFailures()){return STATE_RECOGNIZED}else{this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit()},options.interval,this);return STATE_BEGAN}}}return STATE_FAILED},failTimeout:function(){this._timer=setTimeoutContext(function(){this.state=STATE_FAILED},this.options.interval,this);return STATE_FAILED},reset:function(){clearTimeout(this._timer)},emit:function(){if(this.state==STATE_RECOGNIZED){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input)}}});function Hammer(element,options){options=options||{};options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset);return new Manager(element,options)}Hammer.VERSION="2.0.2";Hammer.defaults={domEvents:false,touchAction:TOUCH_ACTION_COMPUTE,inputTarget:null,enable:true,preset:[[RotateRecognizer,{enable:false}],[PinchRecognizer,{enable:false},["rotate"]],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var STOP=1;var FORCED_STOP=2;function Manager(element,options){options=options||{};this.options=merge(options,Hammer.defaults);this.options.inputTarget=this.options.inputTarget||element;this.handlers={};this.session={};this.recognizers=[];this.element=element;this.input=createInputInstance(this);this.touchAction=new TouchAction(this,this.options.touchAction);toggleCssProps(this,true);each(options.recognizers,function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]);item[3]&&recognizer.requireFailure(item[2])},this)}Manager.prototype={set:function(options){extend(this.options,options);return this},stop:function(force){this.session.stopped=force?FORCED_STOP:STOP},recognize:function(inputData){var session=this.session;if(session.stopped){return}this.touchAction.preventDefaults(inputData);var recognizer;var recognizers=this.recognizers;var curRecognizer=session.curRecognizer;if(!curRecognizer||curRecognizer&&curRecognizer.state&STATE_RECOGNIZED){curRecognizer=session.curRecognizer=null}for(var i=0,len=recognizers.length;i<len;i++){recognizer=recognizers[i];if(session.stopped!==FORCED_STOP&&(!curRecognizer||recognizer==curRecognizer||recognizer.canRecognizeWith(curRecognizer))){recognizer.recognize(inputData)}else{recognizer.reset()}if(!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)){curRecognizer=session.curRecognizer=recognizer}}},get:function(recognizer){if(recognizer instanceof Recognizer){return recognizer}var recognizers=this.recognizers;for(var i=0;i<recognizers.length;i++){if(recognizers[i].options.event==recognizer){return recognizers[i]}}return null},add:function(recognizer){if(invokeArrayArg(recognizer,"add",this)){return this}var existing=this.get(recognizer.options.event);if(existing){this.remove(existing)}this.recognizers.push(recognizer);recognizer.manager=this;this.touchAction.update();return recognizer},remove:function(recognizer){if(invokeArrayArg(recognizer,"remove",this)){return this}var recognizers=this.recognizers;recognizer=this.get(recognizer);recognizers.splice(inArray(recognizers,recognizer),1);this.touchAction.update();return this},on:function(events,handler){var handlers=this.handlers;each(splitStr(events),function(event){handlers[event]=handlers[event]||[];handlers[event].push(handler)});return this},off:function(events,handler){var handlers=this.handlers;each(splitStr(events),function(event){if(!handler){delete handlers[event]}else{handlers[event].splice(inArray(handlers[event],handler),1)}});return this},emit:function(event,data){if(this.options.domEvents){triggerDomEvent(event,data)}var handlers=this.handlers[event]&&this.handlers[event].slice();if(!handlers||!handlers.length){return}data.type=event;data.preventDefault=function(){data.srcEvent.preventDefault()};for(var i=0,len=handlers.length;i<len;i++){handlers[i](data)}},destroy:function(){this.element&&toggleCssProps(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null}};function toggleCssProps(manager,add){var element=manager.element;each(manager.options.cssProps,function(value,name){element.style[prefixed(element.style,name)]=add?value:""})}function triggerDomEvent(event,data){var gestureEvent=document.createEvent("Event");gestureEvent.initEvent(event,true,true);gestureEvent.gesture=data;data.target.dispatchEvent(gestureEvent)}extend(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,inherit:inherit,bindFn:bindFn,prefixed:prefixed});if(false){define(function(){return Hammer})}else if(typeof module!="undefined"&&module.exports){module.exports=Hammer}else{window[exportName]=Hammer}})(window,document,"Hammer");jQuery.cookie=function(key,value,options){if(arguments.length>1&&String(value)!=="[object Object]"){options=jQuery.extend({},options);if(value===null||value===undefined){options.expires=-1}if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}value=String(value);return document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}options=value||{};var result,decode=options.raw?function(s){return s}:decodeURIComponent;return(result=new RegExp("(?:^|; )"+encodeURIComponent(key)+"=([^;]*)").exec(document.cookie))?decode(result[1]):null};(function(){var namespace;if(typeof module!=="undefined"){namespace=module.exports=strftime}else{namespace=function(){return this||(1,eval)("this")}()}function words(s){return(s||"").split(" ")}var DefaultLocale={days:words("Sunday Monday Tuesday Wednesday Thursday Friday Saturday"),shortDays:words("Sun Mon Tue Wed Thu Fri Sat"),months:words("January February March April May June July August September October November December"),shortMonths:words("Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"),AM:"AM",PM:"PM",am:"am",pm:"pm"};namespace.strftime=strftime;function strftime(fmt,d,locale){return _strftime(fmt,d,locale)}namespace.strftimeTZ=strftime.strftimeTZ=strftimeTZ;function strftimeTZ(fmt,d,locale,timezone){if((typeof locale=="number"||typeof locale=="string")&&timezone==null){timezone=locale;locale=undefined}return _strftime(fmt,d,locale,{timezone:timezone})}namespace.strftimeUTC=strftime.strftimeUTC=strftimeUTC;function strftimeUTC(fmt,d,locale){return _strftime(fmt,d,locale,{utc:true})}namespace.localizedStrftime=strftime.localizedStrftime=localizedStrftime;function localizedStrftime(locale){return function(fmt,d,options){return strftime(fmt,d,locale,options)}}function _strftime(fmt,d,locale,options){options=options||{};if(d&&!quacksLikeDate(d)){locale=d;d=undefined}d=d||new Date;locale=locale||DefaultLocale;locale.formats=locale.formats||{};var timestamp=d.getTime();var tz=options.timezone;var tzType=typeof tz;if(options.utc||tzType=="number"||tzType=="string"){d=dateToUTC(d)}if(tz){if(tzType=="string"){var sign=tz[0]=="-"?-1:1;var hours=parseInt(tz.slice(1,3),10);var mins=parseInt(tz.slice(3,5),10);tz=sign*(60*hours+mins)}if(tzType){d=new Date(d.getTime()+tz*6e4)}}return fmt.replace(/%([-_0]?.)/g,function(_,c){var mod,padding;if(c.length==2){mod=c[0];if(mod=="-"){padding=""}else if(mod=="_"){padding=" "}else if(mod=="0"){padding="0"}else{return _}c=c[1]}switch(c){case"A":return locale.days[d.getDay()];case"a":return locale.shortDays[d.getDay()];case"B":return locale.months[d.getMonth()];case"b":return locale.shortMonths[d.getMonth()];case"C":return pad(Math.floor(d.getFullYear()/100),padding);case"D":return _strftime(locale.formats.D||"%m/%d/%y",d,locale);case"d":return pad(d.getDate(),padding);case"e":return pad(d.getDate(),padding==null?" ":padding);case"F":return _strftime(locale.formats.F||"%Y-%m-%d",d,locale);case"H":return pad(d.getHours(),padding);case"h":return locale.shortMonths[d.getMonth()];case"I":return pad(hours12(d),padding);case"j":var y=new Date(d.getFullYear(),0,1);var day=Math.ceil((d.getTime()-y.getTime())/(1e3*60*60*24));return pad(day,3);case"k":return pad(d.getHours(),padding==null?" ":padding);case"L":return pad(Math.floor(timestamp%1e3),3);case"l":return pad(hours12(d),padding==null?" ":padding);case"M":return pad(d.getMinutes(),padding);case"m":return pad(d.getMonth()+1,padding);case"n":return"\n";case"o":return String(d.getDate())+ordinal(d.getDate());case"P":return d.getHours()<12?locale.am:locale.pm;case"p":return d.getHours()<12?locale.AM:locale.PM;case"R":return _strftime(locale.formats.R||"%H:%M",d,locale);case"r":return _strftime(locale.formats.r||"%I:%M:%S %p",d,locale);case"S":return pad(d.getSeconds(),padding);case"s":return Math.floor(timestamp/1e3);case"T":return _strftime(locale.formats.T||"%H:%M:%S",d,locale);case"t":return"\t";case"U":return pad(weekNumber(d,"sunday"),padding);case"u":var day=d.getDay();return day==0?7:day;case"v":return _strftime(locale.formats.v||"%e-%b-%Y",d,locale);case"W":return pad(weekNumber(d,"monday"),padding);case"w":return d.getDay();case"Y":return d.getFullYear();case"y":var y=String(d.getFullYear());return y.slice(y.length-2);case"Z":if(options.utc){return"GMT"}else{var tzString=d.toString().match(/\(([\w\s]+)\)/);return tzString&&tzString[1]||""}case"z":if(options.utc){return"+0000"}else{var off=typeof tz=="number"?tz:-d.getTimezoneOffset();return(off<0?"-":"+")+pad(Math.floor(Math.abs(off)/60))+pad(Math.abs(off)%60)}default:return c}})}function dateToUTC(d){var msDelta=(d.getTimezoneOffset()||0)*6e4;return new Date(d.getTime()+msDelta)}var RequiredDateMethods=["getTime","getTimezoneOffset","getDay","getDate","getMonth","getFullYear","getYear","getHours","getMinutes","getSeconds"];function quacksLikeDate(x){var i=0,n=RequiredDateMethods.length;for(i=0;i<n;++i){if(typeof x[RequiredDateMethods[i]]!="function"){return false}}return true}function pad(n,padding,length){if(typeof padding==="number"){length=padding;padding="0"}if(padding==null){padding="0"}length=length||2;var s=String(n);if(padding){while(s.length<length)s=padding+s}return s}function hours12(d){var hour=d.getHours();if(hour==0)hour=12;else if(hour>12)hour-=12;return hour}function ordinal(n){var i=n%10,ii=n%100;if(ii>=11&&ii<=13||i===0||i>=4){return"th"}switch(i){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function weekNumber(d,firstWeekday){firstWeekday=firstWeekday||"sunday";var wday=d.getDay();if(firstWeekday=="monday"){if(wday==0)wday=6;else wday--}var firstDayOfYear=new Date(d.getFullYear(),0,1),yday=(d-firstDayOfYear)/864e5,weekNum=(yday+7-wday)/7;return Math.floor(weekNum)}})();(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(typeof module==="object"&&module.exports){module.exports=factory(require("jquery"))}else{factory(jQuery)}})(function($){var BarRating=function(){function BarRating(){var self=this;var wrapElement=function(){var classes=["br-wrapper"];if(self.options.theme!==""){classes.push("br-theme-"+self.options.theme)}self.$elem.wrap($("<div />",{class:classes.join(" ")}))};var unwrapElement=function(){self.$elem.unwrap()};var findOption=function(value){if($.isNumeric(value)){value=Math.floor(value)}return $('option[value="'+value+'"]',self.$elem)};var getInitialOption=function(){var initialRating=self.options.initialRating;if(!initialRating){return $("option:selected",self.$elem)}return findOption(initialRating)};var getEmptyOption=function(){var $emptyOpt=self.$elem.find('option[value="'+self.options.emptyValue+'"]');if(!$emptyOpt.length&&self.options.allowEmpty){$emptyOpt=$("<option />",{value:self.options.emptyValue});return $emptyOpt.prependTo(self.$elem)}return $emptyOpt};var getData=function(key){var data=self.$elem.data("barrating");if(typeof key!=="undefined"){return data[key]}return data};var setData=function(key,value){if(value!==null&&typeof value==="object"){self.$elem.data("barrating",value)}else{self.$elem.data("barrating")[key]=value}};var saveDataOnElement=function(){var $opt=getInitialOption();var $emptyOpt=getEmptyOption();var value=$opt.val();var text=$opt.data("html")?$opt.data("html"):$opt.text();var allowEmpty=self.options.allowEmpty!==null?self.options.allowEmpty:!!$emptyOpt.length;var emptyValue=$emptyOpt.length?$emptyOpt.val():null;var emptyText=$emptyOpt.length?$emptyOpt.text():null;setData(null,{userOptions:self.options,ratingValue:value,ratingText:text,originalRatingValue:value,originalRatingText:text,allowEmpty:allowEmpty,emptyRatingValue:emptyValue,emptyRatingText:emptyText,readOnly:self.options.readonly,ratingMade:false})};var removeDataOnElement=function(){self.$elem.removeData("barrating")};var ratingText=function(){return getData("ratingText")};var ratingValue=function(){return getData("ratingValue")};var buildWidget=function(){var $w=$("<div />",{class:"br-widget"});self.$elem.find("option").each(function(){var val,text,html,$a;val=$(this).val();if(val!==getData("emptyRatingValue")){text=$(this).text();html=$(this).data("html");if(html){text=html}$a=$("<a />",{href:"#","data-rating-value":val,"data-rating-text":text,html:self.options.showValues?text:""});$w.append($a)}});if(self.options.showSelectedRating){$w.append($("<div />",{text:"",class:"br-current-rating"}))}if(self.options.reverse){$w.addClass("br-reverse")}if(self.options.readonly){$w.addClass("br-readonly")}return $w};var nextAllorPreviousAll=function(){if(getData("userOptions").reverse){return"nextAll"}else{return"prevAll"}};var setSelectFieldValue=function(value){findOption(value).prop("selected",true);if(getData("userOptions").triggerChange){self.$elem.trigger("change")}};var resetSelectField=function(){$("option",self.$elem).prop("selected",function(){return this.defaultSelected});if(getData("userOptions").triggerChange){self.$elem.trigger("change")}};var showSelectedRating=function(text){text=text?text:ratingText();if(text==getData("emptyRatingText")){text=""}if(self.options.showSelectedRating){self.$elem.parent().find(".br-current-rating").text(text)}};var fraction=function(value){return Math.round(Math.floor(value*10)/10%1*100)};var resetStyle=function(){self.$widget.find("a").removeClass(function(index,classes){return(classes.match(/(^|\s)br-\S+/g)||[]).join(" ")})};var applyStyle=function(){var $a=self.$widget.find('a[data-rating-value="'+ratingValue()+'"]');var initialRating=getData("userOptions").initialRating;var baseValue=$.isNumeric(ratingValue())?ratingValue():0;var f=fraction(initialRating);var $all,$fractional;resetStyle();$a.addClass("br-selected br-current")[nextAllorPreviousAll()]().addClass("br-selected");if(!getData("ratingMade")&&$.isNumeric(initialRating)){if(initialRating<=baseValue||!f){return}$all=self.$widget.find("a");$fractional=$a.length?$a[getData("userOptions").reverse?"prev":"next"]():$all[getData("userOptions").reverse?"last":"first"]();$fractional.addClass("br-fractional");$fractional.addClass("br-fractional-"+f)}};var isDeselectable=function($element){if(!getData("allowEmpty")||!getData("userOptions").deselectable){return false}return ratingValue()==$element.attr("data-rating-value")};var attachClickHandler=function($elements){$elements.on("click.barrating",function(event){var $a=$(this),options=getData("userOptions"),value,text;event.preventDefault();value=$a.attr("data-rating-value");text=$a.attr("data-rating-text");if(isDeselectable($a)){value=getData("emptyRatingValue");text=getData("emptyRatingText")}setData("ratingValue",value);setData("ratingText",text);setData("ratingMade",true);setSelectFieldValue(value);showSelectedRating(text);applyStyle();options.onSelect.call(self,ratingValue(),ratingText(),event);return false})};var attachMouseEnterHandler=function($elements){$elements.on("mouseenter.barrating",function(){var $a=$(this);resetStyle();$a.addClass("br-active")[nextAllorPreviousAll()]().addClass("br-active");showSelectedRating($a.attr("data-rating-text"))})};var attachMouseLeaveHandler=function($elements){self.$widget.on("mouseleave.barrating blur.barrating",function(){showSelectedRating();applyStyle()})};var fastClicks=function($elements){$elements.on("touchstart.barrating",function(event){event.preventDefault();event.stopPropagation();$(this).trigger("click")})};var disableClicks=function($elements){$elements.on("click.barrating",function(event){event.preventDefault()})};var attachHandlers=function($elements){attachClickHandler($elements);if(self.options.hoverState){attachMouseEnterHandler($elements);attachMouseLeaveHandler($elements)}};var detachHandlers=function($elements){$elements.off(".barrating")};var setupHandlers=function(readonly){var $elements=self.$widget.find("a");if(getData("userOptions").fastClicks){fastClicks($elements)}if(readonly){detachHandlers($elements);disableClicks($elements)}else{attachHandlers($elements)}};this.show=function(){if(getData())return;wrapElement();saveDataOnElement();self.$widget=buildWidget();self.$widget.insertAfter(self.$elem);applyStyle();showSelectedRating();setupHandlers(self.options.readonly);self.$elem.hide()};this.readonly=function(state){if(typeof state!=="boolean"||getData("readOnly")==state)return;setupHandlers(state);setData("readOnly",state);self.$widget.toggleClass("br-readonly")};this.set=function(value){var options=getData("userOptions");if(self.$elem.find('option[value="'+value+'"]').length===0)return;setData("ratingValue",value);setData("ratingText",self.$elem.find('option[value="'+value+'"]').text());setData("ratingMade",true);setSelectFieldValue(ratingValue());showSelectedRating(ratingText());applyStyle();if(!options.silent){options.onSelect.call(this,ratingValue(),ratingText())}};this.clear=function(){var options=getData("userOptions");setData("ratingValue",getData("originalRatingValue"));setData("ratingText",getData("originalRatingText"));setData("ratingMade",false);resetSelectField();showSelectedRating(ratingText());applyStyle();options.onClear.call(this,ratingValue(),ratingText())};this.destroy=function(){var value=ratingValue();var text=ratingText();var options=getData("userOptions");detachHandlers(self.$widget.find("a"));self.$widget.remove();removeDataOnElement();unwrapElement();self.$elem.show();options.onDestroy.call(this,value,text)}}BarRating.prototype.init=function(options,elem){this.$elem=$(elem);this.options=$.extend({},$.fn.barrating.defaults,options);return this.options};return BarRating}();$.fn.barrating=function(method,options){return this.each(function(){var plugin=new BarRating;if(!$(this).is("select")){$.error("Sorry, this plugin only works with select fields.")}if(plugin.hasOwnProperty(method)){plugin.init(options,this);if(method==="show"){return plugin.show(options)}else{if(plugin.$elem.data("barrating")){plugin.$widget=$(this).next(".br-widget");return plugin[method](options)}}}else if(typeof method==="object"||!method){options=method;plugin.init(options,this);return plugin.show()}else{$.error("Method "+method+" does not exist on jQuery.barrating")}})};$.fn.barrating.defaults={theme:"",initialRating:null,allowEmpty:null,emptyValue:"",showValues:false,showSelectedRating:true,deselectable:true,reverse:false,readonly:false,fastClicks:true,hoverState:true,silent:false,triggerChange:true,onSelect:function(value,text,event){},onClear:function(value,text){},onDestroy:function(value,text){}};$.fn.barrating.BarRating=BarRating});+function($){"use strict";var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",element,options)};Tooltip.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false};Tooltip.prototype.init=function(type,element,options){this.enabled=true;this.type=type;this.$element=$(element);this.options=this.getOptions(options);var triggers=this.options.trigger.split(" ");for(var i=triggers.length;i--;){var trigger=triggers[i];if(trigger=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!="manual"){var eventIn=trigger=="hover"?"mouseenter":"focusin";var eventOut=trigger=="hover"?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS};Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options);if(options.delay&&typeof options.delay=="number"){options.delay={show:options.delay,hide:options.delay}}return options};Tooltip.prototype.getDelegateOptions=function(){var options={};var defaults=this.getDefaults();this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value});return options};Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(self.timeout);self.hoverState="in";if(!self.options.delay||!self.options.delay.show)return self.show();self.timeout=setTimeout(function(){if(self.hoverState=="in")self.show()},self.options.delay.show)};Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(self.timeout);self.hoverState="out";if(!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)};Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);if(e.isDefaultPrevented())return;var that=this;var $tip=this.tip();this.setContent();if(this.options.animation)$tip.addClass("fade");var placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var autoToken=/\s?auto?\s?/i;var autoPlace=autoToken.test(placement);if(autoPlace)placement=placement.replace(autoToken,"")||"top";$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var $parent=this.$element.parent();var orgPlacement=placement;var docScroll=document.documentElement.scrollTop||document.body.scrollTop;var parentWidth=this.options.container=="body"?window.innerWidth:$parent.outerWidth();var parentHeight=this.options.container=="body"?window.innerHeight:$parent.outerHeight();var parentLeft=this.options.container=="body"?0:$parent.offset().left;placement=placement=="bottom"&&pos.top+pos.height+actualHeight-docScroll>parentHeight?"top":placement=="top"&&pos.top-docScroll-actualHeight<0?"bottom":placement=="right"&&pos.right+actualWidth>parentWidth?"left":placement=="left"&&pos.left-actualWidth<parentLeft?"right":placement;$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);this.hoverState=null;var complete=function(){that.$element.trigger("shown.bs."+that.type)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete()}};Tooltip.prototype.applyPlacement=function(offset,placement){var replace;var $tip=this.tip();var width=$tip[0].offsetWidth;var height=$tip[0].offsetHeight;var marginTop=parseInt($tip.css("margin-top"),10);var marginLeft=parseInt($tip.css("margin-left"),10);if(isNaN(marginTop))marginTop=0;if(isNaN(marginLeft))marginLeft=0;offset.top=offset.top+marginTop;offset.left=offset.left+marginLeft;$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0);$tip.addClass("in");var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){replace=true;offset.top=offset.top+height-actualHeight}if(/bottom|top/.test(placement)){var delta=0;if(offset.left<0){delta=offset.left*-2;offset.left=0;$tip.offset(offset);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight}this.replaceArrow(delta-width+actualWidth,actualWidth,"left")}else{this.replaceArrow(actualHeight-height,actualHeight,"top")}if(replace)$tip.offset(offset)};Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")};Tooltip.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")};Tooltip.prototype.hide=function(){var that=this;var $tip=this.tip();var e=$.Event("hide.bs."+this.type);function complete(){if(that.hoverState!="in")$tip.detach();that.$element.trigger("hidden.bs."+that.type)}this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip.removeClass("in");$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete();this.hoverState=null;return this};Tooltip.prototype.fixTitle=function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string"){$e.attr("data-original-title",$e.attr("title")||"").attr("title","")}};Tooltip.prototype.hasContent=function(){return this.getTitle()};Tooltip.prototype.getPosition=function(){var el=this.$element[0];return $.extend({},typeof el.getBoundingClientRect=="function"?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())};Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=="bottom"?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=="top"?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=="left"?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}};Tooltip.prototype.getTitle=function(){var title;var $e=this.$element;var o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title};Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)};Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};Tooltip.prototype.validate=function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}};Tooltip.prototype.enable=function(){this.enabled=true};Tooltip.prototype.disable=function(){this.enabled=false};Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled};Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;self.tip().hasClass("in")?self.leave(self):self.enter(self)};Tooltip.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tooltip");var options=typeof option=="object"&&option;if(!data&&option=="destroy")return;if(!data)$this.data("bs.tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(jQuery);+function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype);Popover.prototype.constructor=Popover;Popover.prototype.getDefaults=function(){return Popover.DEFAULTS};Popover.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();var content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content")[this.options.html?typeof content=="string"?"html":"append":"text"](content);$tip.removeClass("fade top bottom left right in");if(!$tip.find(".popover-title").html())$tip.find(".popover-title").hide()};Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()};Popover.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content)};Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};Popover.prototype.tip=function(){if(!this.$tip)this.$tip=$(this.options.template);return this.$tip};var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.popover");var options=typeof option=="object"&&option;if(!data&&option=="destroy")return;if(!data)$this.data("bs.popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})};$.fn.popover.Constructor=Popover;$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(jQuery);(function($){var methods={init:function(options){$(function(){$.sfe("domready")})},domready:function(){var is_touch=false;if($.shared("is_touch")){is_touch=true;$(document.body).addClass("is-touch")}else{$(document.body).addClass("no-touch")}$("#airlock").sfeutil("render_collapsible");$("#airlock").sfeutil("render_share");$.shared("keyboard_handler")}};$.extend({sfe:function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.main")}}})})(jQuery);(function($){var methods={init:function(options){},toggle_menu:function(){var menu=$(this).siblings().filter("ul");if($(menu).is(":visible")){$.cookie(this.parent().attr("id")+"_collapsed",true,{path:"/"});this.html("+ ")}else{$.cookie(this.parent().attr("id")+"_collapsed",false,{path:"/"});this.html("&ndash; ")}$(this).parent("li").toggleClass("is_open");menu.toggle()},render_collapsible:function(){$("#airlock").find("h1.collapsible, h2.collapsible").each(function(indx,el){var visible;visible=$.cookie(el.id+"_collapsed");if(visible===null){visible="true"}if(visible=="true"&&$(el).hasClass("closed"))visible=false;if(!$(el).find("span.arrow")){el=new Element("span");$(el).insert({top:el});el.addClassName("arrow")}if("true"==visible){$(el).find("span.arrow").html("&ndash; ").addClass("visible")}else{$(el).find("span.arrow").html("+ ").removeClass("visible");$(el).next().toggle()}$(el).on("click",function(ele){$(ele.target).sfeutil("toggle_collapsible")})})},render_share:function(){$(".share-link-toggle").on("click",function(e){e.preventDefault();e.stopPropagation();$(this).sfeutil("track_event","Share","toggled");$(this).next(".share-link-inner").slideToggle(100);return false})},toggle_collapsible:function(){var content=this.closest(".collapsible").next();if(content.is(":visible")){if(this.hasClass("arrow"))this.html("+ ");else this.find(".arrow").html("+ ");visible=$.cookie(this.closest(".collapsible").attr("id")+"_collapsed",false,{path:"/"})}else{if(this.hasClass("arrow"))this.html("&ndash; ");else this.find(".arrow").html("&ndash; ");visible=$.cookie(this.closest(".collapsible").attr("id")+"_collapsed",true,{path:"/"})}content.toggle()},list_view:function(type){current=$.cookie("listy");if(null!==current&&type==current)return false;$.cookie("listy",type);var block=$(".product-tile");if(type=="rows"){block.removeClass("grid").addClass("list");block.not(".retired").find(".actions").show()}if(type=="grid"){block.addClass("grid").removeClass("list");block.not(".retired").find(".actions").hide()}},track_event:function(category,action,label,value){if(SFECONFIG.dnt){return false}if(typeof ga!=="undefined"){if(undefined!==value&&!isNaN(parseInt(value*1))){ga("send","event",category,action,label,value)}else if(undefined!==label){ga("send","event",category,action,label)}else if(undefined!==action){ga("send","event",category,action)}}return false},track_link:function(link,category,action,label,value){if(SFECONFIG.dnt){return false}$(this).sfeutil("track_event",category,action,label,value);setTimeout("$(this).sfeutil('openWindow','"+link.href+"')",100);return false},openWindow:function(url){window.open(url,"_blank");window.focus()},validate_alias:function(alias,field_id){var $field=$("#"+field_id).closest(".form-group");$.post("/account/alias_free.json",{q:alias},function(data){if(data.result){$field.addClass("has-success");$field.removeClass("has-error")}else{$field.addClass("has-error");$field.removeClass("has-success")}})},populate_zones:function(country_id,selected_zone,selected_state){var zone,id,field_name,defer;zone=$(this);if(zone.length===0){return}id=zone.attr("id");field_name=$(this).attr("name");defer=$.Deferred();$.get("/zones.json",{country:country_id},function(data){var original=zone.val();if(data.length>1){zone.replaceWith($("<select />",{name:zone.attr("name"),id:id,required:"required"}).addClass("form-control entry-zone"));var newel=$("#"+id);var option=$("<option />",{html:"Choose...",disabled:"disabled",selected:"selected",hidden:"hidden",class:"choose_zone",value:""});$(newel).append(option);$.each(data,function(){var option=$("<option />",{value:this.id,"data-code":this.code});if(original&&(original.toLowerCase()==this.name.toLowerCase()||original.toLowerCase()==this.code.toLowerCase()||original==this.id)){option.attr("selected","selected")}option.html(this.code+" - "+this.name);$(newel).append(option)});if(undefined!==selected_zone){$("#"+id).val(selected_zone)}}else{var attr={type:"text",name:field_name,id:id,class:"form-control entry-zone",value:selected_state||zone[0].value,maxlength:30};var textInput=$("<input />",attr);zone.replaceWith(textInput)}defer.resolve()});return defer.promise()},populate_city:function(zone,val){var ele=$(this);if(val==null)val=ele.val();var military_zones=["6","7","8","9","10","11"];var military_cities={APO:"Army Post Office",DPO:"Diplomatic Post Office",FPO:"Fleet Post Office",MPO:"Military Post Office"};if(zone&&military_zones.indexOf(zone.val())!=-1&&ele.is("select")==false){var sel=$("<select />",{name:ele.attr("name"),id:ele.attr("id"),required:"required",class:"form-control entry-city"});sel.append($("<option />",{html:"Choose...",disabled:"disabled",selected:"selected",hidden:"hidden",value:""}));for(var i in military_cities){var e=military_cities[i];var opt=$("<option />",{value:i,html:i+" - "+e});if(val.toLowerCase()==e.toLowerCase()||val.toLowerCase()==i.toLowerCase())opt.attr("selected","selected");sel.append(opt)}ele.replaceWith(sel)}else if(zone==null||military_zones.indexOf(zone.val())==-1&&ele.is("select")){ele.replaceWith($("<input />",{type:"text",name:ele.attr("name"),id:ele.attr("id"),value:val,class:"form-control entry-city",maxlength:30}))}},hide_message:function(){$.cookie(this.attr("id")+"_hidden",true,{expires:5});this.slideUp()},print_image:function(width){var printContents=$(this).attr("src");var style="";if(width)style="<style>@media print {img {max-width: "+width+"cm;}}</style>";w=window.open();w.document.write(style+'<img src="'+printContents+'"/>');w.print();w.close()}};$.fn.sfeutil=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.sfeutil")}};$("html").on("loaded",".gift_certificates-index",function(){$("#ba_zone").sfeutil("populate_zones",$("#ba_country").val())});$("html").on("loaded",".addresses-make, .addresses-view",function(){$("#zone").sfeutil("populate_zones",$("#country").val())});$("html").on("loaded",".distro-edit",function(){$("#state").sfeutil("populate_zones",$("#country_id").val());$("#country_id").on("change",function(){$("#state").sfeutil("populate_zones",$(this).val())})});$("html").on("loaded",".account-profile",function(){$("#customers_alias").on("keyup",function(){$(this).sfeutil("validate_alias",$("#customers_alias").val(),"customers_alias")})})})(jQuery);String.prototype.toHHMMSS=function(){var sec_num=parseInt(this,10);var hours=Math.floor(sec_num/3600);var minutes=Math.floor((sec_num-hours*3600)/60);var seconds=sec_num-hours*3600-minutes*60;if(minutes&&minutes<10&&hours){minutes="0"+minutes}if(seconds<10&&minutes){seconds="0"+seconds}var time="";if(hours>0)time+=hours+":";time+=minutes+":"+seconds;return time};Date.prototype.toMdY=function(){var month=this.getMonth(),day=this.getDate(),year=this.getFullYear();var months=["January","February","March","April","May","June","July","August","September","October","November","December"];return months[month]+" "+day+", "+year};(function($){var methods={init:function(options){$(function(){$.shared("domready")});if(window.location.hash){var hash=window.location.hash.substring(1);if(hash.match(/comment\-/))$("#"+hash).effect("highlight",{},2e3)}$("html").on("click",function(e){if(!$(e.target).hasClass("button")&&!$(e.target).hasClass("dialog-button")&&!$(e.target).is(".dialog")&&!$(e.target).parents().is(".dialog")){$(".dialog:visible").each(function(){$(this).slideUp(100)})}})},is_touch:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},olarkinit:function(){if(SFECONFIG.dnt||typeof olark==="undefined"||olark===null){return}var chat=$("#airlock").data("chat")||{};chat.available=false;olark("api.chat.onOperatorsAvailable",function(){chat.available=true;$("#airlock").data("chat",chat)});olark("api.chat.onOperatorsAway",function(){$("#airlock").data("chat",chat)})},domready:function(){$.shared("olarkinit");$("body").trigger("loaded");var is_touch=false;if($.shared("is_touch")){is_touch=true;$(document.body).addClass("is-touch")}else{$(document.body).addClass("no-touch")}$("#undeliverable-email-dialog").modal("show");$(document).on("show.bs.modal","#login_modal",function(e){var $this=$(this),data=$this.data("bs.modal"),url=data.options.remoteContent;if(!$this.data("sfe.login.shown")&&url){e.preventDefault();$this.find(".modal-body").load(url,function(responseText,textStatus,jqXHR){if(textStatus==="error"){if(e.relatedTarget&&e.relatedTarget.href){window.location.assign(e.relatedTarget.href)}return}$this.trigger("captchaAdd");$this.data("sfe.login.shown",true);$this.modal("show")})}});if(is_touch){$("#search_toggle").on("touchstart",function(e){e.preventDefault();e.stopPropagation();$("#search_form").slideToggle();return false})}else{$("#search_toggle").on("click",function(e){e.preventDefault();e.stopPropagation();$("#search_form").slideToggle();return false})}if(is_touch){$("#account_toggle").on("touchstart",function(e){e.preventDefault();e.stopPropagation();return $.shared("nav_toggle_account_click")})}else{$("#account_toggle").on("click",function(e){e.preventDefault();e.stopPropagation();return $.shared("nav_toggle_account_click")})}if($("#messages").length){$("#messages").slideDown("slow")}if(SFECONFIG.search_key){$.shared("searchinit")}$.shared("keyboard_handler")},searchinit:function(){$("#global-search").autocomplete({source:function(request,response){var escaped_term=$("<div/>").text(request.term).html();var params={q:request.term,engine_key:SFECONFIG.search_key,fetch_fields:{categories:["external_id","title","path"],products:["external_id","title","sku","path","thumbnail","price","reviews","rating"],tutorials:["external_id","title","archived","path","description","date_added"],news:["external_id","title","path","summary","date_posted"]},document_types:["categories","products","tutorials","news"],per_page:5,page:1,filters:{products:{retired:"0"},tutorials:{retired:"0"}},sort_field:{news:"date_posted",tutorials:"date_added"},sort_direction:{news:"desc",tutorials:"desc"}};$.ajax({url:"https://api.swiftype.com/api/v1/public/engines/suggest.json",dataType:"jsonp",data:params,success:function(data){var items=[];$.each(data.records,function(key,type){if(data.records[key].length>0){var url="/search/results?term="+request.term+"&tab="+key;if(key=="products"){items=items.concat([{title:key.toUpperCase()+"<small class='pull-right'>view all</small>",path:url}]);items=items.concat(type.slice(0,4))}else if(key=="news"){items=items.concat([{title:"RELATED BLOG <small class='pull-right'>view all</small>",path:url}]);items=items.concat(type.slice(0,1))}else{items=items.concat([{title:key.toUpperCase()+"<small class='pull-right'>view all</small>",path:url}]);items=items.concat(type.slice(0,2))}}});var search_full=[{title:"VIEW ALL RESULTS FOR '"+escaped_term+"'",path:"/search/results?term="+escaped_term,subtitle:"",last:true}];items=items.concat(search_full);response(items)}})},minLength:3,position:{my:"right top",at:"right bottom"},select:function(e,ui){var item=ui.item;var path=item.path;var doc_type=path.split("/")[1];var external_id=item.external_id;var query=$(this).val();if(doc_type&&external_id&&query){$.shared("record_swiftype_clickthrough",doc_type,external_id,query,true)}if(path.includes("tutorials")&&external_id){if(item.archived=="0"){path=SFECONFIG.learn_server+item.path}else{path=SFECONFIG.commerce_server+item.path}}else{path=SFECONFIG.commerce_server+item.path}$(this).sfeutil("track_event","Search","add_from_autocomplete",path);window.location=path}}).data("ui-autocomplete")._renderItem=render_suggestion},record_swiftype_clickthrough:function(doc_type,external_id,query,autocomplete){var url=SFECONFIG.commerce_server+"/search/log_clickthrough.json";$.getJSON(url,{doc_type:doc_type,external_id:external_id,q:query,autocomplete:autocomplete},function(data){})},nav_toggle_backdrop:function(){var backdrop=$('<div id="nav_toggle_off" class="modal-backdrop fade in" />').css("position","absolute").appendTo($(".wrapper-inner"));backdrop.on("click touchstart",function(e){e.preventDefault();e.stopPropagation();return $.shared("nav_toggle_close")})},nav_toggle_close:function(){var $target=$("#nav_toggle_off");$target.fadeOut(300,function(){$target.remove()});$(document.body).removeClass("nav-open-account nav-open-pages nav-open-tags")},nav_toggle_account_click:function(){$.shared("nav_toggle_backdrop");$(document.body).addClass("nav-open-account");return false},keyboard_handler:function(){$(document).on("keyup",function(e){if(e.keyCode==27){$(".modal").modal("hide");$(".modal").hide();$(".dialog").hide()}})}};var render_suggestion=function(ul,item){var path=item.path;var type="products";var MAX_CHAR=71;var title=item.title;var li=$("<li></li>");if(path.includes("tutorials")&&item.external_id){type="tutorials";if(item.archived=="0"){path=SFECONFIG.learn_server+item.path}else{path=SFECONFIG.commerce_server+item.path}}else{path=SFECONFIG.commerce_server+item.path}if(item.title.length>.6*MAX_CHAR){title=item.title.slice(0,.6*MAX_CHAR)+"..."}if(item.external_id){var a='<a class="clearfix search-autocomplete" href="'+path+'" data-id="'+item.external_id+'" data-type="'+type+'">';if(item.thumbnail){var img_src=item.thumbnail;if(!item.thumbnail.match(/^http/)){img_src=SFECONFIG.http_static+item.thumbnail}a+='<img src="'+img_src+'" height="46" width="46">'}a+='<span class="search-title">'+title+"</span>";if(item.sku){a+="<br><span class=search-subtitle>"+item.sku+" $"+item.price;if(item.rating>0){var actual=parseFloat(item.rating).toFixed(1);var whole=Math.floor(item.rating);var fraction=actual-whole;a+='<span class="product-rating" title="'+actual+' stars">'+"  ";for(var i=0;i<5;i++){var starClass="empty";if(whole>i){starClass="full"}else{if(actual>i){if(fraction>.2){starClass="half"}if(fraction>.8){starClass="full"}}}a+="<span class=sfe-icon-star-"+starClass+"></span>"}if(item.reviews>0){a+='  <span class="count">'+item.reviews+"</span>"}a+="</span>"}a+="</span>"}else if(item.summary){a+="<br><span class=search-subtitle>"+item.summary.slice(0,MAX_CHAR)+"..."+"</span>"}else if(item.description){a+="<br><span class=search-subtitle>"+item.description.slice(0,MAX_CHAR)+"..."+"</span>"}a+="</a>"}else{var a='<a class="clearfix autocomplete-section-title'+(item.last?" last":"")+'" href="'+path+'">';a+=item.title;a+="</a>"}li.addClass("autocomplete-item");return li.data("item.autocomplete",item).append(a).appendTo(ul)};$.extend({shared:function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.shared")}}})})(jQuery);(function($,window,document){"use strict";var mobileTriggerSelector="#nav_toggle",$mobileTrigger,desktopTriggerSelector=".product-menu",$desktopTrigger,targetSelector=".product-menu-container",$target,$triggers,openClass="opened-menu",touchedClass="touched-menu",clickedClass="clicked-menu",isVisible,isTouched=false,isClicked=false,isTouchedOpen=false,isClickedOpen=false,openDelay=500,closeDelay=250,screenSmMin=768,$window=$(window),lastViewportWidth,hoverTimeout,closeTimeout,lastActiveElement,headingSelector=".product-menu-heading";function cancelTimeout(timeoutHandle){if(timeoutHandle){clearTimeout(timeoutHandle);timeoutHandle=null}}function clearHoverTimeout(){cancelTimeout(hoverTimeout)}function clearCloseTimeout(){cancelTimeout(closeTimeout)}function saveLastFocus(){lastActiveElement=document.activeElement}function clearLastFocus(){lastActiveElement=null}function restoreLastFocus(){if(lastActiveElement){lastActiveElement.focus()}clearLastFocus()}function applyState(active){if(active){$target.addClass(openClass+(isTouched?" "+touchedClass:"")+(isClicked?" "+clickedClass:""))}else{$target.removeClass(openClass+" "+touchedClass+" "+clickedClass)}isVisible=active;$triggers.attr("aria-expanded",active);$target.attr("aria-hidden",!active)}function shown(){applyState(true);$target.trigger("focus")}function shownNoFocus(){applyState(true);clearLastFocus()}function hidden(){applyState(false);restoreLastFocus()}function hiddenNoFocus(){applyState(false);clearLastFocus()}function hideTarget(preserveCurrentFocus){$target.slideUp("slow",preserveCurrentFocus?hiddenNoFocus:hidden);isTouchedOpen=false;isClickedOpen=false}function showTarget(changeFocus){var $globalSearch=$("#global-search");if($globalSearch.data("ui-autocomplete")){$globalSearch.autocomplete("close")}saveLastFocus();$target.slideDown("slow",changeFocus?shown:shownNoFocus);isTouchedOpen=isTouched;isClickedOpen=isClicked}function handleTriggerActivate(e){if(isTouched){e.preventDefault();isTouched=false;return}if(!isVisible){isClicked=true;e.preventDefault();showTarget(true);isClicked=false;return}hideTarget()}function handleTriggerMouseenter(e){clearCloseTimeout();if(e.type==="touchstart"){isTouched=true;e.stopImmediatePropagation();e.preventDefault();if(!isVisible){showTarget(true);return}hideTarget()}else{hoverTimeout=setTimeout(showTarget,openDelay)}}function handleTargetMouseenter(){clearCloseTimeout()}function handleTabKey(e){var tabbables=$target.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");if(e.target===last[0]&&!e.shiftKey||(e.target===first[0]||e.target===$target[0])&&e.shiftKey){hideTarget(true)}}function handleTargetKeydown(e){if(e.isDefaultPrevented()){return}if(e.keyCode){if(e.keyCode===27){e.preventDefault();hideTarget();return}if(e.keyCode===9){handleTabKey(e)}}}function handleTriggerMouseleave(e){clearHoverTimeout();if(isTouchedOpen||isClickedOpen||$target.is(e.relatedTarget)||$.contains($target.get(0),e.relatedTarget)){return}closeTimeout=setTimeout(hideTarget,closeDelay)}function handleTargetMouseleave(e){if(isTouchedOpen||isClickedOpen||$triggers.is(e.relatedTarget)||$.contains($triggers.get(0),e.relatedTarget)){return}closeTimeout=setTimeout(hideTarget,closeDelay)}function resetAllCategories(){$target.find(".list-unstyled").css("display","");$target.find(".glyphicon-minus").removeClass("glyphicon-minus").addClass("glyphicon-plus")}function handleWindowResize(){var oldLastWidth=lastViewportWidth;lastViewportWidth=$window.width();if(oldLastWidth<screenSmMin&&lastViewportWidth>=screenSmMin){resetAllCategories()}}function toggleProductMenuHeadings(e){var $group,$list,$glyph;if(lastViewportWidth>=screenSmMin){return}$group=$(this).parent(".product-menu-group");$list=$group.find(".list-unstyled");if($list.find("li").length===0){return}e.preventDefault();e.stopPropagation();$glyph=$group.find(".glyphicon");$glyph.toggleClass("glyphicon-plus glyphicon-minus");$list.slideToggle()}function init(){$mobileTrigger=$(mobileTriggerSelector);$desktopTrigger=$(desktopTriggerSelector);$target=$(targetSelector);$triggers=$mobileTrigger.add($desktopTrigger);isVisible=$target.hasClass(openClass);lastViewportWidth=$window.width();$target.attr("tabindex",-1);$target.attr("aria-hidden",!isVisible);$triggers.attr("aria-expanded",isVisible);$desktopTrigger.on({"mouseenter.SfeProductMenu":handleTriggerMouseenter});$triggers.on({"touchstart.SfeProductMenu":handleTriggerMouseenter,"MSPointerDown.SfeProductMenu":handleTriggerMouseenter,"mouseleave.SfeProductMenu":handleTriggerMouseleave,"click.SfeProductMenu":handleTriggerActivate});$target.on({"mouseleave.SfeProductMenu":handleTargetMouseleave,"mouseenter.SfeProductMenu":handleTargetMouseenter,"keydown.SfeProductMenu":handleTargetKeydown});$target.on("click.SfeProductMenu",headingSelector,toggleProductMenuHeadings);$window.on("resize.SfeProductMenu",handleWindowResize)}$(init)})(jQuery,window,document);(function($){var methods={render:function(){var addCommas=function(nStr){nStr+="";x=nStr.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,"$1"+","+"$2")}return x1+x2};var format_price=function(price){var currency_formated=Math.abs(price).toFixed(2);if(currency_formated>999.99)currency_formated=addCommas(currency_formated);symbol_left='<span itemprop="priceCurrency" content="USD">$</span>';var output=symbol_left+'<span itemprop="price" content="'+currency_formated+'">'+currency_formated+"</span>";if(price<0)output="-"+output;return output};$("span.price").each(function(iter,item){var $item=$(item);if(!$item.hasClass("calculated")){$item.html(format_price(parseFloat(item.innerHTML.replace(/(<([^>]+)>)/gi,"").replace(/[^0-9.]+/g,""))));$item.addClass("calculated")}})}};$.fn.currency=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.currency")}};$("html").on("loaded",function(){$("#airlock").currency("render")});$("html").on("loaded",".account-currencies",function(){$("#airlock").currency("account_page_hack")})})(jQuery);(function($,window,document){"use strict";var $filtersElement=$(".category-filters"),$customPriceInputs=$("#filter-price-floor, #filter-price-ceil"),$customPriceCheckbox=$("#filter-option-is_price_range_custom"),$buttonContainer=$(".category-filters-button"),$checkables=$filtersElement.find("input").filter("[type=radio], [type=checkbox]");function changeStickyTops($targets){var viewportHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0);$targets.each(function(){var $this=$(this),elementHeight=$this.outerHeight(),difference=viewportHeight-elementHeight;if(difference>0){difference=0}$this.css("top",difference+"px")})}function changeFiltersStickyTop(){changeStickyTops($filtersElement)}function handleCheckableChange(){$buttonContainer.removeClass("hidden")}function handleCustomPriceFieldKeyup(){var $empties=$customPriceInputs.filter(function(){return $.trim(this.value)===""});if($empties.length===0){$customPriceCheckbox.prop("checked",true).trigger("change")}}$buttonContainer.addClass("hidden");$(changeFiltersStickyTop);$(window).on("resize.sfeCategories",changeFiltersStickyTop);$customPriceInputs.on("keyup.sfeCategories",handleCustomPriceFieldKeyup);$checkables.on("change.sfeCategories",handleCheckableChange);function determineWidths(){var list=document.getElementsByClassName("subcategory-list")[0];if(list&&list.offsetWidth>=list.scrollWidth){$(".btn-next").addClass("hide");$(".btn-previous").addClass("hide")}else{$(".btn-next").removeClass("hide");$(".btn-previous").removeClass("hide")}}$(window).on("load",determineWidths);$(window).on("resize",determineWidths);$(".btn-next").on("click",function(e){subcategory_slide(e)});$(".btn-previous").on("click",function(e){subcategory_slide(e)});function subcategory_slide(e){var isRight=$(e.currentTarget).hasClass("btn-next"),$subcats=$(".subcategory-list"),current=$subcats.scrollLeft(),step=document.getElementsByClassName("subcategory-list")[0].clientWidth-10,max=document.getElementsByClassName("subcategory-list")[0].scrollWidth-step,animate=500;e.preventDefault();if(isRight){if(current<=max-step){$subcats.animate({scrollLeft:current+step},animate)}else if(current>=max-10){$subcats.animate({scrollLeft:0},animate)}else{$subcats.animate({scrollLeft:max},animate)}}else{if(current===0){$subcats.animate({scrollLeft:max},animate)}else{$subcats.animate({scrollLeft:current-step},animate)}}}})(jQuery,window,document);(function($){var methods={init:function(options){},post:function(e){e.preventDefault();if($(this).find("textarea").val().replace(" ","").replace(/(<([^>]+)>)/gi,"")===""){alert("you must enter a comment!");return false}$(this).find('input[type="submit"]').attr("disabled","disabled");$.post($(this).attr("action")+".json",$(this).serialize(),function(data){if(!data.status){alert(data.message);return false}var initial_page=window.location.pathname;window.location.replace(initial_page+"#comment-"+data.comment_id);window.location.reload(true)}).fail(function(){alert("we were unable to save your comment, please try again in a few minutes")})},hide:function(id){$.post("/comment/"+id+"/hide.json",function(data){if(!data.status){alert(data.message);return}$("#comment-"+id).addClass("moderated");$("#comment-show-"+id).show();$("#comment-hide-"+id).hide()})},show:function(id){$.post("/comment/"+id+"/show.json",function(data){if(!data.status){alert(data.message);return}$("#comment-"+id).removeClass("moderated");$("#comment-show-"+id).hide();$("#comment-hide-"+id).show()})},pin_comment:function(id){$.post("/comment/"+id+"/pin_comment.json",function(data){if(!data.status){alert(data.message);return}$("#comment-pin-"+id).hide();$("#comment-unpin-"+id).show();$(".public-comment-pin-"+id).show()})},unpin_comment:function(id){$.post("/comment/"+id+"/unpin_comment.json",function(data){if(!data.status){alert(data.message);return}$("#comment-pin-"+id).show();$("#comment-unpin-"+id).hide();$(".public-comment-pin-"+id).hide()})},hide_all:function(id){if(!confirm("Really hide all the user's comments?"))return false;$.post("/comment/"+id+"/hide_all.json",function(data){if(!data.status){alert(data.message);return}$("#comment-"+id).addClass("moderated");$("#comment-show-"+id).show();$("#comment-hide-"+id).hide()})},toggle_banhammer:function(id){if(!confirm("Toggle commenting for this user?"))return false;$.post("/comment/"+id+"/toggle_banhammer.json",function(data){if(!data.status){alert(data.message);return}$("#comment-bh-"+id).html("toggled comment ability: "+data.can_comment)})},toggle_help:function(id){var help,link;if(-1==id){help=$("#formatting_help"),link=$("#formatting_help_link")}else{help=$("#comment-"+id).find(".formatting-help"),link=$("#comment-"+id).find(".formatting-help-link")}if(help.is(":visible")){link.html("formatting help");help.hide()}else{link.html("hide help");help.show()}},rate:function(id){$.post("/comment/"+id+"/rate.json",function(data){if(!data.status){alert(data.message);return}$("#comment-rated-"+id).toggle();$("#comment-unrated-"+id).toggle();$("#comment-rating-"+id).html(data.rating)})},toggle_reply_form:function(id){var form=$("#comment-reply-form-"+id),comment=$("#comment-"+id);if(form.length>0){$("#comment-reply-form-"+id).toggle();if(form.is(":visible"))form.trigger("focus");return}form=$("#comment-reply-form").clone(),form=form.html().replace(/COMMENT_ID/g,id);$(comment).find(".comment-text").first().append(form);form=$("#comment-reply-form-"+id);var entity=form.find("input[name=entity]").val();if(window.getSelection){$(this).comment("quote_into_textarea",form.find("textarea").first())}form.on("submit",function(event){$(this).sfeutil("track_event","Comment","post",entity);$(this).comment("post",event)});form.find("textarea").trigger("focus")},quote_into_textarea:function(ta){if(ta.val().length!==0)return;var sel=window.getSelection();var focused_parent=$(sel.focusNode).parents(".comment-text").first();var anchor_parent=$(sel.anchorNode).parents(".comment-text").first();if(focused_parent.length&&focused_parent.is(anchor_parent)){var selected_text=sel.toString();if(selected_text.length>0){ta.text("> "+selected_text+"\n\n");ta.scrollTop(ta.scrollHeight)}}},edit:function(id){$.get("/comment/"+id+".json",function(r){var form=$("#comment-edit-form").clone(),comment=$("#comment-"+id);form.find("textarea").text(r.text);form=form.html().replace(/COMMENT_ID/g,id);comment.find(".comment-text").eq(0).html(form);var cancel=comment.find('a[name="cancel-button"]').eq(0);cancel.on("click",function(){comment.find(".comment-text").eq(0).html(r.html);return false});form=$("#comment-edit-form-"+id);form.on("submit",function(event){event.preventDefault();$.post("/comment/"+id+"/update.json",form.serialize(),function(data){if(!data.status){alert(data.message);return false}var initial_page=window.location.pathname;window.location.replace(initial_page+"#comment-"+data.comment_id);window.location.reload(true)}).fail(function(){alert("we were unable to update your comment, please try again in a few minutes")})})})},report:function(id){if(!confirm("You are about to report a comment to the SparkFun moderators.\n\nContinue?"))return false;$.post("/comment/"+id+"/report.json",function(data){alert("Thanks, this comment has been reported to the SparkFun moderators.")});return false}};$.fn.comment=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.comment")}};$("html").on("loaded",".comments",function(){$("#comment_form").on("submit",function(event){$(this).sfeutil("track_event","Comment","post","<?= $entity ?>");$(this).comment("post",event)});$("#airlock").on("comments_updated",function(){$("#comment_form").off("submit");$("#comment_form").on("submit",function(event){$(this).sfeutil("track_event","Comment","post","<?= $entity ?>");$(this).comment("post",event)})})})})(jQuery);(function($){var methods={add:function(id,qty,source){if(typeof source==="undefined")source="add_product_page";$.post("/cart/add.json",this.serialize(),function(data){if(!data.success){alert(data.message)}else{var qty=parseInt(data.qty_added);var cart_qty=parseInt($("#items_in_cart").html())+qty;var noun="item"+(1==cart_qty?"":"s");var item_noun="item"+(1==qty?"":"s");if(data.notification){alert(data.notification)}$("#items_in_cart").html(cart_qty);$("#cart_noun").html(noun);$("#cart_status").addClass("cart-full").removeClass("cart-empty").addClass("item-added");$("#cart-menu-item").effect("highlight",{},1500);$(".added_qty_"+id).html(qty+" "+item_noun);$(".added_to_cart_"+id).removeClass("hide").effect("highlight",{},1500);$(".add_qty").val(parseInt(data.qty_addable));$(this).sfeutil("track_event","Cart",source,"product "+id);if($(document.body).hasClass("cart-index")){location.reload()}}})},remove:function(id){$row=$("#cart_row_"+id);$.post("/cart/remove.json",{id:id,csrf_token:$row.find("[name=csrf_token]").val()},function(data){success=data.success;if(success){$row.slideUp(function(){$(this).remove();$(this).cart("recalculate_totals")})}else{window.top.location.reload()}})},remove_all:function(){$.post("/cart/remove_all.json",{csrf_token:$("#cart [name=csrf_token]").val()},function(data){if(!data.success)window.top.location.reload();$("table.cart tr.product").fadeOut(function(){$(this).remove();$("#cart").cart("recalculate_totals")})})},recalculate_totals:function(){var count=0,price=0;$("table.cart tr.product").each(function(i,el){var $tr=$(el);price+=parseFloat($tr.find("td > span.price").data("price"));count+=parseInt($tr.find(".add-qty").val())});var noun="item"+(1==count?"":"s");$(".cart_total").removeClass("calculated").html(price.toFixed(2));$("#items_in_cart").html(count);$("#cart_noun").html(noun);$("#cart_status").addClass(count>0?"cart-full":"cart-empty");$("#cart_status").removeClass(count>0?"cart-empty":"cart-full");$("#airlock").currency("render");if(0===count){$("#remove_all").fadeOut();$("#checkout").fadeOut();$("#internal_checkout").fadeOut();$("#load_shipping_quotes").fadeOut();$("#cart_footer .note").fadeOut();$("#calculate_shipping").fadeOut();$("#cart_freeship").fadeOut()}else{var freeship=$("#cart_freeship"),threshold=parseFloat(freeship.attr("threshold"));if(price>=threshold){freeship.fadeOut()}else{freeship.fadeIn().find(".price.left").html("$"+(threshold-price).toFixed(2))}}},confirm_backorder:function(id,qty,source){this.backorder_form=$(this).closest("form");this.backorder_id=id;this.backorder_qty=qty;var modal=$("<div class='modal fade wishlist'>          <div class='modal-dialog modal-sm'>            <div class='modal-content'>              <h3>Backorder Item                <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>              </h3>              <p>This item is not in stock. If you would like to order the item now, add it to your cart and check out when you're ready. We will charge you and ship your order as soon as it becomes available. This will guarantee that you get placed into the order queue and stock will be set aside for your order.</p>              <p>Backordered items may require additional shipping charges. Please see our <a href=\"http://www.sparkfun.com/static/customer_service#BackOrders\">Backorder Policy</a> for more information. Most items ship within 2-3 weeks. Some items have extended lead times.</p>              <form>                <p>                  <input type='submit' class='btn btn-action' value='Backorder Item' />                  <a href='#' class='btn' data-dismiss='modal'>Cancel</a>                </p>              </form>            </div>          </div>        </div>");var $that=this;modal.find("form").on("submit",function(e){e.preventDefault();modal.modal("hide");$that.backorder_form.cart("add",$that.backorder_id,$that.backorder_qty,source)});modal.modal().on("hidden",function(){this.remove()});$(document.body).append(modal);modal.modal("show")},confirm_preorder:function(id,qty,source){this.preorder_form=$(this).closest("form");this.preorder_id=id;this.preorder_qty=qty;var modal=$("<div class='modal fade wishlist'>          <div class='modal-dialog modal-sm'>            <div class='modal-content'>              <h3>Pre-Order Item                <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>              </h3>              <p>This item is not in stock yet. Pre-ordering the item now will guarantee your place in the order queue, and stock will be set aside for you. You will be charged immediately and your item will ship as soon as it is in stock.</p>              <p>Please note: Pre-order items will require separate shipping charges from in-stock items within the same order. Please see our <a href=\"http://www.sparkfun.com/static/customer_service#BackOrders\">Pre-Order Policy</a> for more information.</p>              <form>                <p>                  <input type='submit' class='btn btn-info' value='Pre-Order Item' />                  <a href='#' class='btn' data-dismiss='modal'>Cancel</a>                </p>              </form>            </div>          </div>        </div>");var $that=this;modal.find("form").on("submit",function(e){e.preventDefault();modal.modal("hide");$that.preorder_form.cart("add",$that.preorder_id,$that.preorder_qty,source)});modal.modal().on("hidden",function(){this.remove()});$(document.body).append(modal);modal.modal("show")},backorder_shipping:function(){var modal=$('<div class="modal fade notify in" style="display: block">          <div class="modal-dialog cart-backorder text-center">            <div class="modal-content">              <div class="modal-header">                <span class="glyphicon glyphicon-exclamation-sign lg-glyphicon"></span>                <h2><strong>Please choose backorder preference.</strong></h2>                <p><strong>Notice:</strong> Only applies to orders shipped from SparkFun.</p>              </div>              <div class="modal-body">                <div id="ship_complete">                  <form action="cart/proceed" method="post">                    <h3>Ship Complete</h3>                    <p class="center-block">Choosing to ship complete will ship your order in one shipment at <strong>one shipping cost.</strong> Your order will not ship until all items are back in stock.</p>                    <br>                    <button type=submit name="combine_shipping" class="btn btn-default">Ship Complete</button>                  </form>                </div>                <div id="ship_separate">                  <form action="cart/proceed" method="post">                    <h3>Separate Order</h3>                    <p class="center-block">Separate orders will ship the in-stock items now. Backordered items will ship when back in stock in a separate shipment. <strong>You will be charged shipping for each shipment.</strong></p>                    <button type=submit name="separate_shipping" class="btn btn-default">Separate Order</button>                  </form>                </div>              </div>            </div>          </div>        </div>');modal.modal().on("hidden",function(){this.remove()});$(document.body).append(modal);modal.modal("show")},ask_which_address:function(){var addresses=[];$.get("/cart/addresses.json",function(data){addresses=data.addresses;var calculator=$("#shipping_calculator").html("<h4>Please select an address</h4>");var list=$("<ul>");$.each(addresses,function(index,address){var address_text=address.entry_street_address;address_text+="<br>";address_text+=address.entry_city;address_text+=(address.entry_state?", "+address.entry_state:"")+" "+address.entry_postcode;var li=$("<li class=address>");var address_link=$("<a>",{href:"#",html:address_text,click:function(e){e.preventDefault();$(this).cart("show_shipping_quotes",address)}});li.append(address_link);list.append(li)});list.append($("<li />",{class:"address",html:$("<a />",{href:"/addresses",class:"button",text:"Edit or add a new shipping address"})}));calculator.append(list);calculator.show("blind",{},300)})},show_shipping_quotes:function(address){var $calculator=$("#shipping_calculator");$calculator.html($("<img />",{src:window.SFECONFIG.http_static+"/images/framework/666_loader.gif"}));$calculator.show();$.ajax({url:"/cart/shipping_dinosaur.json",data:{address_book_id:address.address_book_id},success:function(quotes){$(this).cart("render_quotes",quotes);$calculator.append($("<a />",{href:"#",class:"button",text:"Select another address",click:function(e){e.preventDefault();$(this).cart("ask_which_address")}}))}})},logged_out_quotes:function(postcode){var $calculator=$("#shipping_calculator");$calculator.html($("<img />",{src:window.SFECONFIG.http_static+"/images/framework/666_loader.gif"}));$calculator.show();$.ajax({url:"/cart/shipping_dinosaur.json",data:{postcode:postcode},success:function(quotes){$(this).cart("render_quotes",quotes)}})},render_quotes:function(quotes){var $calculator=$("#shipping_calculator");var $list=$("<table class=quote_response>");var quotes_immediate=quotes.ship_immediately;var quote_count=0;var cheapest=quotes.cheapest.ship_immediately;if(quotes_immediate){$.each(quotes_immediate,function(index,quote){quote_count++;var $tr=$("<tr>"),$name=$("<td>"),$price=$("<td>"),shipping_cost=parseFloat(quote.cost),index=parseInt(index);if(shipping_cost<=0){shipping_cost="<strong>FREE<strong>";$name.html('<span class="method_name">'+quote.name+"</span>")}else if(index===cheapest){shipping_cost='<strong><span class="method_price price">'+shipping_cost+"</span></strong>";$name.html('<strong><span class="method_name">'+quote.name+"</span></strong>")}else{shipping_cost='<span class="method_price price">'+shipping_cost+"</span>";$name.html('<span class="method_name">'+quote.name+"</span>")}$price.html(shipping_cost);$tr.append($name);$tr.append($price);$list.append($tr);$calculator.html($list);if(cheapest){var cheap_quote=quotes_immediate[cheapest];$calculator.prepend("<p><strong>"+cheap_quote.name+"  "+'<span class="method_price price">'+parseFloat(cheap_quote.cost)+"</span></strong></p>")}$calculator.append("<p>These quotes are estimates. Not all methods are available for all addresses. Actual shipping cost will be shown during checkout.</p>");$("#airlock").currency("render")})}if(quote_count<1){$calculator.html("<h3>Unable to retrieve quotes</h3> <p>We were unable to retrieve quotes for this order.<br> This is likely due to an invalid address/ZIP or the weight of the items in your cart. You may still place this order, and we will contact you with shipping options within 2 business days</p>")}},autonotify_email_update:function(autonotify_id){$(".update-email-dialog").remove();var dialog=$("<div />",{class:"update-email-dialog"});dialog.html('<p class="update-email-dialog" style="display: none">'+'  <form id="update-email-form" class="form-inline">'+"    <label>Enter a new email address:"+'      <input type="email" id="customer-email" class="form-control" required>'+"    </label>"+'    <input type="submit" value="Save" class="btn btn-action">'+'    <input type="button" id="cancel-button" value="Cancel" class="btn">'+"  </form>"+"</p>");this.parent().append(dialog);var that=this;$("#update-email-form").on("submit",function(e){e.preventDefault();var new_customer_email=$("#customer-email").val().replace(/ /g,"");$.post("/autonotify/update.json",{id:autonotify_id,customer_email:new_customer_email},function(data){if(!data.success){alert(data.error)}else{that.parent().find(".email").text(new_customer_email)}$(".update-email-dialog").slideUp().remove()})});$("#cancel-button").on("click",function(){$(".update-email-dialog").slideUp().remove()});$(".update-email-dialog").slideDown()}};$.fn.cart=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.cart")}};$(document).on("submit","form[data-checkout-action]",function(e){var form_data=$("form[data-checkout-action]").data();if(form_data.checkoutAction!="backorder_shipping"){return}e.preventDefault();$(this).cart("backorder_shipping")});$(document).on("submit","form[data-cart-action]",function(e){e.preventDefault();var $this=$(this),cartAction=$this.data("cart-action")||"add",itemID=$this.find("[name=id]").val(),quantity;if(!itemID){return}quantity=parseInt($this.find(".quantity").val())||parseInt($this.find("[name=qty]").val())||1;$this.cart(cartAction,itemID,quantity,"add_product_tile")})})(jQuery);!function($){"use strict";var Chat=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.chat.defaults,options)};Chat.prototype={constructor:Chat,show_modal:function(){var modal=$("#chat-modal");if(!modal.length){modal=$("<div id='chat-modal' class='modal fade chat'>            <div class='modal-dialog'>              <div class='modal-content'></div>            </div>          </div>");$(document.body).append(modal);modal.modal({remote:this.$element.attr("href")});modal.on("shown.bs.modal",function(){$(this).chat("init_modal")})}modal.modal("show")},init_modal:function(){var $airlock=$("#airlock");var chat=$airlock.data("chat")||{};var $olarkAvailableText=$(".olark-availability-text");if(SFECONFIG.dnt){$olarkAvailableText.html("unavailable");chat.available=false;$airlock.data("chat",chat);return}$.get(SFECONFIG.commerce_server+"/olark/open",function(data){if(data.open&&chat&&chat.available){$olarkAvailableText.html("available");$("#chat-form").show()}else{$olarkAvailableText.html("unavailable");chat.available=false;$airlock.data("chat",chat)}$(this).chat("finish_setting_up_modal")},"json")},finish_setting_up_modal:function(){var message="";$('#chat-form input[name="chat-name"]').val(SFECONFIG.customers_name);$('#chat-form input[name="chat-email"]').val(SFECONFIG.customers_email);if(0!==SFECONFIG.customers_id){olark("api.visitor.updateFullName",SFECONFIG.customers_name);olark("api.chat.updateVisitorNickname",{snippet:SFECONFIG.customers_name+" ("+SFECONFIG.customers_id+")"});olark("api.visitor.updateCustomFields",{customers_id:SFECONFIG.customers_id})}$('#chat-form input[name="problem"]').on("change",function(){olark("api.chat.setOperatorGroup",{group:olarkgroups[$('#chat-form input[name="problem"]:checked')]});message=$('#chat-form input[name="problem"]:checked').parent().text();message=message.replace(/^\s+|\s+$/g,"");$("#name-form").show();$('#chat-form input[type="submit"]').removeAttr("disabled")});$("#chat-form").on("submit",function(e){e.preventDefault();if(!$('#chat-form input[name="chat-name"]').val()){$('#chat-form input[name="chat-name"]').effect("highlight",{},2e3);return}if(!$('#chat-form input[name="chat-email"]').val()){$('#chat-form input[name="chat-email"]').effect("highlight",{},2e3);return}olark("api.visitor.updateFullName",$('#chat-form input[name="chat-name"]').val());olark("api.visitor.updateEmailAddress",$('#chat-form input[name="chat-email"]').val());olark("api.box.expand");$("#chat-modal").modal("hide");olark("api.chat.onBeginConversation",function(){olark("api.chat.sendNotificationToOperator",message)})});$("#chat_help_form").on("submit",function(e){e.preventDefault();$(this).chat("submit_help_form")})},submit_help_form:function(){var $form=$("#chat_help_form");$.ajax({url:$form.attr("action")+".json",type:"post",data:$form.serialize(),success:function(success){$form.slideUp();$message=$("<h2>Request Submitted!</h2><p>Thanks for getting in touch. We will be in touch as soon as we possibly can!</p>").css({display:"none"});$form.parent().append($message);$message.slideDown()}})}};$.fn.chat=function(option){return this.each(function(){var $this=$(this);var data=$this.data("chat");var options=typeof option=="object"&&option;if(!data)$this.data("chat",data=new Chat(this,options));if(option=="show_modal")data.show_modal();else if(option=="init_modal")data.init_modal();else if(option=="submit_help_form")data.submit_help_form();else if(option=="finish_setting_up_modal")data.finish_setting_up_modal();else if(option)data.setState(option)})};$.fn.chat.defaults={};$.fn.chat.Constructor=Chat;$(document).on("click.button","[data-toggle^=chatpopup]",function(e){var $button=$(e.target);$button.chat("show_modal");e.preventDefault()})}(window.jQuery);(function($){var methods={init:function(){},update_shipping_quotes:function(){$(".loading").show();var $target_containers=$(".shipping_quotes_cont"),$message_container=$(".shipping_quotes_cont_0"),$continue_button=$("#continue");if($target_containers.length===0&&$message_container.length===0){return}if($continue_button.data("processing")){alert("You need to wait until the first address submission is complete before submitting another address");return}if($target_containers.length!=0){$target_containers.html('<p><img src="//cdn.sparkfun.com/images/framework/666_loader.gif" alt="loading..."> Loading Shipping Quotes...</p>')}$message_container.empty();$continue_button.prop("disabled",true);$continue_button.data("processing",true);var shipreq=$.ajax({type:"POST",url:"/orders/shipping_quotes",data:{name:"shipping_method",id:"shipping_methods"}}).done(function(msg){msg=JSON.parse(msg);Object.keys(msg).forEach(function(key){$(".shipping_quotes_cont_"+key.toLowerCase()).html(msg[key])});var require_phone=$(".require-phone").val();$(".phone_number").prop("required",require_phone);$(".phone_requirement_text").html(require_phone?"(required)":"");$("#shiplog").html("");$("#airlock").currency("render");$continue_button.prop("disabled",false);$continue_button.data("processing",false);$(".show-address-form").prop("disabled",false)}).fail(function(){$("#shiplog").data("reqcount",$("#shiplog").data("reqcount")+1);if($("#shiplog").data("reqcount")<3){$("#shiplog").html("<p><em>There was an error retrieving shipping quotes, trying again...</em></p>");$("#airlock").checkout("update_shipping_quotes")}else{$("#shiplog").append("<p><em>Unable to get shipping quotes.</em></p>");$target_containers.html('<p>Please go back to the <a href="/cart">cart</a> and try again</p>');$continue_button.data("processing",false);$(".show-address-form").prop("disabled",false)}})},init_gift_cert:function(){var gcchk_pre='<div class="checkbox no-margin"><label class="gc_check_label"><input type="checkbox">';var gcchk_post="</label></div>";var gc_panel=$(this);$(".previous_gift_certificate").each(function(){$(this).html(gcchk_pre+$(this).html()+gcchk_post);$(this).find('input[type="checkbox"]').prop("checked",1);$(this).addClass("use-code")});$("#gc_code_txt").attr("type","hidden").after('<div class="row">          <div class="col-md-6"><input type="text" class="form-control" id="gc-ui-code"></div>          <div class="col-md-6"><button id="gc-ui-add" class="btn btn-default">Add Gift Certificate</button></div>        </div>');$("#gc_panel").checkout("save_gift_certs");gc_panel.on("click","#gc-ui-add",function(e){e.preventDefault();var code=$("#gc-ui-code");if(!code.val())return false;var prev=$(".previous_gift_certificate"),parent=$('<div class="previous_gift_certificate">'+gcchk_pre+'<i class="code">'+$("<div/>").text(code.val()).html()+"</i>"+gcchk_post+"</div>");if(prev.length){prev.first().before(parent)}else{gc_panel.find("label").first().after(parent)}$.ajax({type:"POST",url:"/orders/gift_cert",dataType:"json",data:{code:$.trim(parent.find(".code").text())}}).always(function(resp){if(!resp.amount||resp.amount=="invalid"){parent.addClass("error");parent.find(".code").after(" - invalid gift certificate")}else{parent.find(".code").after(': <span class="price">'+resp.amount+"</span>");parent.addClass("use-code");parent.find('input[type="checkbox"]').prop("checked",1)}$("#airlock").currency("render");$("#gc_panel").checkout("save_gift_certs")});code.val("")});gc_panel.on("click",'input[type="checkbox"]',function(e){var parent=$(this).closest(".previous_gift_certificate");parent.toggleClass("use-code");$("#gc_panel").checkout("save_gift_certs")})},save_gift_certs:function(){var codes=[];$(".previous_gift_certificate.use-code").each(function(){codes.push($(this).find(".code").text())});$("#gc_code_txt").val(codes.join(", "))},collapse_payment_methods:function(besides){$(".payment-method:visible").each(function(){$(this).slideUp()});$("#"+besides).slideDown()}};$.fn.checkout=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.cart")}};$("html").on("loaded",".orders-make",function(){if(!$("#shipping_methods").length){$("#shiplog").data("reqcount",1);$("#airlock").checkout("update_shipping_quotes")}$("a.helper").on("click",function(e){var target=$(e.target).data("for");$("#"+$(e.target).data("for")).slideToggle();return false});$("#gc_panel").checkout("init_gift_cert");$('input[type="radio"][id*="payment_method_"]').on("click",function(e){$(this).checkout("collapse_payment_methods",$(e.target).data("for"))});$("table.cc tr").on("click",function(){var radio=$(this).find('input[type="radio"]');$(radio).prop("checked",true);var billing_id=$(radio).data("address");$('#billing_address option[value="'+billing_id+'"]').prop("selected",true)});if($('#saved_credit_card_info input[type="radio"]:checked').length<1){$('#saved_credit_card_info input[type="radio"]').first().prop("checked",true)}});$("html").on("loaded",".orders-confirm",function(){$(".js-tooltip").tooltip();$("#checkout_confirm_form").on("submit",function(){$('input[type="submit"], button[type="submit"]',this).prop("disabled",true)})});$("html").on("loaded",".orders-paypalconfirm",function(){$("#checkout_confirm_form").on("submit",function(){$('input[type="submit"], button[type="submit"]',this).prop("disabled",true)})})})(jQuery);(function($){var methods={init:function(options){$("#sa_zone").sfeutil("populate_zones",$("#sa_country").val()).then(function(){$("#sa_city").sfeutil("populate_city",$("#sa_zone"))}).then(function(){$("#ba_zone").sfeutil("populate_zones",$("#ba_country").val())}).then(function(){$("#ba_city").sfeutil("populate_city",$("#ba_zone"))}).then(function(){$.address("bind_events")}).then(function(){if($("#billing_same").prop("checked")){$("#billing_address").hide();$.address("disable_billing");$.address("shipping_to_billing")}})},bind_events:function(){$("#shipping_address select").off().on("change",function(e){if($("#billing_same").prop("checked"))$.address("shipping_to_billing")});$("#shipping_address input").off().on("change",function(){if($("#billing_same").prop("checked"))$.address("shipping_to_billing")});$("#billing_same").off().on("change",function(){var on=$(this).prop("checked");if(on){$.address("disable_billing");$.address("shipping_to_billing");$("#billing_address").slideUp()}else{$.address("enable_billing");$("#billing_address").slideDown()}});$("#shipping_dropdown").off().on("change",function(){var address_book_id=$(this).val();$.address("populate_shipping",address_book_id).then(function(){if(!$("#billing_same").prop("checked"))return;$("#billing_dropdown").val(address_book_id);$.address("populate_billing",address_book_id);$.address("shipping_to_billing")})});$("#billing_dropdown").off().on("change",function(){var address_book_id=$(this).val();$.address("populate_billing",address_book_id)});$("#sa_zone").off().on("change",function(){$("#sa_city").sfeutil("populate_city",$(this));if(!$("#billing_same").prop("checked"))return;$.address("shipping_to_billing")});$("#sa_country").off().on("change",function(){var country=$(this).val();$("#sa_zone").sfeutil("populate_zones",country).then(function(){if(!$("#billing_same").prop("checked"))return;$("#ba_zone").sfeutil("populate_zones",country).then(function(){$.address("shipping_to_billing")})})});$("#ba_country").off().on("change",function(){$("#ba_zone").sfeutil("populate_zones",$(this).val())})},populate_shipping:function(id){var address,defer;defer=$.Deferred();if(-1==id){$.address("clear_shipping");return defer}address=address_book[id];$("#sa_name").val(address.name.replace(/&quot;/g,'"'));$("#sa_company").val(address.company.replace(/&quot;/g,'"'));$("#sa_street_address").val(address.street_address.replace(/&quot;/g,'"'));$("#sa_street_address2").val(address.street_address2.replace(/&quot;/g,'"'));$("#sa_city").val(address.city.replace(/&quot;/g,'"'));$("#sa_zone").val(address.state.replace(/&quot;/g,'"'));$("#sa_postcode").val(address.postcode.replace(/&quot;/g,'"'));$("#sa_country").val(address.country_id);if(address.po_box==true){$("#sa_po_box").prop("checked",true)}else{$("#sa_po_box").prop("checked",false)}$("#sa_zone").sfeutil("populate_zones",$("#sa_country").val(),address.zone_id,address.state.replace(/&quot;/g,'"')).then(function(){defer.resolve()});return defer.promise()},populate_billing:function(id){var address,defer;defer=$.Deferred();if(-1==id){$.address("clear_billing");return}address=address_book[id];$("#ba_name").val(address.name.replace(/&quot;/g,'"'));$("#ba_company").val(address.company.replace(/&quot;/g,'"'));$("#ba_street_address").val(address.street_address.replace(/&quot;/g,'"'));$("#ba_street_address2").val(address.street_address2.replace(/&quot;/g,'"'));$("#ba_city").val(address.city.replace(/&quot;/g,'"'));$("#ba_postcode").val(address.postcode.replace(/&quot;/g,'"'));$("#ba_country").val(address.country_id);$("#ba_zone").sfeutil("populate_zones",$("#ba_country").val(),address.zone_id,address.state.replace(/&quot;/g,'"')).then(function(){defer.resolve()})},shipping_to_billing:function(){var saCountry,saZonesCopy;saCountry=$("#sa_country").val();$("#ba_name").val($("#sa_name").val());$("#ba_company").val($("#sa_company").val());$("#ba_street_address").val($("#sa_street_address").val());$("#ba_street_address2").val($("#sa_street_address2").val());$("#ba_city").val($("#sa_city").val());$("#ba_postcode").val($("#sa_postcode").val());$("#ba_country").val(saCountry);saZonesCopy=$("#sa_zone > option").clone();$("#ba_zone").empty().append(saZonesCopy).val($("#sa_zone").val());$.address("bind_events")},clear_shipping:function(id){$("#sa_city").sfeutil("populate_city");$('#shipping_address input[type="text"]').val("");$("#shipping_address select .choose_zone").prop("selected",true)},clear_billing:function(id){$('#billing_address input[type="text"]').val("");$("#billing_address select .choose_zone").prop("selected",true)},enable_billing:function(id){$("#billing_dropdown").prop("disabled",false);$("#billing_address :input").prop("disabled",false);$.address("clear_billing")},disable_billing:function(id){$.address("clear_billing");$("#billing_dropdown").prop("disabled",true).val(-1);$("#billing_address :input").prop("disabled",true)}};$.address=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on $.address")}};$("html").on("loaded",".orders-address",function(){$.address()})})(jQuery);(function($){var methods={render:function(){$(".sfedate").each(function(iter,item){var $item=$(item);if(!$item.hasClass("rendered")){$item.html(strftime("%B %d, %Y %H:%M %Z",new Date($(item).attr("data-date")*1e3)));$item.addClass("rendered")}})}};$.fn.sfedate=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.sfedate")}};$("html").on("loaded",function(){$("#airlock").sfedate("render")})})(jQuery);function onYoutubePlayerStateChange(e){e["data"]==YT.PlayerState.PLAYING&&setTimeout(onYoutubePlayerPercent,1e3,e["target"]);var video_data=e.target["getVideoData"](),label=video_data.video_id+":"+video_data.title;if(e["data"]==YT.PlayerState.PLAYING&&YT.gtmLastAction=="p"){$(this).sfeutil("track_event","Video","play",label);YT.gtmLastAction=""}if(e["data"]==YT.PlayerState.PAUSED){$(this).sfeutil("track_event","Video","pause",label);YT.gtmLastAction="p"}}function onYoutubePlayerPercent(e){if(e["getPlayerState"]()==YT.PlayerState.PLAYING){var t=e["getDuration"]()-e["getCurrentTime"]()<=1.5?1:(Math.floor(e["getCurrentTime"]()/e["getDuration"]()*4)/4).toFixed(2);if(t>0&&t>e["lastP"]){var video_data=e["getVideoData"](),label=video_data.video_id+":"+video_data.title;$(this).sfeutil("track_event","Video",t*100+"%",label)}e["lastP"]=t;e["lastP"]!=1&&setTimeout(onYoutubePlayerPercent,1e3,e)}}(function($){var cur_offset=0,cur_url="",cur_total=null,cur_playlist="",last_url=null,video_time;var maximized=false,loading=false,find_video=null,play_video=false,autoplay=false;var methods={init:function(options){$(".feed-source").each(function(index,src){$.feeds("populate",src)})},populate:function(src){var target=$(src).parents(".feed").get(0);$.ajax({type:"GET",url:src.href+"?concise=yep&count=10",dataType:"xml",error:function(e,txt,error){console.log("Unable to load feed, Incorrect path or invalid feed")},success:function(xml){var values=$(xml).find("entry");var $ul=$("<ul>",{style:"display: none;"});$.each(values,function(index,item){$item=$(item);$ul.append($("<li>").append($("<a>",{href:$item.find("link").attr("href")}).html($item.find("title").text())))});$(target).append($ul);$ul.fadeIn()}})}};$.feeds=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.feeds")}};$("html").on("loaded",".feeds-index",function(){$.feeds()})})(jQuery);(function($){var methods={init:function(options){var window_width=$(window).width();$('a[href="#description-tab"]').tab("show");$(".product-help-tabs>li>a:first").tab("show");var imageCarouselSelector="#images-carousel",playerIndexDataKey="ytplayer-index",boundVideoSelector="[data-"+playerIndexDataKey+"]",$images_carousel=$(imageCarouselSelector);function pausePlayer(){var $this=$(this),index=$this.data(playerIndexDataKey);if(gtmYTListeners&&index!==undefined&&gtmYTListeners[index].pauseVideo){gtmYTListeners[index].pauseVideo()}}function handleSlide(e){var $target=$(e.target),$playerElements=$target.find(boundVideoSelector);$playerElements.each(pausePlayer)}if($images_carousel.length>0){$images_carousel.on("slide.bs.carousel",handleSlide);$images_carousel.on("slid.bs.carousel",function(e){if($("#images-carousel .active .DDD_container").length){$("#images-carousel .active .DDD_container").DDD("onResize")}});if(window_width<768){var hammertime=new Hammer(document.getElementById("images-carousel"));hammertime.on("swipeleft",function(ev){$images_carousel.carousel("next");ev.stopPropagation()});hammertime.on("swiperight",function(ev){$images_carousel.carousel("prev");ev.stopPropagation()})}else{$images_carousel.on("click",".images-maximize-launch",function(e){e.preventDefault();e.stopPropagation();var $col_images=$(".col-images"),$col_description=$(".col-description"),col_description_expanded_classes="col-md-offset-5 col-sm-offset-5",col_images_expanded_classes="col-images col-md-12 col-sm-12 col-xs-12 carousel-expanded",col_images_standard_classes="col-images col-md-5 col-sm-6 col-xs-12";$images_carousel.toggleClass("maximize");if($images_carousel.hasClass("maximize")){$col_description.addClass(col_description_expanded_classes);$col_images.attr("class",col_images_expanded_classes)}else{$col_description.removeClass(col_description_expanded_classes);$col_images.attr("class",col_images_standard_classes)}$("#images-carousel .DDD_container").each(function(k,ddd){ddd=$(ddd).data("DDD");if(ddd)ddd.toggleMaximize($images_carousel.hasClass("maximize"))})});$(document).on("keyup",function(e){if($images_carousel.is(":visible")){if(e.keyCode==39)$images_carousel.carousel("next");else if(e.keyCode==37)$images_carousel.carousel("prev")}})}}},add_to_cart:function(){$(".cart-form").on("submit",function(e){e.preventDefault();var $form=$(this),action=$form.find('input[name="action"]').val(),product_id=$form.find('input[name="id"]').val(),qty=$form.find('input[name="qty"]').val();$(this).cart(action,product_id,qty)})},load_quantity_toggle:function(){var $quantity=$("#quantity-discounts"),is_employee=$quantity.hasClass("role-employee"),is_distro=$quantity.hasClass("role-distributor");if(!(is_employee||is_distro)){$quantity.hide()}$quantity.removeClass("hidden");$(".quantity_discounts_link").on("click",function(e){e.preventDefault();var $link=$(this);$quantity.slideToggle("slow",function(){if($link.hasClass("mobile")&&$quantity.is(":visible")){var position=$link.offset().top;position=position-position/6;$("html, body").animate({scrollTop:position},"slow")}})})}};if(window.location.hash.substring(0,9)==="#comment-"){$('[href="#comments-tab"]').trigger("click")}$.product=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.product")}};$("html").on("loaded",".products-view",function(){$.product();$.product("load_quantity_toggle");$.product("add_to_cart");$('[data-toggle="tooltip"]').tooltip({container:"body"});if($(".pricing .sfe-icon-stock-out").length)$(this).sfeutil("track_event","Product View","out_of_stock")})})(jQuery);(function($,window,document){"use strict";var $document=$(document);$document.on("click",".tile-carousel .product-tile a.thumb, .tile-carousel .product-tile .title a",function(event){$(event.target).sfeutil("track_event","Product Carousel","click_product_tile")});$document.on("click",".tile a",function(event){var $target,$tile,lastLetter,docType,id,query;if(window.location.search.includes("term")){$target=$(event.target);$tile=$target.closest(".tile");docType=$target.closest(".tab-pane").attr("id");id=$tile.data("id");query=window.location.search.split("=")[1];if(query.includes("&")){query=query.split("&")[0]}if(!docType&&$tile.hasClass("retired")){docType="products"}if(docType){lastLetter=docType.charAt(docType.length-1);if(lastLetter!=="s"){docType+="s"}if(id&&query){$.shared("record_swiftype_clickthrough",docType,id,query,false)}}}});function init(){$(".index-index .featured-content").on("click",".item a",function(event){$(event.target).sfeutil("track_event","Featured Content","click_featured_content")})}$(init)})(jQuery,window,document);!function($){"use strict";var Wishlist=function(element,options){this.$element=$(element);this.$dropdown=$(element).siblings(".dropdown-menu");this.$product_id=$(element).data("productId");this.$source=$(element).data("source");this.options=$.extend({},$.fn.wishlist.defaults,options)};Wishlist.prototype={constructor:Wishlist,toggle:function(){if(!SFECONFIG.auth){this.$element.dropdown("toggle");this.login();return false}this.populate()},populate:function(){var $this=this;this.clear();this.loading();var args={product_id:this.$element.data("product-id")};$.getJSON("/wish_lists/index.json",args).done(function(data){$this.clear();$.each(data.wish_lists,function(id,list){var link_text='<span class="glyphicon glyphicon-unchecked"></span>';var className="no";if(list.has_product){link_text='<span class="glyphicon glyphicon-check"></span>';className="yes"}link_text+=" "+list.title;var link=$("<a/>").attr("class",className).attr("href","#").attr("role","menuitem").attr("data-wishlist-id",list.id).html(link_text);var item=$("<li/>").attr("role","presentation").append(link);$this.$dropdown.append(item);$this.observe(link)});$this.insert_view_link();$this.insert_create_link()})},clear:function(){this.$dropdown.empty()},loading:function(){var img=$("<img>").attr("src",SFECONFIG.http_static+"/images/framework/red-loader.gif"),li=$("<li>").addClass("loading").append(img);this.$dropdown.append(li)},insert_view_link:function(){var form=$("<a class='view-wishlist' href='"+SFECONFIG.commerce_server+"/wish_lists'><strong>View my wishlists</strong></a>");this.$dropdown.append($("<li role='menuitem'></li>").append(form))},insert_create_link:function(){var form=$("<form>        <input required class='form-control input-sm' name='wishlist-name' type='text' placeholder='New List Name'>        </form>");var $that=this;form.on("submit",function(e){e.preventDefault();$that.$dropdown.parent().removeClass("open");$that.create()});this.$dropdown.append($("<li role='menuitem'></li>").append(form))},observe:function(el){var $this=this;el.on("click",function(e){e.preventDefault();e.stopPropagation();$this.$dropdown.parent().removeClass("open");if(el.hasClass("yes")){$this.remove_item(el.data("wishlistId"))}else{$this.add_item(el.data("wishlistId"))}})},add_item:function(wishlist_id){var quantity=$("#add_qty_"+this.$product_id).val();if(quantity===undefined)var quantity=$("#ib_qty_"+this.$product_id).val();if(quantity===undefined)quantity=1;var request={id:wishlist_id,product_id:this.$product_id,quantity:quantity};var $this=this;$.post("/wish_lists/add.json",request).done(function(result){if(!result.status){alert("An error occurred, please try again");return false}$this.success(result.wish_list.id)})},remove_item:function(wishlist_id){var request={id:wishlist_id,product_id:this.$product_id};var $this=this;$.post("/wish_lists/remove.json",request).done(function(result){if(!result.status){alert("An error occurred, please try again");return false}$this.success(0)})},success:function(id){if(this.$element.data("action")=="move")this.$element.cart("remove",this.$product_id);if(id>0){this.$element.addClass("yes")}else{this.$element.removeClass("yes")}$(this).sfeutil("track_event","Wishlist",this.$source,"product "+this.$product_id)},create:function(){var quantity=$("#add_qty_"+this.$product_id).val(),request={title:$("input[name^=wishlist-name]").val()};var $this=this;$.post("/wish_lists/create.json",request).done(function(result){if(!result.status){alert("An error occurred, please try again");return false}$this.add_item(result.wish_list.id)})},login:function(){var msg="In order to add an item to a wishlist, you need to log in to your account.";var modal=$("#login_modal");modal.find(".modal-header-msg").html(msg);modal.modal("show")}};$.fn.wishlist=function(option){return this.each(function(){var $this=$(this),data=$this.data("wishlist"),options=typeof option=="object"&&option;if(!data)$this.data("wishlist",data=new Wishlist(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})};$.fn.wishlist.defaults={};$.fn.wishlist.Constructor=Wishlist;var $document=$(document);$(function(){$document.on("shown.bs.dropdown",".wishlist-dropdown",function(e){$(e.currentTarget).find(".dropdown-toggle").first().wishlist("toggle")})})}(window.jQuery);!function($){"use strict";var Autonotify=function(element,options){this.$element=$(element);this.$product_id=$(element).data("productId");this.$customer_email=$(this.$element).data("customerEmail");this.options=$.extend({},$.fn.autonotify.defaults,options)};Autonotify.prototype={constructor:Autonotify,toggle:function(){if(!SFECONFIG.auth){this.login();return false}this.show_modal()},show_modal:function(){var modal=$("<div class='modal fade wishlist'>          <div class='modal-dialog'>            <div class='modal-content'>              <form>                <h3>Autonotify                  <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>                </h3>                <p>                  Sign up to recieve a notification when this product comes back into stock.                  The notification will be sent to the email address below. To change it, please                  <a href='https://www.sparkfun.com/account'>edit your profile</a>                </p>                <div class='form-group'>                  <input tabindex='1' type='text' class='form-control' id='autonotify-email-address' value='"+this.$customer_email+"' readonly/>                  <input type='submit' class='btn btn-primary' value='Autonotify' />                </div>              </form>            </div>          </div>        </div>");var $that=this;modal.find("form").on("submit",function(e){e.preventDefault();modal.modal("hide");$that.create()});modal.modal().on("hidden",function(){this.remove()});$(document.body).append(modal);modal.modal("show")},create:function(){var request={id:this.$product_id,email:$("#autonotify-email-address").val()};var $that=this;$.post("/autonotify/add.json",request).done(function(result){if(!result.status){alert("An error occurred, please try again");return false}$that.$element.replaceWith($("<strong>You have requested an <a href='/emails'>autonotification</a> for this product.</strong>"))})},login:function(){var msg="In order to be notified when this item becomes available, you need to log in to your account.";var modal=$("#login_modal");modal.find(".modal-header-msg").html(msg);modal.modal("show")}};$.fn.autonotify=function(option){return this.each(function(){var $this=$(this),data=$this.data("autonotify"),options=typeof option=="object"&&option;if(!data)$this.data("autonotify",data=new Autonotify(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})};$.fn.autonotify.defaults={};$.fn.autonotify.Constructor=Autonotify;$(document).on("click.button.data-api","[data-toggle^=autonotify]",function(e){var $button=$(e.target);$button.autonotify("toggle");e.preventDefault()})}(window.jQuery);!function($){"use strict";var Notify=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.notify.defaults,options)};Notify.prototype={constructor:Notify,toggle:function(){this.show_modal()},show_modal:function(){var modal=$("<div class='modal fade notify'>          <div class='modal-dialog'>            <div class='modal-content'></div>          </div>        </div>");$(document.body).append(modal);modal.modal({remote:this.$element.closest("a").attr("href")});modal.modal("show")}};$.fn.notify=function(option){return this.each(function(){var $this=$(this),data=$this.data("notify"),options=typeof option=="object"&&option;if(!data)$this.data("notify",data=new Notify(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})};$.fn.notify.defaults={};$.fn.notify.Constructor=Notify;$(document).on("click.button.data-api","[data-toggle^=notify]",function(e){var $button=$(e.target);$button.notify("toggle");e.preventDefault()})}(window.jQuery);(function($){var toggleFullStar=function($el,fullstate){if(typeof fullstate!=="undefined"){if(fullstate){$el.addClass("sfe-icon-star-full").removeClass("sfe-icon-star-empty")}else{$el.addClass("sfe-icon-star-empty").removeClass("sfe-icon-star-full")}}else{$el.toggleClass("sfe-icon-star-full sfe-icon-star-empty")}};var methods={helpful:function(id){$.post("/reviews/"+id+"/helpful.json",function(data){if(!data.status){alert(data.message);return}$("#product-review-"+id).find(".helpfulness").html("<i>You found this review <b>helpful</b></i>")})},unhelpful:function(id){$.post("/reviews/"+id+"/unhelpful.json",function(data){if(!data.status){alert(data.message);return}$("#product-review-"+id).find(".helpfulness").html("<i>You found this review <b>unhelpful</b></i>")})},hide:function(id){$.post("/reviews/"+id+"/hide.json",function(data){if(!data.status){alert(data.message);return}$("#product-review-"+id).addClass("moderated");$("#review-show-"+id).show();$("#review-hide-"+id).hide()})},show:function(id){$.post("/reviews/"+id+"/show.json",function(data){if(!data.status){alert(data.message);return}$("#product-review-"+id).removeClass("moderated");$("#review-show-"+id).hide();$("#review-hide-"+id).show()})},show_edit:function(id){var review_form=$("#review-edit-form-"+id),product_review=$("#product-review-"+id);if(review_form.length){product_review.find(".review-rating").hide();product_review.find(".review-text").hide();review_form.show();review_form.find("textarea").trigger("focus");return}var stars=product_review.find(".product-rating .sfe-icon-star-full").length;$.get("/reviews/"+id+".json",function(data){if(!data.status){alert(data.message);return}$form=$('<form action="/reviews/update" id=review-edit-form-'+id+">").addClass("review-reply-form clearfix");$form.append($("<input type=hidden name=review_id>").val(id));$form.append($("<input type=hidden name=stars>").val(stars));$form.append($('<p><input class=form-control name=review_title required value="'+data.review.title+'"></p>'));$form.append($("<p><textarea class=form-control name=review_text rows=4 required>"+data.review.text+"</textarea></p>"));$form.append($('<p class=pull-right><a class="review-edit-cancel" class="btn btn-small">cancel</a> <input type=submit value=Save class="btn btn-primary"></p>'));product_review.find(".review-rating").hide();product_review.find(".review-text").hide();product_review.append($form);review_form=$form;product_review.find(".product-rating span").on("mousenter mouseleave",function(e){if(review_form.is(":visible")){toggleFullStar($(e.target),true);toggleFullStar($(e.target).prevAll(),true);toggleFullStar($(e.target).nextAll(),false)}}).on("click",function(e){if(review_form.is(":visible")){stars=$(e.target).prevAll().length+1}});product_review.find(".product-rating").on("mouseout",function(){if(review_form.is(":visible")){var bstar=$(this).find("span:nth-child("+stars+")");toggleFullStar(bstar,true);toggleFullStar(bstar.prevAll(),true);toggleFullStar(bstar.nextAll(),false);review_form.find('[name="stars"]').val(stars)}});review_form.find(".review-edit-cancel").on("click",function(e){e.preventDefault();product_review.find(".review-rating").show();product_review.find(".review-text").show();review_form.hide()});$form.on("submit",function(e){$(this).reviews("post_edit",e)});$form.find("textarea").trigger("focus")})},post_edit:function(e){e.preventDefault();$this=$(this);$this.find('input[type="submit"]').attr("disabled","disabled");$.post($this.attr("action")+".json",$this.serialize(),function(data){if(!data.status){alert(data.message);return}window.location.reload()})},show_reply_form:function(id){var $form=$("#review-reply-form-"+id);if($form.length>0){$form.show();$form.find("textarea").trigger("focus");return}$form=$('<form action="/reviews/reply" id=review-reply-form-'+id+">").addClass("review-reply-form clearfix");$form.append($("<input type=hidden name=review_id>").val(id));$form.append($('<p><textarea class=form-control name=review_reply_text rows=4 placeholder="Reply here..." required></textarea></p>'));$form.append($('<p class=pull-right><a id="review-reply-cancel-'+id+'" class="btn btn-small">cancel</a> <input type=submit value=Reply class="btn btn-primary"></p>'));$("#product-review-"+id).append($form);$("#review-reply-cancel-"+id).on("click",function(e){e.preventDefault();$form.hide()});$form.on("submit",function(e){$(this).reviews("post_reply",e)});$form.find("textarea").trigger("focus")},post_reply:function(e){e.preventDefault();$this=$(this);$this.find('input[type="submit"]').attr("disabled","disabled");$.post($this.attr("action")+".json",$this.serialize(),function(data){if(!data.status){alert(data.message);return false}window.location.reload()}).fail(function(){alert("we were unable to save your reply, please try again in a few minutes")})},edit_reply:function(review_id,reply_id,text){var id=review_id;if(id){$form=$("#review-reply-form-"+id);if($form.length>0){$form.show()}else{$form=$('<form action="/reviews/editreply" id=review-reply-form-'+id+">").addClass("review-reply-form clearfix");$form.append($("<input type=hidden name=review_id>").val(id));$form.append($("<input type=hidden name=reply_id>").val(reply_id));$form.append($("<p><textarea class=form-control name=review_reply_text rows=4 required>"+text+"</textarea></p>"));$form.append($('<p class=pull-right><a id="review-reply-cancel-'+id+'" class="btn btn-small">cancel</a> <input type=submit value=Save class="btn btn-primary"></p>'));$("#product-review-"+id).append($form)}$form.find("textarea").trigger("focus");$("#review-reply-cancel-"+id).on("click",function(e){e.preventDefault();$("#review-reply-form-"+id).hide()});$form.on("submit",function(e){$(this).reviews("update_reply",e)});$form.find("textarea").trigger("focus")}},update_reply:function(e){e.preventDefault();$this=$(this);$this.find('input[type="submit"]').attr("disabled","disabled");$.post($this.attr("action")+".json",$this.serialize(),function(data){if(!data.status){alert(data.message);return}window.location.reload()})},hide_reply:function(review_id,reply_id){$.post("/reviews/hidereply.json",{review_id:review_id,reply_id:reply_id},function(data){if(!data.status){alert(data.message);return}$("#product-review-reply-"+reply_id).addClass("moderated");$("#review-reply-show-"+reply_id).show();$("#review-reply-hide-"+reply_id).hide()})},show_reply:function(review_id,reply_id){$.post("/reviews/showreply.json",{review_id:review_id,reply_id:reply_id},function(data){if(!data.status){alert(data.message);return}$("#product-review-reply-"+reply_id).removeClass("moderated");$("#review-reply-show-"+reply_id).hide();$("#review-reply-hide-"+reply_id).show()})}};$.fn.reviews=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.reviews")}};$("html").on("loaded",".products-review",function(){$(".star-rate-widget select").barrating();$('#review-form input[name="title"]').on("keypress keydown keyup",function(e){if(e.keyCode==13){e.preventDefault();$('#review-form textarea[name="review_text"]').trigger("focus")}})});var $document=$(document),$reviews=$("#reviews .product-review").collapse({toggle:false}),star_index_attribute="data-star-index",$rating_filter_triggers=$(".rating-breakdown ["+star_index_attribute+"]").not("["+star_index_attribute+"=-1]"),$review_count_display=$(".review-filter-state"),$recap_all_display=$(".review-recap-all"),$recap_filtered_display=$(".review-recap-filtered"),filtered_class="filtered-out",hidden_class="hidden";$document.on("click.sfe","[data-review-helpful]",function(e){var $this=$(this),attr_val=$this.attr("data-review-helpful"),id_val=$this.attr("data-id");if("yes"===attr_val)$this.reviews("helpful",id_val);else if("no"===attr_val)$this.reviews("unhelpful",id_val);e.preventDefault()});$document.on("click.sfe","[data-action^=review-]",function(e){var $this=$(this),action_val=$this.attr("data-action"),id_val=$this.attr("data-id");if("review-edit"===action_val)$this.reviews("show_edit",id_val);else if("review-reply"===action_val)$this.reviews("show_reply_form",id_val);else if("review-hide"===action_val)$this.reviews("hide",id_val);else if("review-edit-reply"===action_val)$this.reviews("edit_reply",id_val,$this.attr("data-reply-id"),$this.attr("data-response"));else if("review-show-reply"===action_val)$this.reviews("show_reply",id_val,$this.attr("data-reply-id"));else if("review-hide-reply"===action_val)$this.reviews("hide_reply",id_val,$this.attr("data-reply-id"));else $this.reviews("show",id_val);e.preventDefault()});$document.on("click.sfe",".rating-breakdown [data-star-index]",function(e){var $this=$(this),star_index=$this.attr(star_index_attribute),star_rating=parseInt(star_index,10)+1,review_selector="[data-review-rating="+star_rating+"]";if(star_rating){$reviews.not(review_selector).collapse("hide");$reviews.filter(review_selector).collapse("show");$rating_filter_triggers.addClass(filtered_class);$this.removeClass(filtered_class);$review_count_display.text(star_rating);$recap_all_display.addClass(hidden_class);$recap_filtered_display.removeClass(hidden_class);return}$reviews.not(".in").collapse("show");$rating_filter_triggers.removeClass(filtered_class);$recap_all_display.removeClass(hidden_class);$recap_filtered_display.addClass(hidden_class)})})(jQuery);$(document).on("click.sfe","[data-tip-helpful]",function(e){e.preventDefault();var $this=$(this);var id=$this.attr("data-id");var $helpfulnessEl=$("#product-tip-"+id).find(".helpfulness");if($this.attr("data-tip-helpful")=="yes"){$.post("/support_tips/"+id+"/helpful.json",function(data){if(JSON.parse(data).status==true){$helpfulnessEl.html("<em>You found this tip <strong>helpful</strong></em>")}else{$helpfulnessEl.prepend("<strong>There was an error saving your response.  Please try again.</strong>")}})}else if($this.attr("data-tip-helpful")=="no"){$.post("/support_tips/"+id+"/unhelpful.json",function(data){if(JSON.parse(data).status==true){$helpfulnessEl.html("<em>You found this tip <strong>unhelpful</strong></em>")}else{$helpfulnessEl.prepend("<strong>There was an error saving your response.  Please try again.</strong>")}})}});!function($){"use strict";var Skills=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.skills.defaults,options)};Skills.prototype={constructor:Skills,toggle:function(){this.show_modal()},show_modal:function(){var modal=$("<div class='modal fade skills'>          <div class='modal-dialog'>            <div class='modal-content'></div>          </div>        </div>");$(document.body).append(modal);modal.modal({remote:this.$element.closest("a").attr("href")});modal.modal("show")}};$.fn.skills=function(option){return this.each(function(){var $this=$(this),data=$this.data("skills"),options=typeof option=="object"&&option;if(!data)$this.data("skills",data=new Skills(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})};$.fn.skills.defaults={};$.fn.skills.Constructor=Skills;$(document).on("click.button.data-api","[data-toggle^=skills]",function(e){var $button=$(e.target);$button.skills("toggle");e.preventDefault()})}(window.jQuery);(function($){var next_page=false,cur_offset=0,cur_url="",cur_total=null,cur_playlist="",last_url=null,video_time;var maximized=false,loading=false,find_video=null,play_video=false,autoplay=false;var methods={init:function(options){$("body").append("<div id=shadow></div>");$("#shadow").css("height",$(document).height()).hide();$("#lightsToggle a,#shadow").on("click",function(e){e.preventDefault();$("#shadow").fadeToggle()});$("#maximize").on("click",function(e){e.preventDefault();if(maximized=!maximized){$(this).find("a").html('<span class="glyphicon glyphicon-resize-small"></span> Minimize');$("#videos").toggleClass("col-md-9",500);$("#videos-nav-wrap").toggleClass("col-md-push-9");$("#videos-list-wrap").toggleClass("col-md-pull-3")}else{$(this).find("a").html('<span class="glyphicon glyphicon-resize-full"></span> Maximize');$("#videos").toggleClass("col-md-9",500);$("#videos-nav-wrap").toggleClass("col-md-push-9");$("#videos-list-wrap").toggleClass("col-md-pull-3")}});$(document).on("keydown",function(e){if(e.target.nodeName!=="INPUT"&&e.target.nodeName!=="TEXTAREA"&&!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey){if(e.keyCode===27){$("#shadow").fadeOut()}else if(e.keyCode===74){e.preventDefault();$("#playlist a.current").closest("li").next("li").find("a").trigger("click")}else if(e.keyCode===76){e.preventDefault();$(".video-tile.active").next().trigger("click")}else if(e.keyCode===75){e.preventDefault();$("#playlist a.current").closest("li").prev("li").find("a").trigger("click")}else if(e.keyCode===72){e.preventDefault();$(".video-tile.active").prev().trigger("click")}}});$("#video_list").on("click",".video-tile",function(e){autoplay=true;$("body,html").stop().animate({scrollTop:0},1e3);location.hash=$("#playlist li a.current").attr("href")+"/"+$(this).attr("video")});$("#playlist li a").on("click",function(e){e.preventDefault();find_video=null;play_video=false;$("#search").val("");if($(this).hasClass("current"))return;location.replace("videos#"+$(this).attr("href"));window.scrollTo(0,0)});$("#load_description span").on("click",function(){$("#description_container").html($("#loading").html());$.videos("loadVideo",$(".video-tile.active").data("video").id,true);$("#load_description").hide()});$("#order").on("change",function(){$.videos("loadVideosList")});$("#search").on("keypress",function(e){if(e.which==13){e.preventDefault();$("#playlist li a.current").removeClass("current");$("#playlist li:first a").addClass("current");$.videos("loadVideosList")}}).on("focusout",function(e){$("#playlist li a.current").removeClass("current");$("#playlist li:first a").addClass("current");$.videos("loadVideosList")});$("#load_more .btn").on("click",function(){if(!loading&&cur_offset<cur_total){$("#load_more").hide();$.videos("loadVideosList",false)}});function hashChange(){var hashloc=location.hash.slice(1).split("/");if(hashloc[0])playlist=decodeURIComponent(hashloc[0]).replace(/[^a-zA-Z0-9_-]/gm,"");else playlist="all";var active=$('#playlist a[href="'+playlist+'"]');if(!active.length)active=$("#playlist a:first");if($("#playlist li a.current")[0]!=active[0]){$("#playlist li a.current").removeClass("current");active.addClass("current")}if(hashloc[1]){find_video=decodeURIComponent(hashloc[1]).replace(/[^a-zA-Z0-9_-]/gm,"");play_video=true}if(hashloc[2])video_time=decodeURIComponent(hashloc[2]).replace(/[^0-9]/gm,"");if(cur_playlist!=playlist){$.videos("loadVideosList")}else{$.videos("playVideoCheck")}cur_playlist=playlist}if("onhashchange"in window){$(window).on("hashchange",hashChange).trigger("hashchange")}else{var lastHash="";setInterval(function(){if(lastHash!=location.hash)hashChange();lastHash=location.hash},100)}},loadVideo:function(video,description_only){if(typeof video!=="object"){if(/^[a-zA-Z0-9_-]{11}$/m.test(video)){$.ajax("https://www.googleapis.com/youtube/v3/videos?part=snippet&id="+video+"&key=AIzaSyBjKmUr8uLyF7E2Ce-V7Kw3zapdfqa5Br0",{dataType:"jsonp",success:function(response){var video_obj=response.items[0].snippet;video_obj.id=video;if(description_only===true)return $.videos("displayDescription",video_obj.description);$.videos("displayVideo",video_obj,false)}})}else{error()}}else{$.videos("displayVideo",video)}},displayVideo:function(video,truncated){var truncated=truncated!==false?true:false;var getvars=[];getvars.push("autohide=1&border=0&wmode=opaque&enablejsapi=1");if(autoplay===true){getvars.push("autoplay=1")}if(video_time>0){getvars.push("start="+video_time);video_time=null}var code='<iframe src="//www.youtube.com/embed/'+video.id+"?"+getvars.join("&")+'" frameborder="0" allowfullscreen></iframe>';var iframe=document.createElement("div");iframe.innerHTML=code;iframe=iframe.firstChild;$("#video_container").html(iframe);if(YT.Player){gtmYTListeners.push(new YT.Player(iframe,{events:{onStateChange:onYoutubePlayerStateChange}}));YT.gtmLastAction="p"}$("#title_container").html(video.title);$.videos("displayDescription",video.description,truncated);$(".video-tile.active").removeClass("active");$('.video-tile[video="'+video.id+'"]').addClass("active");play_video=false;autoplay=false;video_time=null},displayDescription:function(description,truncated){if(cur_playlist!="all"||!truncated){$("#load_description").hide();description=$.videos("linkify",description)}else{$("#load_description").toggle(description.slice(-3)==="...")}if(maximized)setTimeout(function(){$("#playlist").css({marginTop:playlistPosition()+"px"})},1);description=$.videos("nl2br",description);$("#description_container").html(description)},loadVideosList:function(clear){loading=true,select_first=false;$("#loading").show();if(clear=clear!==undefined?clear:true){cur_total=null;cur_offset=0;next_page=false}var url="https://www.googleapis.com/youtube/v3/search";var params=["part=snippet","channelId=UCKPLvnWhN1Qo51IDDZsmq1g"];if($("#playlist a.current").attr("href")=="staff_picks"){url="/videos/staff_picks.json";$("#order").prop("disabled",true)}else{var playlist=$("#playlist a.current").data("playlist");$("#order").prop("disabled",false);if(playlist!==undefined){$("#order").prop("disabled",true);url="https://www.googleapis.com/youtube/v3/playlistItems";params=["part=snippet","playlistId="+playlist]}params.push("order="+$("#order").val())}if($("#search").val().length)params.push("q="+$("#search").val());if(next_page)params.push("pageToken="+next_page);params.push("key=AIzaSyBjKmUr8uLyF7E2Ce-V7Kw3zapdfqa5Br0");params.push("maxResults=24");url=url+"?"+params.join("&");if(url!=last_url){$.ajax(url,{dataType:"jsonp",success:function(response){if(clear)$("#video_list").empty();next_page=response.nextPageToken;if(response.items){cur_total=response.pageInfo.totalResults;if(clear&&find_video==null)select_first=true;for(var i=0;i<response.items.length;i++){var video_obj=response.items[i].snippet;if(video_obj.resourceId){video_obj.id=video_obj.resourceId.videoId}else{video_obj.id=response.items[i].id.videoId}$.videos("appendVideo",video_obj);if(select_first&&i==0)$.videos("loadVideo",video_obj)}}else{if(cur_offset==0){$("#video_list").append('<h2 style="text-align:center">No videos found</h2>')}next_page=false}$.videos("playVideoCheck");last_url=url;loading=false;$("#loading").hide();if(cur_offset<cur_total)$("#load_more").show()}})}else{$.videos("playVideoCheck");loading=false}},appendVideo:function(video){cur_offset++;if(video.title=="Private video"){return}var metaline="";if(video.duration){metaline='<p class="metaline">'+video.duration.toString().toHHMMSS()+"</p>"}var video_item=$('<div class="tile video-tile"></div>').html('<div class="thumb" style="background-image:url('+video.thumbnails.high.url+')"></div><h3 class="title">'+video.title+"</h3>"+metaline);video_item.data("video",{title:video.title,id:video.id,thumbnails:video.thumbnails,description:video.description}).attr("video",video.id);if(find_video==video.id){$.videos("foundVideoItem",video_item)}$("#video_list").append(video_item)},foundVideoItem:function($video_item){$(".video-tile.active").removeClass("active");$video_item.addClass("active");if(play_video)$.videos("loadVideo",$video_item.data("video"));find_video=null},playVideoCheck:function(){if(play_video&&find_video!==null){var video_item=$('.video-tile[video="'+find_video+'"]');if(video_item.length)$.videos("foundVideoItem",video_item);if(play_video)$.videos("loadVideo",find_video)}},playlistPosition:function(){var offset=509+$("#description_container").height()+$("#title_container").height();if($("#load_description").is(":visible"))offset+=40;return offset},error:function(e){$("#videos").parents(".row").html('<img src="img/video-error.gif"/><br/>Please refresh')},linkify:function(text){var urlPattern=/((?:https?:)?\/\/(?:www\.)?[a-zA-Z0-9-]{3,63}\.[a-zA-Z0-9-]{1,63})([a-zA-Z0-9-_\/\?\&\=\#\(\)\.\[\]\$\*\+\,\;\!\@\%]+)/gim;return text.replace(urlPattern,'<a href="$1$2">$1$2</a>')},nl2br:function(str,is_xhtml){var breakTag=is_xhtml||typeof is_xhtml==="undefined"?"<br />":"<br>";return(str+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+breakTag+"$2")}};$.videos=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.videos")}};$("html").on("loaded",".videos-index",function(){$.videos()})})(jQuery);(function($){function handleVideoDialogShow(e){var $dialog=$(this),$trigger=$(e.relatedTarget),title=$trigger.data("video-title"),embedUrl=$trigger.data("video-embed-url");$dialog.find(".modal-title").text(title);$dialog.find("iframe").attr("src",embedUrl)}function handleVideoDialogHide(e){var $dialog=$(this);$dialog.find(".modal-title").empty();$dialog.find("iframe").removeAttr("src")}function init(){$("#video-dialog").on({"show.bs.modal":handleVideoDialogShow,"hide.bs.modal":handleVideoDialogHide})}$(init)})(jQuery);(function($){var methods={check_status:function(ids){var time=1e3;var check=function(ids){$.ajax({type:"get",url:SFECONFIG.https_server+"/orders/status.json",data:{ids:ids}}).done(function(data){var processing_ids=[];var processed_orders=[];for(var i=0;i<data.length;i++){if(data[i].status==98){processing_ids.push(data[i].id)}else{processed_orders.push(data[i])}}if(processing_ids.length>0){time*=2;setTimeout(check,time,processing_ids)}var trackingAccumulator=[];if($(".js-new-invoice").hasClass("hide")){$(".js-new-invoice").removeClass("hide")}for(var i=0;i<processed_orders.length;i++){$("#js-new-invoice-"+processed_orders[i].orders_id).removeClass("hide");var row='<td><b><a href="/orders/'+processed_orders[i].orders_id+'">'+processed_orders[i].orders_id+"</a></b></td>";row+="<td>"+(processed_orders[i].can_flag?'<a class="btn btn-default" href="/orders/'+processed_orders[i].orders_id+'#problems">Need to change something?</a>':"")+"</td>";row+="<td><em>Just now</em></td>";row+="<td>"+processed_orders[i].shipping_name+"</td>";row+="<td>"+processed_orders[i].product_count+"</td>";row+="<td>"+processed_orders[i].unit_count+"</td>";row+="<td><span class=price>"+processed_orders[i].total+"</span></td>";row+="<td>"+(processed_orders[i].balance>0?"<span class=price>"+processed_orders[i].balance+"</span>":"")+"</td>";row+="<td>"+processed_orders[i].status_text+"</td>";row+='<td><a href="'+SFECONFIG.https_server+"/invoice/"+processed_orders[i].orders_id+'">invoice</a></td>';$("#order-row-"+processed_orders[i].orders_id).html(row);$("#airlock").currency("render");if(processed_orders[i].status==5)$("#exception_notice").slideDown();var total_revenue=parseFloat(processed_orders[i].subtotal)+parseFloat(processed_orders[i].tax)+parseFloat(processed_orders[i].shipping);ga("ecommerce:addTransaction",{id:String(processed_orders[i].orders_id),affiliation:processed_orders[i].customers_role,revenue:String(total_revenue),shipping:String(processed_orders[i].shipping),tax:String(processed_orders[i].tax)});$.each(processed_orders[i].products,function(i,el){ga("ecommerce:addItem",{id:String(processed_orders[i].orders_id),name:el.products_name,sku:el.products_model,price:String(el.final_price),quantity:String(el.products_quantity)});trackingAccumulator.push({id:String(el.products_model).substring(4),price:Number.parseFloat(el.final_price),quantity:Number.parseInt(el.products_quantity,10)})});ga("ecommerce:send");window.criteo_q=window.criteo_q||[];window.criteo_q.push({event:"trackTransaction",id:String(processed_orders[i].orders_id),item:trackingAccumulator})}})};setTimeout(check,time,ids)}};$.fn.order=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on $.order")}};$("html").on("loaded",".orders-index-new",function(){var new_orders=$("#new_orders_id").val().split(",");$("#new_orders_id").order("check_status",new_orders)})})(jQuery);!function($){"use strict";var threeLibrariesLoaded=false;var RENDER_SCALE=100;var REV_RENDER_SCALE=.01;var shiftDown;$(document).on("keydown",function(e){shiftDown=e.keyCode==16}).on("keyup",function(e){shiftDown=e.keyCode==16?false:shiftDown});var DDD=function(element,options){this.$element=$(element);this.container=this.$element[0];this.options=$.extend({},$.fn.DDD.defaults,options);this.options.models=this.$element.data("models");this.initThreeJS()};DDD.prototype={$element:null,container:null,stats:null,container_width:null,container_height:null,camera:null,cameraFov:null,cameraAspect:null,scene:null,worldScene:null,renderer:null,canvasFallback:false,raycaster:null,skyDome:null,light:null,controls:null,firstModel:false,models:[],coinForScale:null,bananaForScale:null,cubeForScale:null,productForScale:null,objectColor:"#ff5533",objectMaterial:null,transformControls:null,transform:0,edgeSelection:false,selectedEdges:[],controlElements:null,controlInfoElement:null,loaderElement:null,maxBtn:null,backgroundTopColor:"#000000",backgroundBottomColor:"#101010",grid:null,gridSize:"100mm",gridSpacing:"10mm",initThreeJS:function(){var self=this;this.loaderElement=$('<div class="threed-loader">          <span class="threed-loader-spin">            <div class="threed-loader-front">              <span class="sfe-icon-flame"></span>            </div>            <span class="sfe-icon-flame threed-loader-back"></span>          </span>          <span class="threed-loader-text">Loading ...</span>        </div>').appendTo(this.container);if(!threeLibrariesLoaded){$.getScript("/js/three/three-built.js").always(function(){console.log("loaded");threeLibrariesLoaded=true;self.setObjectColor();self.init();console.log("AsyncInit")})}else{this.init()}},init:function(){if(!Detector.webgl)Detector.addGetWebGLMessage();var self=this;console.log("Init");$(this).sfeutil("track_event","3D","viewer_loaded");THREE.DefaultLoadingManager.onStart=function(){self.loaderElement.show()};THREE.DefaultLoadingManager.onLoad=function(){self.loaderElement.hide()};this.initMenu();this.worldScene=new THREE.Scene;this.scene=new THREE.Object3D;this.scene.topLevelScene=true;this.worldScene.add(this.scene);this.container_width=this.container.offsetWidth,this.container_height=this.container_width;this.cameraFov=35;this.cameraAspect=this.container_width/this.container_height;this.camera=new THREE.PerspectiveCamera(this.cameraFov,this.cameraAspect,100,1e9);this.camera.position.set(2.5,1.25,2.5);this.transformControls=new THREE.TransformControls(this.camera,this.container);this.transformControls.addEventListener("change",function(){self.render()});this.transformControls.addEventListener("mouseDown",function(){self.controls.enabled=false});this.transformControls.addEventListener("mouseUp",function(){self.controls.enabled=true});this.worldScene.add(this.transformControls);this.transformControls.detach();this.raycaster=new THREE.Raycaster;var onDownPosition=new THREE.Vector2;var onUpPosition=new THREE.Vector2;var onDoubleClickPosition=new THREE.Vector2;var objectCheck=function(raycaster,camera,point,objects){var intersects=THREE.SceneUtils.getIntersects(raycaster,camera,point,objects);if(intersects.length>0){for(var i=0;i<intersects.length;i++){var object=intersects[i].object;while(object.parent.topLevelScene!==true){object=object.parent}if(object.solidForPositioning===true){return object}}}return false};var handleClick=function(){if(onDownPosition.distanceTo(onUpPosition)==0){self.transformControls.detach();var object=objectCheck(self.raycaster,self.camera,onUpPosition,self.scene.children);if(object!==false){self.transformControls.attach(object);self.render()}}};var onMouseUp=function(event){var array=getMousePosition(self.container,event.clientX,event.clientY);onUpPosition.fromArray(array);if(self.transform!==0)handleClick();document.removeEventListener("mouseup",onMouseUp,false)};this.controls=new THREE.OrbitControls(this.camera,this.container);this.controls.noKeys=true;this.controls.damping=.005;this.controls.domElement.addEventListener("mousedown",function(e){var targetControls=$(e.target).parents(".threed-controls").length>0;if(self.controls.autoRotate&&!targetControls){self.controls.autoRotate=false;self.controlInfoElement.text("")}if($(e.target).hasClass("threed-input")){$(e.target).trigger("focus")}else if(!targetControls){var array=getMousePosition(self.container,e.clientX,e.clientY);var object=onDownPosition.fromArray(array);document.addEventListener("mouseup",onMouseUp,false)}});this.controls.domElement.addEventListener("mousemove",function(e){if(self.edgeSelection){var array=getMousePosition(self.container,e.clientX,e.clientY);var v=(new THREE.Vector2).fromArray(array);var object=objectCheck(self.raycaster,self.camera,v,self.scene.children);if(self.selectedEdges.length>0){for(var i=0;i<self.selectedEdges.length;i++){self.scene.remove(self.selectedEdges[i]);self.selectedEdges=[]}}if(object!==false){var material=new THREE.LineBasicMaterial({color:16776960,depthTest:false});var line=new THREE.Line(object,material,THREE.LinePieces);self.scene.add(line);self.selectedEdges.push(line)}}});this.controls.addEventListener("change",function(){self.transformControls.update();self.render()});this.resizeGrid();var len=this.options.models.length,c=1;for(var i in this.options.models){this.loadModel(this.options.models[i],function(){if(c++==len)self.centerViewOnScene()})}if(Detector.webgl){this.renderer=new THREE.WebGLRenderer({antialias:true})}else{this.renderer=new THREE.CanvasRenderer;this.canvasFallback=true}this.setBackgroundColor();this.scene.add(!this.canvasFallback?new THREE.AmbientLight(4210752):new THREE.AmbientLight(16777215));this.light=new THREE.DirectionalLight(16777215);this.light.position.copy(this.camera.position);this.scene.add(this.light);this.renderer.setSize(this.container_width,this.container_height);this.renderer.gammaInput=true;this.renderer.gammaOutput=true;this.container.appendChild(this.renderer.domElement);window.addEventListener("resize",function(){self.onResize()},false);this.onResize();this.animate()},toggleMaximize:function(max){var self=this;var tooltip=this.maxBtn.data("bs.tooltip");console.log(max);if(max===undefined){max=!(tooltip.options.title=="Maximize")}tooltip.options.title=!max?"Maximize":"Minimize";this.maxBtn.toggleClass("glyphicon-resize-full",!max);this.maxBtn.toggleClass("glyphicon-resize-small active",max);this.controlElements.toggleClass("maximized",max);this.controlElements.toggleClass("minimized",!max);setTimeout(function(){self.controlElements.find(".popover-open").removeClass("popover-open").popover("hide")},100);this.onResize()},initMenu:function(){var self=this;this.maxBtn=this.makeControlButton("Maximize","images-maximize-launch glyphicon glyphicon-resize-full",function(e){self.toggleMaximize()});var gearBtn=this.makeControlButton("Settings","glyphicon glyphicon-cog threed-btn-gear",function(e){var tip=$(e.target).data("bs.popover").tip();var inputs=tip.find("input,.color-disp");$(inputs[0]).css("background-color",self.objectColor);$(inputs[1]).val(self.objectColor).on("change",function(e){$(inputs[0]).css("background-color",$(this).val())});$(inputs[2]).css("background-color",self.backgroundTopColor);$(inputs[3]).val(self.backgroundTopColor).on("change",function(e){$(inputs[2]).css("background-color",$(this).val())});$(inputs[4]).css("background-color",self.backgroundBottomColor);$(inputs[5]).val(self.backgroundBottomColor).on("change",function(e){$(inputs[4]).css("background-color",$(this).val())});$(inputs[6]).val(self.gridSize);$(inputs[7]).val(self.gridSpacing);tip.find("form").on("submit",function(ce){ce.preventDefault();self.objectColor=$(inputs[1]).val();self.backgroundTopColor=$(inputs[3]).val();self.backgroundBottomColor=$(inputs[5]).val();self.gridSize=$(inputs[6]).val();self.gridSpacing=$(inputs[7]).val();self.resizeGrid();self.setBackgroundColor();self.setObjectColor();$(e.target).removeClass("active").popover("hide").toggleClass("popover-open")})},{title:"Settings",trigger:"manual",html:true,content:settings_html,placement:"top"});var scaleGroup=this.makeControlDrawer(this.makeControlButton("Banana for scale","sfe-icon-banana",function(e){if(shiftDown){self.spawnBananaForScale();$(e.target).toggleClass("active")}else{self.toggleBananaForScale()}}),this.makeControlButton("Quarter for scale","",function(e){if(shiftDown){self.spawnCoinForScale();$(e.target).toggleClass("active")}else{self.toggleCoinForScale()}}).css({fontSize:"0.8em"}).text("25"),this.makeControlButton("Custom cube for scale","sfe-icon-boxico",function(e){var pop=$(e.target).data("bs.popover"),tip=$(e.target).data("bs.popover").tip().css("max-width","300px");if($(e.target).hasClass("popover-open"))e.stopPropagation();if(self.cubeForScale!==null){$(e.target).removeClass("popover-open");pop.hide();self.toggleCubeForScale()}else{$(e.target).toggleClass("active");tip.find("form").on("submit",function(ce){ce.preventDefault();var inputs=tip.find("input"),width=convertWorldScale($(inputs[0]).val()),height=convertWorldScale($(inputs[1]).val()),length=convertWorldScale($(inputs[2]).val());if(width>0&&height>0&&length>0){$(e.target).addClass("active").popover("hide").toggleClass("popover-open").parent().toggleClass("closed open",500);if(shiftDown){$(e.target).toggleClass("active");self.spawnCubeForScale(width,height,length)}else{self.toggleCubeForScale(width,height,length)}}})}},{title:"Cube Spawner",trigger:"manual",html:true,content:cube_spawner_html,placement:"top"}),this.makeControlButton("Sparkfun Product for scale","sfe-icon-flame",function(e){var pop=$(e.target).data("bs.popover"),tip=$(e.target).data("bs.popover").tip();if($(e.target).hasClass("popover-open"))e.stopPropagation();if(self.productForScale!==null){$(e.target).removeClass("popover-open");pop.hide();self.toggleProductForScale()}else{$(e.target).toggleClass("active");tip.find("form").on("submit",function(ce){ce.preventDefault();$(e.target).addClass("active").popover("hide").toggleClass("popover-open").parent().toggleClass("closed open",500);var inputs=tip.find("input"),product_id=$(inputs[0]).val();if(shiftDown){$(e.target).toggleClass("active");self.spawnProductForScale(product_id,function(){$(e.target).toggleClass("active");self.productForScale=null})}else{self.toggleProductForScale(product_id,function(){$(e.target).toggleClass("active");self.productForScale=null})}})}},{title:"Sparkfun Product Spawner",trigger:"manual",html:true,content:sfe_spawner_html,placement:"top"})).addClass("forscale");var transformGroup=this.makeControlDrawer(this.makeControlButton("Select and move an object","glyphicon glyphicon-move",function(e){$(e.target).siblings().removeClass("active");if(self.transform==1){self.transform=0;self.transformControls.detach()}else{self.transform=1;self.transformControls.setMode("translate");if(!self.transformControls.object)self.transformControls.detach()}}),this.makeControlButton("Select and rotate an object","glyphicon glyphicon-refresh",function(e){$(e.target).siblings().removeClass("active");if(self.transform==2){self.transform=0;self.transformControls.detach()}else{self.transform=2;self.transformControls.setMode("rotate");if(!self.transformControls.object)self.transformControls.detach()}})).addClass("move");this.controlInfoElement=$("<span></span>").addClass("threed-info").text("Drag to change view");this.controlElements=$("<div></div>").addClass("threed-controls minimized").append(scaleGroup).append(transformGroup).append(this.controlInfoElement).append(gearBtn).append(this.maxBtn).appendTo(this.$element)},makeControlButton:function(tooltip,classes,onToggle,popOverOptions,onPopoverSubmit){var self=this,btn=$("<div></div>").addClass("threed-btn "+classes).on("click",function(e){$(this).sfeutil("track_event","3D","controlbtn_click_"+tooltip.replace(" ","_"));var inDrawer=$(this).parent().hasClass("threed-drawer");if(inDrawer===false||($(this).parents(".threed-drawer").hasClass("open")||self.controlElements.hasClass("maximized"))){if(inDrawer&&self.controlElements.hasClass("maximized"))e.stopPropagation();$(this).toggleClass("active");e.buttonActive=$(this).hasClass("active");if(popOverOptions!==undefined){var btn=$(this);btn.toggleClass("popover-open").popover("toggle");var pop=$(this).data("bs.popover");pop.tip().find("input").on("keyup",function(e){e.stopPropagation()});pop.tip().find("div.btn").on("click",function(){btn.removeClass("popover-open");pop.hide();if(inDrawer)btn.parent().removeClass("open").addClass("closed")});pop.tip().find("input").first().trigger("focus")}onToggle(e)}});btn.tooltip({animated:"fade",container:"body",title:tooltip,placement:"bottom"});if(popOverOptions!==undefined)var pop=btn.popover($.extend({container:"body"},popOverOptions));return btn},makeControlDrawer:function(contents){var drawer=$("<div></div>").addClass("threed-drawer closed").on("click",function(){$(this).toggleClass("closed open",500)});for(var i=0;i<arguments.length;i++){drawer.append(arguments[i])}return drawer},loadModel:function(url,callback){var self=this;var ext=url.substr(url.lastIndexOf(".")+1).toLowerCase();if(ext=="stl"){var loader=new THREE.STLLoader;loader.load(url,function(geometry){var mesh=new THREE.Mesh(geometry,self.objectMaterial);self.loadObject(mesh);if(callback)callback(mesh)})}else if(ext=="json"){var loader=new THREE.JSONLoader;loader.setCrossOrigin(true);loader.load(url,function(geometry,materials){for(var i=0,l=materials.length;i<l;i++){if(materials[i].map)materials[i].color=new THREE.Color(16777215)}var faceMaterial=new THREE.MeshFaceMaterial(materials);var mesh=new THREE.Mesh(geometry,faceMaterial);self.loadObject(mesh);if(callback)callback(mesh)})}else{console.log("unknown type "+ext)}},spawnBananaForScale:function(){var self=this,temp=new THREE.Banana(function(obj){self.loadObject(obj)})},toggleBananaForScale:function(){if(this.bananaForScale!==null){this.scene.remove(this.bananaForScale);this.bananaForScale=null}else{var self=this;this.bananaForScale=new THREE.Banana(function(obj){self.loadObject(obj)})}},spawnCoinForScale:function(){var coin=new THREE.Coin(24.26/2*RENDER_SCALE,1.75*RENDER_SCALE,32,1,true);THREE.SceneUtils.positionObject(coin,this.scene.children,RENDER_SCALE);coin.boundingBox=(new THREE.Box3).setFromObject(coin);coin.solidForPositioning=true;this.scene.add(coin);return coin},toggleCoinForScale:function(){if(this.coinForScale!==null){this.scene.remove(this.coinForScale);this.coinForScale=null}else{this.coinForScale=this.spawnCoinForScale()}},toggleCubeForScale:function(width,height,length){if(this.cubeForScale!==null){this.scene.remove(this.cubeForScale);this.cubeForScale=null}else{this.cubeForScale=this.spawnCubeForScale(width,height,length)}},spawnCubeForScale:function(width,height,length){var cube=new THREE.Mesh(new THREE.BoxGeometry(width,height,length),this.objectMaterial);THREE.SceneUtils.positionObject(cube,this.scene.children,RENDER_SCALE);cube.position.y=height/2;cube.boundingBox=(new THREE.Box3).setFromObject(cube);cube.solidForPositioning=true;this.scene.add(cube);return cube},toggleProductForScale:function(product_id,onError){var self=this;if(this.productForScale!==null){for(var i in this.productForScale){this.scene.remove(this.productForScale[i])}this.productForScale=null}else{this.productForScale=[];this.spawnProductForScale(product_id,function(products){self.productForScale=products},onError)}},spawnProductForScale:function(product_id,callback,onError){var self=this;$.ajax({url:"/products/"+product_id+"/model_info.json",success:function(data){if(data.error==true||data.length===0){alert("Sorry, we do not have any 3d models for that product");if(onError)onError()}else{var models=[],len=data.length,c=1;for(var i in data){self.loadModel(data[i],function(model){models.push(model);if(c++==len)self.centerViewOnScene()})}callback(models)}}})},setObjectColor:function(){this.objectMaterial=new THREE.MeshPhongMaterial({ambient:this.objectColor,color:this.objectColor,specular:this.objectColor,shininess:200,side:THREE.DoubleSide,opacity:1,transparent:false})},resizeGrid:function(){if(this.grid!==null)this.worldScene.remove(this.grid);var gridSize=convertWorldScale(this.gridSize),gridSpacing=convertWorldScale(this.gridSpacing);if(gridSize>0&&gridSpacing>0){this.grid=new THREE.GridHelper(gridSize,gridSpacing);this.grid.position.set(0,-1,0);this.worldScene.add(this.grid)}},setBackgroundColor:function(){var uniforms={topColor:{type:"c",value:new THREE.Color(this.backgroundTopColor)},bottomColor:{type:"c",value:new THREE.Color(this.backgroundBottomColor)},offset:{type:"f",value:0}};if(this.skyDome!==null)this.worldScene.remove(this.skyDome);var skyGeo=new THREE.SphereGeometry(1e8,32,15);var skyMat=new THREE.ShaderMaterial({uniforms:uniforms,vertexShader:skyVshader,fragmentShader:skyFshader,side:THREE.BackSide});this.skyDome=new THREE.Mesh(skyGeo,skyMat);this.worldScene.add(this.skyDome);var c=new THREE.Color(this.backgroundBottomColor),contrast=0;if(c.r>=.5)contrast++;if(c.g>=.5)contrast++;if(c.b>=.5)contrast++;if(contrast>=2){this.controlElements.addClass("dark")}else{this.controlElements.removeClass("dark")}},loadObject:function(object){var center=THREE.SceneUtils.getCentroid(object);if(center.x!=0||center.y!=0||center.z!=0){object.traverse(function(mesh){if(mesh instanceof THREE.Mesh){mesh.geometry.applyMatrix((new THREE.Matrix4).makeTranslation(-center.x,-center.y,-center.z));if(mesh.geometry.center)mesh.geometry.center();mesh.geometry.verticesNeedUpdate=true}})}object.scale.set(RENDER_SCALE,RENDER_SCALE,RENDER_SCALE);object.position.set(0,0,0);var box=(new THREE.Box3).setFromObject(object);var half_model_height=box.size().y/2;object.position.set(0,half_model_height,0);if(!this.firstModel){}THREE.SceneUtils.positionObject(object,this.scene.children,RENDER_SCALE);object.boundingBox=(new THREE.Box3).setFromObject(object);object.solidForPositioning=true;console.log(object.type);this.scene.add(object);this.firstModel=true},centerViewOnScene:function(){var box=(new THREE.Box3).setFromObject(this.scene);var sphere=box.getBoundingSphere(),radius=sphere.radius;var distanceFactor=Math.abs(this.cameraAspect*radius/Math.sin(this.cameraFov/2));this.camera.position.set(0,distanceFactor*2,distanceFactor*3);this.controls.center.set(0,box.size().y/2,0);this.controls.autoRotate=true;this.controls.update()},animate:function(){var self=this;requestAnimationFrame(function(){self.animate()});this.controls.update();this.render()},render:function(){var timer=Date.now()*5e-4;this.light.position.copy(this.camera.position);this.renderer.render(this.worldScene,this.camera)},onResize:function(){console.log("onResize");this.container_width=this.container.offsetWidth,this.container_height=this.container_width;if(this.container_height>=300){this.container_height=this.container_height*.45}if(this.camera){this.camera.aspect=this.container_width/this.container_height;this.camera.updateProjectionMatrix()}if(this.renderer)this.renderer.setSize(this.container_width,this.container_height)}};function convertWorldScale(real){var reg=/([\d\.]+) ?(mm|in|cm|")$/.exec(real);var num=reg?reg[1]:real;var units=reg?reg[2]:"";switch(units){default:case"mm":return num*RENDER_SCALE;break;case"cm":return num*10*RENDER_SCALE;break;case"in":case'"':return num*25.4*RENDER_SCALE;break}return 0}function getMousePosition(dom,x,y){var rect=dom.getBoundingClientRect();return[(x-rect.left)/rect.width,(y-rect.top)/rect.height]}$.fn.DDD=function(options){if(typeof options=="string")var method=options,options={};return this.each(function(){var d3=$(this).data("DDD");if(undefined==d3){d3=new DDD(this,options);$(this).data("DDD",d3)}if(method)d3[method]()})};$.fn.DDD.defaults={models:[]};var skyVshader=["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n");var skyFshader=["uniform vec3 topColor;","uniform vec3 bottomColor;","varying vec3 vWorldPosition;","void main() {","float h = normalize( vWorldPosition ).y;","float nh = (h + 1.0) / 2.0;","gl_FragColor = vec4( mix( bottomColor, topColor, nh ), 1.0 );","}"].join("\n");var cube_spawner_html='<form><div class="form-group">      <label>Width / Height / Length</label>      <div class="row">        <div class="col-md-4"><input type="text" value="10mm" class="form-control" /></div>        <div class="col-md-4"><input type="text" value="10mm" class="form-control" /></div>        <div class="col-md-4"><input type="text" value="10mm" class="form-control" /></div>      </div>    </div>    <p>Use mm, cm, in or " as units</p>    <input class="btn btn-action pull-right" style="margin-bottom:20px" type="submit" value="Make" />    <div class="btn pull-right" style="margin-bottom:20px">Cancel</div></form>';var sfe_spawner_html='<form><div class="form-group">    <label>Product ID</label>    <input type="text" class="form-control" />  </div>  <input class="btn btn-action pull-right" style="margin-bottom:20px" type="submit" value="Spawn" />  <div class="btn pull-right" style="margin-bottom:20px">Cancel</div></form>';var settings_html='<form><div class="form-group">    <label>Object Color</label>    <div class="row">      <div class="col-md-1" style="margin-right:19px"><div class="color-disp"></div></div>      <div class="col-md-10"><input type="text" class="form-control" /></div>    </div>    <label>Top Background Color</label>    <div class="row">      <div class="col-md-1" style="margin-right:19px"><div class="color-disp"></div></div>      <div class="col-md-10"><input type="text" class="form-control" /></div>    </div>    <label>Bottom Background Color</label>    <div class="row">      <div class="col-md-1" style="margin-right:19px"><div class="color-disp"></div></div>      <div class="col-md-10"><input type="text" class="form-control" /></div>    </div>    <div class="row">      <div class="col-md-6">        <label>Grid Size</label>        <input type="text" class="form-control" />      </div>      <div class="col-md-6">        <label>Grid spacing</label>        <input type="text" class="form-control" />      </div>    </div>    <p>Use mm, cm, in or " as units</p>    <input class="btn btn-action pull-right" style="margin-bottom:20px" type="submit" value="Apply" />    <div class="btn pull-right" style="margin-bottom:20px">Cancel</div>  </div></form>'}(window.jQuery);(function($){var methods={init:function(options){},login:function(){var msg="In order to favorite an item, you need to log in to your account.";var modal=$("#login_modal");modal.find(".modal-header-msg").html(msg);modal.modal("show")},toggle:function(){var $button=$(this);if(!SFECONFIG.auth){$button.favorite("login");return false}var args={entity_id:$button.data("entity-id"),entity:$button.data("entity")};$.post("/favorites/toggle.json",args).done(function(data){if(!data.success){alert(data.message);return false}$button.parent().find(".fave_count").text(data.favorite_count);if(data.customer_favorite){$button.addClass("yes").attr("title","Remove from favorites");$(this).sfeutil("track_event","Favorite","add",$button.data("entity"))}else{$button.removeClass("yes").attr("title","Add to favorites");$(this).sfeutil("track_event","Favorite","remove",$button.data("entity"))}$button.trigger("blur")}).fail(function(){alert("We were unable to save your favorite, please try again in a few minutes.")})}};$.fn.favorite=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.favorite")}};var $document=$(document);$document.on("loaded",function(){$document.on("click",".fave_btn",function(e){var $button=$(this);e.preventDefault();e.stopPropagation();$button.favorite("toggle")})})})(jQuery);(function($,window,document){"use strict";var defaultSelector="input[data-spin-buttons]",defaultSettings={icons:{down:"",up:""},labels:{down:"-",up:"+"}};$.extend($.ui.spinner.prototype.options,defaultSettings,true);$.widget("ui.spinner",$.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<div class='ui-spinner ui-widget ui-widget-content input-group'></div>").parent().prepend('<span class="input-group-btn"><button type="button" class="btn btn-default ui-spinner-button ui-spinner-down">'+'<span class="'+this.options.icons.down+'">'+this.options.labels.down+"</span>"+"</button></span>").append('<span class="input-group-btn"><button type="button" class="btn btn-default ui-spinner-button ui-spinner-up">'+'<span class="'+this.options.icons.up+'">'+this.options.labels.up+"</span>"+"</button></span>")}});function init(){$(defaultSelector).each(function(){var $this=$(this),apiSettings=$this.data("spin-buttons");$this.spinner(apiSettings)})}$(init)})(jQuery,window,document);(function($,window,document){"use strict";var $document=$(document),formSelector=".recaptcha-form",challengeContainerSelector=".g-recaptcha",validationErrorClassName="has-error",validationMessageClassName="help-block",instanceIdDataKey="recaptcha-instance-id",url="//www.google.com/recaptcha/api.js?render=explicit&onload=grecaptchaOnloadCallback",scriptId="g-recaptcha-script",firstScript=document.getElementsByTagName("script")[0],scriptElement=document.createElement("script"),isReady=false,messageUninitialized="Please make sure that Google reCAPTCHA is not blocked and has had time to load then try again.",messageInvalid="Please complete this field.";function addMessage(e,$form,message){var $challenge=$form.find(challengeContainerSelector);e.preventDefault();$challenge.parent().addClass(validationErrorClassName);$challenge.after('<span class="'+validationMessageClassName+'">'+message+"</span>")}function clearMessages($form){var $challenge=$form.find(challengeContainerSelector);$challenge.parent().removeClass(validationErrorClassName).find("."+validationMessageClassName).remove()}function handleSubmit(e){var $this=$(this),id,response;clearMessages($this);if(!isReady){$this.sfeutil("track_event","reCAPTCHA","not_ready");addMessage(e,$this,messageUninitialized);return}id=$this.data(instanceIdDataKey);if(id===undefined){$this.sfeutil("track_event","reCAPTCHA","id_undefined");addMessage(e,$this,messageUninitialized);return}response=grecaptcha.getResponse(id);if(!response){addMessage(e,$this,messageInvalid)}return}function renderCaptcha(){var $this=$(this),id=$this.data(instanceIdDataKey),$challenge;if(id){return}$challenge=$this.find(challengeContainerSelector);id=grecaptcha.render($challenge.get(0),{sitekey:$challenge.data("sitekey")});$this.data(instanceIdDataKey,id)}function initCaptcha(context){var $forms=$(formSelector,context);if(!grecaptcha){$forms.sfeutil("track_event","reCAPTCHA","grecaptcha_undefined");return}$forms.each(renderCaptcha);isReady=true}function handleFormInsert(e){initCaptcha(e.target)}if($("#"+scriptId).length===0){$document.on("submit.sfe.captcha","form"+formSelector,handleSubmit);window.grecaptchaOnloadCallback=initCaptcha;scriptElement.id=scriptId;scriptElement.src=url;scriptElement.async=1;scriptElement.defer=1;firstScript.parentNode.insertBefore(scriptElement,firstScript)}$document.on("captchaAdd.sfe.captcha",handleFormInsert)})(jQuery,window,document);(function($,window,document){"use strict";var $window=$(window);$.widget("sfe.ajaxCarousel",{options:{urlAttribute:"carousel-url",rowsPerPageAttribute:"carousel-rows",innerContainerSelector:".carousel-inner",populatedItemSelector:".tile",emptyItemClass:"tile-pending tile",emptyItemSelector:".tile-pending"},_resultsPerPage:function(){var _this=this,width=$window.outerWidth();if(width>=1200){return 5*_this.rowsPerPage}if(width>=980){return 4*_this.rowsPerPage}return 2*_this.rowsPerPage},_accumulateResults:function(index,value){var _this=this,trimmed=$.trim(value);index=parseInt(index,10);if(_this.results.length===index||_this.results[index].className===_this.options.emptyItemClass){_this.results[index]=$.parseHTML(trimmed)[0]}},_populatePage:function($page,firstIndex,lastIndex,mustBeComplete){var _this=this,$pageItems=_this.$results.slice(firstIndex,lastIndex),$pageEmptyItems=$pageItems.filter(_this.options.emptyItemSelector),pageComplete=$pageEmptyItems.length===0;$page.append($pageItems);$page.data("page-complete",pageComplete);if(!pageComplete&&mustBeComplete){_this._loadResults($page)}},_paginate:function(){var i,$page,pageFirstIndex,pageLastIndex,isActivePage,_this=this,resultsPerPage=_this._resultsPerPage(),totalPages=Math.ceil(_this.total/resultsPerPage),activePageIndex=Math.floor(_this.currentFirstIndex/resultsPerPage);if(!_this.innerContainer||_this.innerContainer.length<1){return}_this.$results.detach();_this.innerContainer.empty();_this.currentResultsPerPage=resultsPerPage;_this.currentFirstIndex=activePageIndex*resultsPerPage;for(i=0;i<totalPages;i+=1){pageFirstIndex=i*resultsPerPage;pageLastIndex=pageFirstIndex+resultsPerPage;isActivePage=i===activePageIndex;$page=$('<div class="item'+(isActivePage?" active":"")+'"><span class="page_num">Page '+(i+1)+" of "+totalPages+"</span></div>");$page.data("page-index",i);_this._populatePage($page,pageFirstIndex,pageLastIndex,isActivePage);_this.innerContainer.append($page)}},_handleResize:function(){var _this=this;if(_this.currentResultsPerPage&&_this._resultsPerPage()!==_this.currentResultsPerPage){_this._paginate()}},_addItems:function(items,$page,firstIndex,lastIndex){var _this=this;if(!items){return}$.each(items,$.proxy(_this._accumulateResults,_this));_this.$results=$(_this.results);$page.children("div").detach();_this._populatePage($page,firstIndex,lastIndex)},_loadResults:function($targetPageContainer){var index=$targetPageContainer.data("page-index"),limit=this.currentResultsPerPage,offset=index*limit,url=this.baseUrl+"&limit="+limit+"&offset="+offset;function addResults(results){this._addItems(results.items,$targetPageContainer,offset,offset+limit)}$.ajax(url,{dataType:"json",success:$.proxy(addResults,this)})},_handleSlide:function(e){var _this=this,$targetPageContainer=$(e.relatedTarget),pageComplete=$targetPageContainer.data("page-complete");_this.currentFirstIndex=_this.currentResultsPerPage*parseInt($targetPageContainer.data("page-index"));if(pageComplete){return}_this._loadResults($targetPageContainer)},_initializeShell:function(response){var _this=this,i;if(!(response.items&&response.items.length>0)||!response.shell){return}_this.total=response.total;$.each(response.items,$.proxy(_this._accumulateResults,_this));for(i=response.items.length;i<_this.total;i+=1){_this.results[i]=document.createElement("div");_this.results[i].className=_this.options.emptyItemClass}_this.$results=$(_this.results);_this.innerContainer=$(_this.element).html(response.shell).find(_this.options.innerContainerSelector);_this.currentFirstIndex=0;_this._paginate()},_loadShell:function(){var _this=this,url=_this.baseUrl+"&shell=1&limit="+_this._resultsPerPage();$.ajax(url,{dataType:"json",success:$.proxy(_this._initializeShell,_this)})},_create:function(){var _this=this,options=_this.options;_this.results=[];_this.total=null;_this.currentResultsPerPage=null;_this.baseUrl=_this.element.data(options.urlAttribute);_this.rowsPerPage=parseInt(_this.element.data(options.rowsPerPageAttribute),10)||1;_this._loadShell();_this._on(window,{resize:_this._handleResize});$(_this.element).on("slide.bs.carousel"+_this.eventNamespace,$.proxy(_this._handleSlide,_this))}});function init(){$("[data-carousel-url]").ajaxCarousel()}$(init)})(jQuery,window,document);$(function(){$("body").on("click","#skunkwork_documents",function(){var s=document.createElement("script");s.type="text/javascript";s.src="/js/holiday/futurefun.js";$("head").append(s)})});
